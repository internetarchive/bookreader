!function(e){var t={};function o(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(i,r,function(t){return e[t]}.bind(null,r));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=58)}([function(e,t,o){var i=o(3),r=o(18),n=o(41),a=o(69),s=i.Symbol,h=r("wks");e.exports=function(e){return h[e]||(h[e]=a&&s[e]||(a?s:n)("Symbol."+e))}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,o){var i=o(4);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,o){(function(t){var o=function(e){return e&&e.Math==Math&&e};e.exports=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof t&&t)||Function("return this")()}).call(this,o(60))},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,o){var i=o(3),r=o(36).f,n=o(7),a=o(13),s=o(24),h=o(64),d=o(45);e.exports=function(e,t){var o,u,l,c,p,g=e.target,f=e.global,m=e.stat;if(o=f?i:m?i[g]||s(g,{}):(i[g]||{}).prototype)for(u in t){if(c=t[u],l=e.noTargetGet?(p=r(o,u))&&p.value:o[u],!d(f?u:g+(m?".":"#")+u,e.forced)&&void 0!==l){if(typeof c==typeof l)continue;h(c,l)}(e.sham||l&&l.sham)&&n(c,"sham",!0),a(o,u,c,e)}}},function(e,t){var o={}.hasOwnProperty;e.exports=function(e,t){return o.call(e,t)}},function(e,t,o){var i=o(8),r=o(10),n=o(17);e.exports=i?function(e,t,o){return r.f(e,t,n(1,o))}:function(e,t,o){return e[t]=o,e}},function(e,t,o){var i=o(1);e.exports=!i((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,o){var i=o(8),r=o(37),n=o(2),a=o(22),s=Object.defineProperty;t.f=i?s:function(e,t,o){if(n(e),t=a(t,!0),n(o),r)try{return s(e,t,o)}catch(e){}if("get"in o||"set"in o)throw TypeError("Accessors not supported");return"value"in o&&(e[t]=o.value),e}},function(e,t,o){var i=o(14),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t){var o={}.toString;e.exports=function(e){return o.call(e).slice(8,-1)}},function(e,t,o){var i=o(3),r=o(18),n=o(7),a=o(6),s=o(24),h=o(39),d=o(40),u=d.get,l=d.enforce,c=String(h).split("toString");r("inspectSource",(function(e){return h.call(e)})),(e.exports=function(e,t,o,r){var h=!!r&&!!r.unsafe,d=!!r&&!!r.enumerable,u=!!r&&!!r.noTargetGet;"function"==typeof o&&("string"!=typeof t||a(o,"name")||n(o,"name",t),l(o).source=c.join("string"==typeof t?t:"")),e!==i?(h?!u&&e[t]&&(d=!0):delete e[t],d?e[t]=o:n(e,t,o)):d?e[t]=o:s(t,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||h.call(this)}))},function(e,t){var o=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:o)(e)}},function(e,t,o){var i=o(21),r=o(9);e.exports=function(e){return i(r(e))}},function(e,t,o){var i=o(9);e.exports=function(e){return Object(i(e))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,o){var i=o(23),r=o(62);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.3.3",mode:i?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,o){var i=o(1),r=o(0)("species");e.exports=function(e){return!i((function(){var t=[];return(t.constructor={})[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t){e.exports={}},function(e,t,o){var i=o(1),r=o(12),n="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==r(e)?n.call(e,""):Object(e)}:Object},function(e,t,o){var i=o(4);e.exports=function(e,t){if(!i(e))return e;var o,r;if(t&&"function"==typeof(o=e.toString)&&!i(r=o.call(e)))return r;if("function"==typeof(o=e.valueOf)&&!i(r=o.call(e)))return r;if(!t&&"function"==typeof(o=e.toString)&&!i(r=o.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=!1},function(e,t,o){var i=o(3),r=o(7);e.exports=function(e,t){try{r(i,e,t)}catch(o){i[e]=t}return t}},function(e,t,o){var i=o(18),r=o(41),n=i("keys");e.exports=function(e){return n[e]||(n[e]=r(e))}},function(e,t){e.exports={}},function(e,t,o){var i=o(66),r=o(3),n=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?n(i[e])||n(r[e]):i[e]&&i[e][t]||r[e]&&r[e][t]}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,o){var i=o(12);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,o){"use strict";var i=o(22),r=o(10),n=o(17);e.exports=function(e,t,o){var a=i(t);a in e?r.f(e,a,n(0,o)):e[a]=o}},function(e,t,o){var i=o(47),r=o(21),n=o(16),a=o(11),s=o(46),h=[].push,d=function(e){var t=1==e,o=2==e,d=3==e,u=4==e,l=6==e,c=5==e||l;return function(p,g,f,m){for(var v,_,b=n(p),P=r(b),w=i(g,f,3),R=a(P.length),B=0,x=m||s,y=t?x(p,R):o?x(p,0):void 0;R>B;B++)if((c||B in P)&&(_=w(v=P[B],B,b),e))if(t)y[B]=_;else if(_)switch(e){case 3:return!0;case 5:return v;case 6:return B;case 2:h.call(y,v)}else if(u)return!1;return l?-1:d||u?u:y}};e.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6)}},function(e,t,o){"use strict";var i=o(2);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,o){"use strict";var i=o(7),r=o(13),n=o(1),a=o(0),s=o(34),h=a("species"),d=!n((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=!n((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var o="ab".split(e);return 2!==o.length||"a"!==o[0]||"b"!==o[1]}));e.exports=function(e,t,o,l){var c=a(e),p=!n((function(){var t={};return t[c]=function(){return 7},7!=""[e](t)})),g=p&&!n((function(){var t=!1,o=/a/;return o.exec=function(){return t=!0,null},"split"===e&&(o.constructor={},o.constructor[h]=function(){return o}),o[c](""),!t}));if(!p||!g||"replace"===e&&!d||"split"===e&&!u){var f=/./[c],m=o(c,""[e],(function(e,t,o,i,r){return t.exec===s?p&&!r?{done:!0,value:f.call(t,o,i)}:{done:!0,value:e.call(o,t,i)}:{done:!1}})),v=m[0],_=m[1];r(String.prototype,e,v),r(RegExp.prototype,c,2==t?function(e,t){return _.call(e,this,t)}:function(e){return _.call(e,this)}),l&&i(RegExp.prototype[c],"sham",!0)}}},function(e,t,o){"use strict";var i,r,n=o(32),a=RegExp.prototype.exec,s=String.prototype.replace,h=a,d=(i=/a/,r=/b*/g,a.call(i,"a"),a.call(r,"a"),0!==i.lastIndex||0!==r.lastIndex),u=void 0!==/()??/.exec("")[1];(d||u)&&(h=function(e){var t,o,i,r,h=this;return u&&(o=new RegExp("^"+h.source+"$(?!\\s)",n.call(h))),d&&(t=h.lastIndex),i=a.call(h,e),d&&i&&(h.lastIndex=h.global?i.index+i[0].length:t),u&&i&&i.length>1&&s.call(i[0],o,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i}),e.exports=h},function(e,t,o){var i=o(12),r=o(34);e.exports=function(e,t){var o=e.exec;if("function"==typeof o){var n=o.call(e,t);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==i(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},function(e,t,o){var i=o(8),r=o(61),n=o(17),a=o(15),s=o(22),h=o(6),d=o(37),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=a(e),t=s(t,!0),d)try{return u(e,t)}catch(e){}if(h(e,t))return n(!r.f.call(e,t),e[t])}},function(e,t,o){var i=o(8),r=o(1),n=o(38);e.exports=!i&&!r((function(){return 7!=Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))},function(e,t,o){var i=o(3),r=o(4),n=i.document,a=r(n)&&r(n.createElement);e.exports=function(e){return a?n.createElement(e):{}}},function(e,t,o){var i=o(18);e.exports=i("native-function-to-string",Function.toString)},function(e,t,o){var i,r,n,a=o(63),s=o(3),h=o(4),d=o(7),u=o(6),l=o(25),c=o(26),p=s.WeakMap;if(a){var g=new p,f=g.get,m=g.has,v=g.set;i=function(e,t){return v.call(g,e,t),t},r=function(e){return f.call(g,e)||{}},n=function(e){return m.call(g,e)}}else{var _=l("state");c[_]=!0,i=function(e,t){return d(e,_,t),t},r=function(e){return u(e,_)?e[_]:{}},n=function(e){return u(e,_)}}e.exports={set:i,get:r,has:n,enforce:function(e){return n(e)?r(e):i(e,{})},getterFor:function(e){return function(t){var o;if(!h(t)||(o=r(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return o}}}},function(e,t){var o=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++o+i).toString(36)}},function(e,t,o){var i=o(43),r=o(28).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,o){var i=o(6),r=o(15),n=o(67).indexOf,a=o(26);e.exports=function(e,t){var o,s=r(e),h=0,d=[];for(o in s)!i(a,o)&&i(s,o)&&d.push(o);for(;t.length>h;)i(s,o=t[h++])&&(~n(d,o)||d.push(o));return d}},function(e,t,o){var i=o(14),r=Math.max,n=Math.min;e.exports=function(e,t){var o=i(e);return o<0?r(o+t,0):n(o,t)}},function(e,t,o){var i=o(1),r=/#|\.prototype\./,n=function(e,t){var o=s[a(e)];return o==d||o!=h&&("function"==typeof t?i(t):!!t)},a=n.normalize=function(e){return String(e).replace(r,".").toLowerCase()},s=n.data={},h=n.NATIVE="N",d=n.POLYFILL="P";e.exports=n},function(e,t,o){var i=o(4),r=o(29),n=o(0)("species");e.exports=function(e,t){var o;return r(e)&&("function"!=typeof(o=e.constructor)||o!==Array&&!r(o.prototype)?i(o)&&null===(o=o[n])&&(o=void 0):o=void 0),new(void 0===o?Array:o)(0===t?0:t)}},function(e,t,o){var i=o(48);e.exports=function(e,t,o){if(i(e),void 0===t)return e;switch(o){case 0:return function(){return e.call(t)};case 1:return function(o){return e.call(t,o)};case 2:return function(o,i){return e.call(t,o,i)};case 3:return function(o,i,r){return e.call(t,o,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,o){var i=o(2),r=o(73),n=o(28),a=o(26),s=o(75),h=o(38),d=o(25)("IE_PROTO"),u=function(){},l=function(){var e,t=h("iframe"),o=n.length;for(t.style.display="none",s.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;o--;)delete l.prototype[n[o]];return l()};e.exports=Object.create||function(e,t){var o;return null!==e?(u.prototype=i(e),o=new u,u.prototype=null,o[d]=e):o=l(),void 0===t?o:r(o,t)},a[d]=!0},function(e,t,o){var i=o(12),r=o(0)("toStringTag"),n="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,o,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(o=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?o:n?i(t):"Object"==(a=i(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,o){var i=o(2),r=o(93);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,o={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(o,[]),t=o instanceof Array}catch(e){}return function(o,n){return i(o),r(n),t?e.call(o,n):o.__proto__=n,o}}():void 0)},function(e,t,o){var i=o(4),r=o(12),n=o(0)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==r(e))}},function(e,t,o){var i=o(14),r=o(9),n=function(e){return function(t,o){var n,a,s=String(r(t)),h=i(o),d=s.length;return h<0||h>=d?e?"":void 0:(n=s.charCodeAt(h))<55296||n>56319||h+1===d||(a=s.charCodeAt(h+1))<56320||a>57343?e?s.charAt(h):n:e?s.slice(h,h+2):a-56320+(n-55296<<10)+65536}};e.exports={codeAt:n(!1),charAt:n(!0)}},function(e,t,o){"use strict";var i,r,n,a=o(55),s=o(7),h=o(6),d=o(0),u=o(23),l=d("iterator"),c=!1;[].keys&&("next"in(n=[].keys())?(r=a(a(n)))!==Object.prototype&&(i=r):c=!0),null==i&&(i={}),u||h(i,l)||s(i,l,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:c}},function(e,t,o){var i=o(6),r=o(16),n=o(25),a=o(99),s=n("IE_PROTO"),h=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=r(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?h:null}},function(e,t,o){var i=o(10).f,r=o(6),n=o(0)("toStringTag");e.exports=function(e,t,o){e&&!r(e=o?e:e.prototype,n)&&i(e,n,{configurable:!0,value:t})}},function(e,t,o){"use strict";var i=o(53).charAt;e.exports=function(e,t,o){return t+(o?i(e,t).length:1)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(59),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(70),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(71),core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_from__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(76),core_js_modules_es_array_from__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_from__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(82),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(84),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(85),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_number_to_fixed__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(86),core_js_modules_es_number_to_fixed__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_number_to_fixed__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(89),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(91),core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(95),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(96),core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(100),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(101),core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(103),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_14__);window.BookReader=function($){function BookReader(e){e=e||{},e=jQuery.extend({},BookReader.defaultOptions,e,BookReader.optionOverrides),this.setup(e)}return-1!=location.toString().indexOf("_debugShowConsole=true")&&$((function(){var logEl=document.createElement("div");logEl.id="_debugLog",logEl.style.width="100%",logEl.style.height="300px",logEl.style.overflow="auto",$(document.body).prepend(logEl);var form=$('<form><input style="width:100%; font-family: monospace;" id="_debugLogInput"></form>');$(logEl).append(form),form.submit((function(ev){ev.preventDefault();var result=eval(form.find("input").val());logToScreen([result])}));var currentRun=0;function logToScreen(e){var t=Array.from(e).map(JSON.stringify).join(",");if(logEl.lastChild&&logEl.lastChild.lastChild.innerHTML==t)logEl.lastChild.firstChild.innerHTML="("+currentRun+++")";else{currentRun=1;var o=document.createElement("div");o.innerHTML="<code></code> <code>"+t+"</code>",logEl.appendChild(o)}}var _realLog=console.log.bind(console);console.log=function(){var e=Array.prototype.slice.call(arguments);_realLog.apply(console,e),logToScreen(e)},window.onerror=function(){logToScreen(Array.prototype.slice.call(arguments))}})),BookReader.version="4.5.1",BookReader.constMode1up=1,BookReader.constMode2up=2,BookReader.constModeThumb=3,BookReader.constNavAnimationDuration=300,BookReader.constResizeAnimationDuration=100,BookReader.eventNames={fragmentChange:"fragmentChange",PostInit:"PostInit",stop:"stop",resize:"resize",navToggled:"navToggled",fullscreenToggled:"fullscreenToggled",zoomOut:"zoomOut",zoomIn:"zoomIn","1PageViewSelected":"1PageViewSelected","2PageViewSelected":"2PageViewSelected","3PageViewSelected":"3PageViewSelected"},BookReader.defaultOptions={defaults:null,padding:10,ui:"full",uiAutoHide:!1,thumbRowBuffer:2,thumbColumns:6,thumbMaxLoading:4,thumbPadding:10,flipSpeed:"fast",showToolbar:!0,showNavbar:!0,navBarTitle:"",showLogo:!0,logoURL:"https://archive.org",imagesBaseURL:"/BookReader/images/",reductionFactors:[{reduce:.5,autofit:null},{reduce:1,autofit:null},{reduce:2,autofit:null},{reduce:3,autofit:null},{reduce:4,autofit:null},{reduce:6,autofit:null}],onePage:{autofit:"auto"},twoPage:{coverInternalPadding:0,coverExternalPadding:0,bookSpineDivWidth:64,autofit:"auto"},onePageMinBreakpoint:800,bookTitle:"",bookUrl:null,bookUrlText:null,bookUrlTitle:null,enableBookTitleLink:!0,bookLanguage:null,metadata:[],thumbnail:null,bookUrlMoreInfo:null,enableExperimentalControls:!1,el:"#BookReader",pageProgression:"lr",protected:!1,data:[],getNumLeafs:null,getPageWidth:null,getPageHeight:null,getPageURI:null,getPageSide:null,getSpreadIndices:null,getPageNum:null,getPageProp:null,leafNumToIndex:null,getEmbedCode:null},BookReader.optionOverrides={},BookReader.prototype.setup=function(e){this.options=e,this.constMode1up=BookReader.constMode1up,this.constMode2up=BookReader.constMode2up,this.constModeThumb=BookReader.constModeThumb,this.reduce=4,this.defaults=e.defaults,this.padding=e.padding,this.mode=null,this.prevReadMode=null,this.ui=e.ui,this.uiAutoHide=e.uiAutoHide,this.thumbWidth=100,this.thumbRowBuffer=e.thumbRowBuffer,this.thumbColumns=e.thumbColumns,this.thumbMaxLoading=e.thumbMaxLoading,this.thumbPadding=e.thumbPadding,this.displayedRows=[],this.displayedIndices=[],this.imgs={},this.prefetchedImgs={},this.animating=!1,this.flipSpeed=e.flipSpeed,this.flipDelay=e.flipDelay,this.twoPagePopUp=null,this.leafEdgeTmp=null,this.firstIndex=null,this.lastDisplayableIndex2up=null,this.isFullscreenActive=!1,this.lastScroll=null,this.showLogo=e.showLogo,this.logoURL=e.logoURL,this.imagesBaseURL=e.imagesBaseURL,this.reductionFactors=e.reductionFactors,this.onePage=e.onePage,this.twoPage=e.twoPage,this.onePageMinBreakpoint=e.onePageMinBreakpoint,this.bookTitle=e.bookTitle,this.bookUrl=e.bookUrl,this.bookUrlText=e.bookUrlText,this.bookUrlTitle=e.bookUrlTitle,this.titleLeaf=e.titleLeaf,this.metadata=e.metadata,this.thumbnail=e.thumbnail,this.bookUrlMoreInfo=e.bookUrlMoreInfo,this.enableExperimentalControls=e.enableExperimentalControls,this.el=e.el,this.pageProgression=e.pageProgression,this.protected=e.protected,this.getEmbedCode=e.getEmbedCode,this.popup=null,this.data=e.data,this.getNumLeafs=e.getNumLeafs||BookReader.prototype.getNumLeafs,this.getPageWidth=e.getPageWidth||BookReader.prototype.getPageWidth,this.getPageHeight=e.getPageHeight||BookReader.prototype.getPageHeight,this.getPageURI=e.getPageURI||BookReader.prototype.getPageURI,this.getPageSide=e.getPageSide||BookReader.prototype.getPageSide,this.getPageNum=e.getPageNum||BookReader.prototype.getPageNum,this.getPageProp=e.getPageProp||BookReader.prototype.getPageProp,this.getSpreadIndices=e.getSpreadIndices||BookReader.prototype.getSpreadIndices,this.leafNumToIndex=e.leafNumToIndex||BookReader.prototype.leafNumToIndex,this.refs={}},BookReader.util={disableSelect:function(e){e.bind("mousedown",(function(){return!1})),e[0].onselectstart=function(){return!1}},clamp:function(e,t,o){return Math.min(Math.max(e,t),o)},cssPercentage:function(e,t){return(e+0)/t*100+"%"},notInArray:function(e,t){return!(jQuery.inArray(e,t)>=0)},getIFrameDocument:function(e){var t=e.contentWindow||e.contentDocument;return t.document||t},escapeHTML:function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},decodeURIComponentPlus:function(e){return decodeURIComponent(e).replace(/\+/g," ")},encodeURIComponentPlus:function(e){return encodeURIComponent(e).replace(/%20/g,"+")},debounce:function(e,t,o){var i;return function(){var r=this,n=arguments,a=function(){i=null,o||e.apply(r,n)},s=o&&!i;clearTimeout(i),i=setTimeout(a,t),s&&e.apply(r,n)}},throttle:function(e,t,o){var i,r;return t||(t=250),o&&(i=+new Date),function(){var o=this,n=+new Date,a=arguments;i&&n<i+t?(clearTimeout(r),r=setTimeout((function(){i=n,e.apply(o,a)}),t)):(i=n,e.apply(o,a))}}},BookReader.prototype.extendParams=function(e,t){var o=$.extend({},t);if(void 0!==o.page){var i=this.parsePageString(o.page);isNaN(i)||(o.index=i),delete o.page}$.extend(e,o)},BookReader.prototype.initParams=function(){var e={};if(void 0!==this.titleLeaf&&this.getNumLeafs()>2?e.index=this.leafNumToIndex(this.titleLeaf):e.index=0,this.defaults&&this.extendParams(e,this.paramsFromFragment(this.defaults)),this.options.enablePageResume){var t=this.getResumeValue();null!==t&&(e.index=t)}if(this.options.enableUrlPlugin){var o=this.paramsFromFragment(this.urlReadFragment());o.mode&&(this.prevReadMode=o.mode),this.extendParams(e,o)}return e},BookReader.prototype.getInitialMode=function(e){var t,o=$(window).width();return t=void 0!==e.mode?e.mode:"full"==this.ui&&this.enableMobileNav&&this.isFullscreenActive&&o<=this.onePageMinBreakpoint?this.constMode1up:this.constMode2up,this.canSwitchToMode(t)||(t=this.constMode1up),t},BookReader.prototype.init=function(){this.pageScale=this.reduce;var e=this.initParams();this.firstIndex=e.index?e.index:0,this.isTouchDevice=!!("ontouchstart"in window)||!!("msmaxtouchpoints"in window.navigator),this.refs.$br=$(this.el).empty().removeClass().addClass("ui-"+this.ui).addClass("br-ui-"+this.ui).addClass("BookReader"),this.isTouchDevice?this.refs.$br.addClass("touch"):this.refs.$br.addClass("no-touch"),this.refs.$brContainer=$("<div class='BRcontainer' dir='ltr'></div>"),this.refs.$br.append(this.refs.$brContainer);var t=this.getInitialMode(e);this.mode=t,"embed"==this.ui&&this.options.showNavbar?this.initEmbedNavbar():(this.options.showToolbar&&this.initToolbar(this.mode,this.ui),this.options.showNavbar&&this.initNavbar()),this.resizeBRcontainer(),this.mode=null,this.switchMode(t),this.updateFromParams(e),this.initUIStrings(),this.isTouchDevice||this.setupTooltips(),this.bindNavigationHandlers(),this.setupKeyListeners(),this.lastScroll=(new Date).getTime(),this.refs.$brContainer.bind("scroll",this,(function(e){e.data.lastScroll=(new Date).getTime(),e.data.constMode2up!=e.data.mode&&e.data.drawLeafsThrottled()})),$(window).bind("resize",this,(function(e){e.data.resize()})),$(window).on("orientationchange",this,function(e){e.data.resize()}.bind(this)),this.protected&&($(document).on("contextmenu dragstart",".BRpagediv1up",(function(){return!1})),$(document).on("contextmenu dragstart",".BRpageimage",(function(){return!1})),$(document).on("contextmenu dragstart",".BRpagedivthumb",(function(){return!1})),this.$(".BRicon.share").hide()),this.trigger(BookReader.eventNames.PostInit),this.init.initComplete=!0},BookReader.prototype.trigger=function(e,t){$(document).trigger("BookReader:"+e,this,t)},BookReader.prototype.bind=function(e,t){$(document).bind("BookReader:"+e,t)},BookReader.prototype.unbind=function(e,t){$(document).bind("BookReader:"+e,t)},BookReader.prototype.resize=function(){if(this.init.initComplete){if(this.resizeBRcontainer(),this.constMode1up==this.mode)"none"!=this.onePage.autofit?(this.resizePageView1up(),this.centerPageView(),this.enableSearch&&this.updateSearchHilites()):(this.centerPageView(),this.displayedIndices=[],this.enableSearch&&this.updateSearchHilites(),this.drawLeafsThrottled());else if(this.constModeThumb==this.mode)this.prepareThumbnailView();else if(this.twoPage.autofit)this.prepareTwoPageView();else{var e=this.twoPageGetViewCenter(),t=!1;this.twoPage.totalWidth<this.refs.$brContainer.prop("clientWidth")&&(e.percentageX=.5,t=!0),this.twoPage.totalHeight<this.refs.$brContainer.prop("clientHeight")&&(e.percentageY=.5,t=!0),t&&this.twoPageCenterView(e.percentageX,e.percentageY)}this.trigger(BookReader.eventNames.resize)}},BookReader.prototype.setupKeyListeners=function(){var e=this;$(document).keydown((function(t){if(!e.keyboardNavigationIsDisabled(t))switch(t.keyCode){case 33:case 38:e.constMode2up==e.mode&&(t.preventDefault(),e.prev());break;case 40:case 34:e.constMode2up==e.mode&&(t.preventDefault(),e.next());break;case 35:t.preventDefault(),e.last();break;case 36:t.preventDefault(),e.first();break;case 37:e.constModeThumb!=e.mode&&(t.preventDefault(),e.left());break;case 39:e.constModeThumb!=e.mode&&(t.preventDefault(),e.right());break;case 173:case 109:t.preventDefault(),e.zoom(-1);break;case 61:case 107:t.preventDefault(),e.zoom(1)}}))},BookReader.prototype.setupTooltips=function(){this.$(".js-tooltip").each((function(e,t){var o={positions:["top","bottom"],shrinkToFit:!0,spikeGirth:0,spikeLength:8,fill:"transparent",cornerRadius:0,strokeWidth:0,cssStyles:{}},i=$(t);i.parents(".BRtoolbar").length?(o.positions=["bottom"],o.spikeLength=12):i.parents(".BRfooter").length&&(o.positions=["top"]),i.bt(o)}))},BookReader.prototype.drawLeafs=function(){this.constMode1up==this.mode?this.drawLeafsOnePage():this.constModeThumb==this.mode?this.drawLeafsThumbnail():this.drawLeafsTwoPage()},BookReader.prototype.bindGestures=function(e){var t=this,o=1;e.unbind("touchmove").bind("touchmove",(function(e){e.originalEvent.cancelable&&(o=e.originalEvent.touches.length),e.stopPropagation()})),e.unbind("gesturechange").bind("gesturechange",(function(e){e.preventDefault(),2!==o||(new Date).getTime()-t.lastScroll<500||(e.originalEvent.scale>1.5?t.zoom(1):e.originalEvent.scale<.6&&t.zoom(-1))}))},BookReader.prototype.setClickHandler2UP=function(e,t,o){$(e).unbind("mousedown").bind("mousedown",t,(function(e){o(this,e)}))},BookReader.prototype.drawLeafsOnePage=function(){var e,t,o,i=this.refs.$brContainer.height(),r=this.refs.$brPageViewEl.width(),n=this.refs.$brContainer.prop("scrollTop"),a=n+i,s=[],h=0,d=0;for(o=0;o<this.getNumLeafs();o++){d+=t=parseInt(this._getPageHeight(o)/this.reduce),(h>=n&&h<=a||d>=n&&d<=a||h<=n&&d>=a)&&s.push(o),h+=t+10,d+=10}var u=s[0];this.updateFirstIndex(u),0!=u&&1<this.reduce&&(u--,s.unshift(u));var l=s[s.length-1];this.getNumLeafs()-1!=l&&1<this.reduce&&s.push(l+1);var c=this.refs.$brPageViewEl.get(0);for(h=0,o=0;o<u;o++)h+=parseInt(this._getPageHeight(o)/this.reduce)+10;for(o=0;o<s.length;o++){if(e=s[o],t=parseInt(this._getPageHeight(e)/this.reduce),BookReader.util.notInArray(s[o],this.displayedIndices)){var p=parseInt(this._getPageWidth(e)/this.reduce),g=parseInt((r-p)/2),f=document.createElement("div");f.className="BRpagediv1up pagediv"+e,f.style.position="absolute",f.style.top=h+"px",f.style.left=g+"px",f.style.width=p+"px",f.style.height=t+"px",c.appendChild(f);var m=document.createElement("img");m.src=this._getPageURI(e,this.reduce,0),m.className="BRnoselect BRonePageImage",m.style.width=p+"px",m.style.height=t+"px",f.appendChild(m)}h+=t+10}for(o=0;o<this.displayedIndices.length;o++)BookReader.util.notInArray(this.displayedIndices[o],s)&&(e=this.displayedIndices[o],this.$(".pagediv"+e).remove());this.displayedIndices=s.slice(),this.enableSearch&&this.updateSearchHilites(),this.updateToolbarZoom(this.reduce),this.updateNavIndexThrottled()},BookReader.prototype.drawLeafsThumbnail=function(e){var t,o,i,r,n=this.refs.$brContainer.prop("scrollWidth")-20,a=0,s=0,h=0,d=0,u=0,l=[],c=this;for(t=0;t<this.getNumLeafs();t++)a+((o=this.thumbWidth)+this.thumbPadding)>n&&(d++,a=0,u=0),void 0===l[d]&&(l[d]={}),void 0===l[d].leafs&&(l[d].leafs=[],l[d].height=0,l[d].top=0),l[d].leafs[u]={},l[d].leafs[u].num=t,l[d].leafs[u].left=a,(i=parseInt(this.getPageHeight(l[d].leafs[u].num)*this.thumbWidth/this.getPageWidth(l[d].leafs[u].num),10))>l[d].height&&(l[d].height=i),0===u&&(s+=this.thumbPadding+l[d].height),(a+=o+this.thumbPadding)>h&&(h=a),u++,t==e&&(r=s-this.thumbPadding-l[d].height);this.refs.$brPageViewEl.height(s);var p=Math.floor((this.refs.$brContainer.prop("scrollWidth")-h)/2)-14;void 0!==r&&this.refs.$brContainer.scrollTop(r);var g=this.refs.$brContainer.prop("scrollTop"),f=g+this.refs.$brContainer.height(),m=0,v=0,_=[],b=this.getNumLeafs()-1,P=0;for(t=0;t<l.length;t++){v+=this.thumbPadding+l[t].height,(m>=g&&m<=f||v>=g&&v<=f||m<=g&&v>=f)&&(_.push(t),l[t].leafs[0].num<b&&(b=l[t].leafs[0].num),l[t].leafs[l[t].leafs.length-1].num>P&&(P=l[t].leafs[l[t].leafs.length-1].num)),m>l[t].top&&(l[t].top=m),m=v}var w,R,B,x,y,k,I,T,E,C=_[0],M=_[_.length-1];for(t=1;t<this.thumbRowBuffer+1;t++)M+t<l.length&&_.push(M+t);for(t=1;t<this.thumbRowBuffer+1;t++)C-t>=0&&_.push(C-t);for(t=0;t<_.length;t++)if(BookReader.util.notInArray(_[t],this.displayedRows))for(R=_[t],w=0;w<l[R].leafs.length;w++){x=w,T=l[R].leafs[w].num,o=this.thumbWidth,i=parseInt(this.getPageHeight(T)*this.thumbWidth/this.getPageWidth(T),10),m=l[R].top,B=l[R].leafs[x].left+p,"rl"==this.pageProgression&&(B=n-o-B),(y=document.createElement("div")).style.position="absolute",y.className="BRpagedivthumb pagediv"+T,B+=this.thumbPadding,y.style.top=m+"px",y.style.left=B+"px",y.style.width=o+"px",y.style.height=i+"px",k=document.createElement("a"),$(k).data("leaf",T),k.addEventListener("mouseup",(function(e){c.updateFirstIndex($(this).data("leaf"),{suppressFragmentChange:!0}),c.prevReadMode===c.constMode1up||c.prevReadMode===c.constMode2up?c.switchMode(c.prevReadMode,{suppressFragmentChange:!0}):c.switchMode(c.constMode1up,{suppressFragmentChange:!0}),c.trigger(BookReader.eventNames.fragmentChange),e.preventDefault(),e.stopPropagation()}),!0),$(y).append(k),this.refs.$brPageViewEl.append(y),I=document.createElement("img");var L=Math.floor(this.getPageWidth(T)/this.thumbWidth);$(I).attr("src",this.imagesBaseURL+"transparent.png").css({width:o+"px",height:i+"px"}).addClass("BRlazyload").data("srcURL",this._getPageURI(T,L)),$(k).append(I)}for(t=0;t<this.displayedRows.length;t++)if(BookReader.util.notInArray(this.displayedRows[t],_))for(R=this.displayedRows[t],E=0;E<l[R].leafs.length;E++)x=l[R].leafs[E].num,this.$(".pagediv"+x).remove();var S=this.currentIndex();S<b?this.updateFirstIndex(b):S>P&&this.updateFirstIndex(P),this.displayedRows=_.slice(),this.$(".BRpagedivthumb_highlight").removeClass("BRpagedivthumb_highlight"),this.$(".pagediv"+this.currentIndex()).addClass("BRpagedivthumb_highlight"),this.lazyLoadThumbnails(),this.updateToolbarZoom(this.reduce)},BookReader.prototype.lazyLoadThumbnails=function(){this.$(".BRlazyloading").filter("[complete=true]").removeClass("BRlazyloading");var e=this.$(".BRlazyloading").length,t=this.thumbMaxLoading-e,o=this;t>0&&this.refs.$brPageViewEl.find("img.BRlazyload").filter(":lt("+t+")").each((function(){o.lazyLoadImage(this)}))},BookReader.prototype.lazyLoadImage=function(e){var t=new Image,o=this;$(t).addClass("BRlazyloading").one("load",(function(){$(this).removeClass("BRlazyloading"),setTimeout((function(){o.lazyLoadThumbnails()}),100)})).one("error",(function(){$(this).removeClass("BRlazyloading")})).css({width:$(e).width()+"px",height:$(e).height()+"px"}).attr({width:$(e).width(),height:$(e).height(),src:$(e).data("srcURL")}),$(e).before(t).remove(),t=null},BookReader.prototype.drawLeafsTwoPage=function(){var e=this.refs.$brTwoPageView,t=this.twoPage.currentIndexL,o=this.twoPageTop();this.twoPage.scaledWL=this.getPageWidth2UP(t),this.twoPage.gutter=this.twoPageGutter(),this.prefetchImg(t),$(this.prefetchedImgs[t]).css({position:"absolute",left:this.twoPage.gutter-this.twoPage.scaledWL+"px",right:"",top:o+"px",height:this.twoPage.height+"px",width:this.twoPage.scaledWL+"px",zIndex:2}).appendTo(e);var i=this.twoPage.currentIndexR;this.twoPage.scaledWR=this.getPageWidth2UP(i),this.prefetchImg(i),$(this.prefetchedImgs[i]).css({position:"absolute",left:this.twoPage.gutter+"px",right:"",top:o+"px",height:this.twoPage.height+"px",width:this.twoPage.scaledWR+"px",zIndex:2}).appendTo(e),this.displayedIndices=[this.twoPage.currentIndexL,this.twoPage.currentIndexR],this.setMouseHandlers2UP(),this.updateToolbarZoom(this.reduce)},BookReader.prototype.drawLeafsThrottled=BookReader.util.throttle(BookReader.prototype.drawLeafs,250),BookReader.prototype.zoom=function(e){switch(this.mode){case this.constMode1up:1==e?this.zoom1up("in"):this.zoom1up("out");break;case this.constMode2up:1==e?this.zoom2up("in"):this.zoom2up("out");break;case this.constModeThumb:this.zoomThumb(e)}},BookReader.prototype.zoom1up=function(e){if(this.constMode2up!=this.mode){var t=this.nextReduce(this.reduce,e,this.onePage.reductionFactors);this.reduce!=t.reduce&&(this.reduce=t.reduce,this.onePage.autofit=t.autofit,this.pageScale=this.reduce,this.resizePageView1up(),this.updateToolbarZoom(this.reduce),this.enableSearch&&this.removeSearchHilites(),this.enableSearch&&this.updateSearchHilites())}else this.switchMode(this.constMode1up)},BookReader.prototype.resizeBRcontainer=function(e){e?this.refs.$brContainer.animate({top:this.getToolBarHeight(),bottom:this.getFooterHeight()},this.constResizeAnimationDuration,"linear"):this.refs.$brContainer.css({top:this.getToolBarHeight(),bottom:this.getFooterHeight()})},BookReader.prototype.resizePageView1up=function(){var e=this.refs.$brContainer.prop("clientWidth"),t=this.refs.$brContainer.prop("scrollTop"),o=this.refs.$brPageViewEl.height(),i=this.refs.$brPageViewEl.width(),r=0;if(t>0){var n=this.centerY1up(),a=this.centerX1up();r=n/o}else{var s=this.getPageHeight(this.currentIndex())/this.reduce*.6;r=(this.onePageGetPageTop(this.currentIndex())+s)/this.onePageCalculateViewDimensions(this.reduce,this.padding).height}if(this.onePageCalculateReductionFactors(),this.onePage.autofit){var h=this.nextReduce(this.reduce,this.onePage.autofit,this.onePage.reductionFactors);this.reduce=h.reduce}var d=this.onePageCalculateViewDimensions(this.reduce,this.padding);this.refs.$brPageViewEl.height(d.height),this.refs.$brPageViewEl.width(d.width);var u=r*d.height,l=Math.max(0,Math.floor(u-this.refs.$brContainer.height()/2));this.refs.$brContainer.prop("scrollTop",l);var c=a*(e/i)-this.refs.$brContainer.prop("clientWidth")/2;c=Math.max(c,0),this.refs.$brContainer.prop("scrollLeft",c),this.refs.$brPageViewEl.empty(),this.displayedIndices=[],this.drawLeafs(),this.enableSearch&&(this.removeSearchHilites(),this.updateSearchHilites())},BookReader.prototype.onePageCalculateViewDimensions=function(e,t){for(var o=0,i=0,r=0;r<this.getNumLeafs();r++){i+=parseInt(this._getPageHeight(r)/e)+t;var n=parseInt(this._getPageWidth(r)/e);n>o&&(o=n)}return{width:o,height:i}},BookReader.prototype.centerX1up=function(){var e;return e=this.refs.$brPageViewEl.width()<this.refs.$brContainer.prop("clientWidth")?this.refs.$brPageViewEl.width():this.refs.$brContainer.prop("scrollLeft")+this.refs.$brContainer.prop("clientWidth")/2,e=Math.floor(e)},BookReader.prototype.centerY1up=function(){var e=this.refs.$brContainer.prop("scrollTop")+this.refs.$brContainer.height()/2;return Math.floor(e)},BookReader.prototype.centerPageView=function(){var e=this.refs.$brContainer.prop("scrollWidth"),t=this.refs.$brContainer.prop("clientWidth");e>t&&this.refs.$brContainer.prop("scrollLeft",(e-t)/2)},BookReader.prototype.zoom2up=function(e){this.stopFlipAnimations(),this.twoPageCalculateReductionFactors();var t=this.nextReduce(this.reduce,e,this.twoPage.reductionFactors);if(this.reduce!=t.reduce||this.twoPage.autofit!=t.autofit){this.twoPage.autofit=t.autofit,this.reduce=t.reduce,this.pageScale=this.reduce;var o=this.twoPageGetViewCenter();if(1==e)for(var i in this.prefetchedImgs)delete this.prefetchedImgs[i];this.prepareTwoPageView(o.percentageX,o.percentageY)}},BookReader.prototype.zoomThumb=function(e){var t=this.thumbColumns;switch(e){case-1:this.thumbColumns+=1;break;case 1:this.thumbColumns-=1}this.thumbColumns<2?this.thumbColumns=2:this.thumbColumns>8&&(this.thumbColumns=8),this.thumbColumns!=t&&this.prepareThumbnailView()},BookReader.prototype.getThumbnailWidth=function(e){var t=(e+1)*this.thumbPadding,o=(this.refs.$brPageViewEl.width()-t)/(e+.5);return parseInt(o)},BookReader.prototype.quantizeReduce=function(e,t){for(var o,i=t[0].reduce,r=Math.abs(e-i),n=1;n<t.length;n++)(o=Math.abs(e-t[n].reduce))<r&&(r=o,i=t[n].reduce);return i},BookReader.prototype.nextReduce=function(e,t,o){var i,r;if("in"===t){for(r=0,i=1;i<o.length;i++)o[i].reduce<e&&(r=i);return o[r]}if("out"===t){var n=o.length-1;for(r=n,i=n;i>=0;i--)o[i].reduce>e&&(r=i);return o[r]}if("auto"===t){var a=null;for(i=0;i<o.length;i++)"height"!==o[i].autofit&&"width"!==o[i].autofit||(null===a||a.reduce<o[i].reduce)&&(a=o[i]);if(a)return a}else if("height"===t||"width"===t)for(i=0;i<o.length;i++)if(o[i].autofit===t)return o[i];return alert("Could not find reduction factor for direction "+t),o[0]},BookReader.prototype._reduceSort=function(e,t){return e.reduce-t.reduce},BookReader.prototype.jumpToPage=function(e){var t=this.parsePageString(e);return void 0!==t&&(this.jumpToIndex(t),!0)},BookReader.prototype.jumpToIndex=function(e,t,o,i){var r=this,n=this.currentIndex(),a=0,s=0,h=0;if(this.trigger(BookReader.eventNames.stop),this.constMode2up==this.mode)e<Math.min(this.twoPage.currentIndexL,this.twoPage.currentIndexR)?this.flipBackToIndex(e):e>Math.max(this.twoPage.currentIndexL,this.twoPage.currentIndexR)&&this.flipFwdToIndex(e);else if(this.constModeThumb==this.mode){var d,u=this.refs.$brContainer.prop("scrollWidth")-20,l=0,c=0,p=0,g=0,f=0,m=0;for(d=0;d<e+1;d++)p+((l=this.thumbWidth)+this.thumbPadding)>u&&(p=0,f=0,m=0),(c=parseInt(this.getPageHeight(m)*this.thumbWidth/this.getPageWidth(m),10))>f&&(f=c),0==m&&(s=g),0==m&&(g+=this.thumbPadding+f),p+=l+this.thumbPadding,m++;this.updateFirstIndex(e),this.refs.$brContainer.prop("scrollTop")==s?this.drawLeafs():(this.animating=!0,this.refs.$brContainer.stop(!0).animate({scrollTop:s},"fast",(function(){r.animating=!1})))}else s=this.onePageGetPageTop(e),o?(a=parseInt(o/this.reduce),s+=a-=this.refs.$brContainer.prop("clientHeight")>>1):s-=this.padding/2,t?(a=parseInt(t/this.reduce),h+=a-=this.refs.$brContainer.prop("clientWidth")>>1):h=this.refs.$brContainer.scrollLeft(),!i&&Math.abs(n-e)<=4?(this.animating=!0,this.refs.$brContainer.stop(!0).animate({scrollTop:s,scrollLeft:h},"fast",(function(){r.animating=!1}))):this.refs.$brContainer.stop(!0).prop("scrollTop",s)},BookReader.prototype.switchMode=function(e,t){if(e!==this.mode&&this.canSwitchToMode(e)){this.trigger(BookReader.eventNames.stop),this.enableSearch&&this.removeSearchHilites(),this.mode!==this.constMode1up&&this.mode!==this.constMode2up||(this.prevReadMode=this.mode),this.mode=e,this.pageScale!==this.reduce&&(this.reduce=this.pageScale),this.constMode1up==e?(this.onePageCalculateReductionFactors(),this.reduce=this.quantizeReduce(this.reduce,this.onePage.reductionFactors),this.prepareOnePageView()):this.constModeThumb==e?(this.reduce=this.quantizeReduce(this.reduce,this.reductionFactors),this.prepareThumbnailView()):(this.twoPageCalculateReductionFactors(),this.reduce=this.quantizeReduce(this.reduce,this.twoPage.reductionFactors),this.prepareTwoPageView(),this.twoPageCenterView(.5,.5)),t&&!1!==t.suppressFragmentChange||this.trigger(BookReader.eventNames.fragmentChange);var o=e+"PageViewSelected";this.trigger(BookReader.eventNames[o])}},BookReader.prototype.updateBrClasses=function(){var e={};e[this.constMode1up]="BRmode1up",e[this.constMode2up]="BRmode2up",e[this.constModeThumb]="BRmodeThumb",this.refs.$br.removeClass("BRmode1up BRmode2up BRmodeThumb").addClass(e[this.mode]),this.isFullscreen()?(this.refs.$br.addClass("fullscreenActive"),$(document.body).addClass("BRfullscreenActive")):(this.refs.$br.removeClass("fullscreenActive"),$(document.body).removeClass("BRfullscreenActive"))},BookReader.prototype.isFullscreen=function(){return this.isFullscreenActive},BookReader.prototype.toggleFullscreen=function(){this.isFullscreen()?this.exitFullScreen():this.enterFullscreen(),this.trigger("fullscreenToggled")},BookReader.prototype.enterFullscreen=function(){this.refs.$brContainer.css("opacity",0),$(window).width()<=this.onePageMinBreakpoint&&this.switchMode(this.constMode1up),this.isFullscreenActive=!0,this.updateBrClasses(),this.resize(),this.jumpToIndex(this.currentIndex()),this.refs.$brContainer.animate({opacity:1},400,"linear"),this._fullscreenCloseHandler=function(e){27===e.keyCode&&this.toggleFullscreen()}.bind(this),$(document).keyup(this._fullscreenCloseHandler)},BookReader.prototype.exitFullScreen=function(){this.refs.$brContainer.css("opacity",0),$(document).unbind("keyup",this._fullscreenCloseHandler),$(window).width()<=this.onePageMinBreakpoint&&this.switchMode(this.constMode2up),this.isFullscreenActive=!1,this.updateBrClasses(),this.resize(),this.refs.$brContainer.animate({opacity:1},400,"linear")},BookReader.prototype.prepareOnePageView=function(){var e=this.currentIndex();this.refs.$brContainer.empty(),this.refs.$brContainer.css({overflowY:"scroll",overflowX:"auto"}),this.refs.$brPageViewEl=$("<div class='BRpageview'></div>"),this.refs.$brContainer.append(this.refs.$brPageViewEl),this.refs.$brContainer.dragscrollable(),this.bindGestures(this.refs.$brContainer),this.resizePageView1up(),this.jumpToIndex(e),this.updateBrClasses()},BookReader.prototype.prepareThumbnailView=function(){this.refs.$brContainer.empty(),this.refs.$brContainer.css({overflowY:"scroll",overflowX:"auto"}),this.refs.$brPageViewEl=$("<div class='BRpageview'></div>"),this.refs.$brContainer.append(this.refs.$brPageViewEl),this.refs.$brContainer.dragscrollable({preventDefault:!0}),this.bindGestures(this.refs.$brContainer),this.thumbWidth=this.getThumbnailWidth(this.thumbColumns),this.reduce=this.getPageWidth(0)/this.thumbWidth,this.displayedRows=[],this.drawLeafsThumbnail(this.currentIndex()),this.updateBrClasses()},BookReader.prototype.prepareTwoPageView=function(e,t){this.refs.$brContainer.empty(),this.refs.$brContainer.css("overflow","auto");var o=this.firstIndex;o<this.firstDisplayableIndex()&&(o=this.firstDisplayableIndex()),o>this.lastDisplayableIndex()&&(o=this.lastDisplayableIndex());var i=this.getSpreadIndices(o);this.twoPage.currentIndexL=i[0],this.twoPage.currentIndexR=i[1],this.calculateSpreadSize(),this.pruneUnusedImgs(),this.prefetch();var r=$('<div class="BRtwopageview"></div>');this.refs.$brTwoPageView=r,this.refs.$brContainer.append(r),this.refs.$brContainer.dragscrollable({preventDefault:!0}),this.bindGestures(this.refs.$brContainer),this.refs.$brTwoPageView.css({height:this.twoPage.totalHeight+"px",width:this.twoPage.totalWidth+"px",position:"absolute"}),this.twoPage.totalWidth<this.refs.$brContainer.prop("clientWidth")&&(e=.5),this.twoPage.totalHeight<this.refs.$brContainer.prop("clientHeight")&&(t=.5),this.twoPageCenterView(e,t),this.twoPage.coverDiv=document.createElement("div"),$(this.twoPage.coverDiv).attr("class","BRbookcover").css({width:this.twoPage.bookCoverDivWidth+"px",height:this.twoPage.bookCoverDivHeight+"px",visibility:"visible"}).appendTo(this.refs.$brTwoPageView),this.leafEdgeR=document.createElement("div"),this.leafEdgeR.className="BRleafEdgeR",$(this.leafEdgeR).css({width:this.twoPage.leafEdgeWidthR+"px",height:this.twoPage.height+"px",left:this.twoPage.gutter+this.twoPage.scaledWR+"px",top:this.twoPage.bookCoverDivTop+this.twoPage.coverInternalPadding+"px",border:0===this.twoPage.leafEdgeWidthR?"none":null}).appendTo(this.refs.$brTwoPageView),this.leafEdgeL=document.createElement("div"),this.leafEdgeL.className="BRleafEdgeL",$(this.leafEdgeL).css({width:this.twoPage.leafEdgeWidthL+"px",height:this.twoPage.height+"px",left:this.twoPage.bookCoverDivLeft+this.twoPage.coverInternalPadding+"px",top:this.twoPage.bookCoverDivTop+this.twoPage.coverInternalPadding+"px",border:0===this.twoPage.leafEdgeWidthL?"none":null}).appendTo(this.refs.$brTwoPageView);var n=document.createElement("div");$(n).attr("class","BRgutter").css({width:this.twoPage.bookSpineDivWidth+"px",height:this.twoPage.bookSpineDivHeight+"px",left:this.twoPage.gutter-.5*this.twoPage.bookSpineDivWidth+"px",top:this.twoPage.bookSpineDivTop+"px"}).appendTo(this.refs.$brTwoPageView),this.prepareTwoPagePopUp(),this.displayedIndices=[],this.drawLeafsTwoPage(),this.updateToolbarZoom(this.reduce),this.prefetch(),this.enableSearch&&(this.removeSearchHilites(),this.updateSearchHilites()),this.updateBrClasses()},BookReader.prototype.prepareTwoPagePopUp=function(){this.twoPagePopUp=document.createElement("div"),this.twoPagePopUp.className="BRtwoPagePopUp",$(this.twoPagePopUp).css({zIndex:"1000"}).appendTo(this.refs.$brContainer),$(this.twoPagePopUp).hide(),$(this.leafEdgeL).add(this.leafEdgeR).bind("mouseenter",this,(function(e){$(e.data.twoPagePopUp).show()})),$(this.leafEdgeL).add(this.leafEdgeR).bind("mouseleave",this,(function(e){$(e.data.twoPagePopUp).hide()})),$(this.leafEdgeL).bind("click",this,(function(e){e.data.trigger(BookReader.eventNames.stop);var t=e.data.jumpIndexForLeftEdgePageX(e.pageX);e.data.jumpToIndex(t)})),$(this.leafEdgeR).bind("click",this,(function(e){e.data.trigger(BookReader.eventNames.stop);var t=e.data.jumpIndexForRightEdgePageX(e.pageX);e.data.jumpToIndex(t)})),$(this.leafEdgeR).bind("mousemove",this,(function(e){var t=e.data.jumpIndexForRightEdgePageX(e.pageX);$(e.data.twoPagePopUp).text("View "+e.data.getPageName(BookReader.util.clamp(t,0,e.data.getNumLeafs()-1))),$(e.data.twoPagePopUp).css({left:e.pageX-e.data.refs.$brContainer.offset().left+e.data.refs.$brContainer.scrollLeft()-120+"px",top:e.pageY-e.data.refs.$brContainer.offset().top+e.data.refs.$brContainer.scrollTop()+"px"})})),$(this.leafEdgeL).bind("mousemove",this,(function(e){var t=e.data.jumpIndexForLeftEdgePageX(e.pageX);$(e.data.twoPagePopUp).text("View "+e.data.getPageName(BookReader.util.clamp(t,0,e.data.getNumLeafs()-1))),$(e.data.twoPagePopUp).css({left:e.pageX-e.data.refs.$brContainer.offset().left+e.data.refs.$brContainer.scrollLeft()-$(e.data.twoPagePopUp).width()+120+"px",top:e.pageY-e.data.refs.$brContainer.offset().top+e.data.refs.$brContainer.scrollTop()+"px"})}))},BookReader.prototype.calculateSpreadSize=function(){var e,t=this.twoPage.currentIndexL,o=this.twoPage.currentIndexR;e=this.twoPage.autofit?this.getIdealSpreadSize(t,o):this.getSpreadSizeFromReduce(t,o,this.reduce),this.twoPage.height=e.height,this.twoPage.width=e.width,this.twoPage.scaledWL=this.getPageWidth2UP(t),this.twoPage.scaledWR=this.getPageWidth2UP(o),this.twoPage.edgeWidth=e.totalLeafEdgeWidth,this.twoPage.leafEdgeWidthL=this.leafEdgeWidth(this.twoPage.currentIndexL),this.twoPage.leafEdgeWidthR=this.twoPage.edgeWidth-this.twoPage.leafEdgeWidthL,this.twoPage.bookCoverDivWidth=this.twoPageCoverWidth(this.twoPage.scaledWL+this.twoPage.scaledWR),this.twoPage.bookCoverDivHeight=this.twoPage.height+2*this.twoPage.coverInternalPadding;var i=this.gutterOffsetForIndex(t),r=this.twoPage.scaledWL-i+this.twoPage.leafEdgeWidthL,n=this.twoPage.scaledWR+i+this.twoPage.leafEdgeWidthR,a=Math.max(r,n);this.twoPage.totalWidth=2*(a+this.twoPage.coverInternalPadding+this.twoPage.coverExternalPadding),this.twoPage.totalHeight=this.twoPage.height+2*(this.twoPage.coverInternalPadding+this.twoPage.coverExternalPadding),this.twoPage.middle=this.twoPage.totalWidth>>1,this.twoPage.gutter=this.twoPage.middle+this.gutterOffsetForIndex(t),this.twoPage.bookCoverDivLeft=this.twoPage.gutter-this.twoPage.scaledWL-this.twoPage.leafEdgeWidthL-this.twoPage.coverInternalPadding,this.twoPage.bookCoverDivTop=this.twoPage.coverExternalPadding,this.twoPage.bookSpineDivHeight=this.twoPage.height+2*this.twoPage.coverInternalPadding,this.twoPage.bookSpineDivLeft=this.twoPage.middle-(this.twoPage.bookSpineDivWidth>>1),this.twoPage.bookSpineDivTop=this.twoPage.bookCoverDivTop,this.reduce=e.reduce},BookReader.prototype.getIdealSpreadSize=function(e,t){var o,i={},r=this._getPageHeight(e),n=this._getPageWidth(e),a=this._getPageHeight(t),s=r/n,h=a/this._getPageWidth(t);o=Math.abs(s-1.5)<Math.abs(h-1.5)?s:h;var d=parseInt(.1*this.getNumLeafs()),u=parseInt(.1*this.refs.$brContainer.prop("clientWidth"));i.totalLeafEdgeWidth=Math.min(d,u);var l=2*(this.twoPage.coverInternalPadding+this.twoPage.coverExternalPadding)+i.totalLeafEdgeWidth,c=2*(this.twoPage.coverInternalPadding+this.twoPage.coverExternalPadding);return i.width=this.refs.$brContainer.width()-l>>1,i.width-=10,i.height=this.refs.$brContainer.height()-c,i.height-=15,i.height/o<=i.width?i.width=parseInt(i.height/o):i.height=parseInt(i.width*o),i.reduce=(r+a)/2/i.height,i},BookReader.prototype.getSpreadSizeFromReduce=function(e,t,o){var i={},r=parseInt(.1*this.getNumLeafs()),n=parseInt(.1*this.refs.$brContainer.prop("clientWidth"));i.totalLeafEdgeWidth=Math.min(r,n);var a=this._getPageWidth(e)+this._getPageWidth(t),s=this._getPageHeight(e)+this._getPageHeight(t);return i.height=parseInt(s/2/this.reduce),i.width=parseInt(a/2/this.reduce),i.reduce=o,i},BookReader.prototype.twoPageGetAutofitReduce=function(){return this.getIdealSpreadSize(this.twoPage.currentIndexL,this.twoPage.currentIndexR).reduce},BookReader.prototype.twoPageIsZoomedIn=function(){var e=!1;return"auto"!=this.twoPage.autofit&&this.reduce<this.twoPageGetAutofitReduce()&&(e=!0),e},BookReader.prototype.onePageGetAutofitWidth=function(){return(this.getMedianPageSize().width+0)/(this.refs.$brContainer.prop("clientWidth")-40)},BookReader.prototype.onePageGetAutofitHeight=function(){var e=this.refs.$brContainer.innerHeight();return(this.getMedianPageSize().height+0)/(e-2*this.padding)},BookReader.prototype.onePageGetPageTop=function(e){var t,o=0;for(t=0;t<e;t++)o+=parseInt(this._getPageHeight(t)/this.reduce)+this.padding;return o},BookReader.prototype.getMedianPageSize=function(){if(this._medianPageSize)return this._medianPageSize;for(var e=[],t=[],o=0;o<this.getNumLeafs();o++)e.push(this.getPageWidth(o)),t.push(this.getPageHeight(o));return e.sort(),t.sort(),this._medianPageSize={width:e[parseInt(e.length/2)],height:t[parseInt(t.length/2)]},this._medianPageSize},BookReader.prototype.onePageCalculateReductionFactors=function(){this.onePage.reductionFactors=this.reductionFactors.concat([{reduce:this.onePageGetAutofitWidth(),autofit:"width"},{reduce:this.onePageGetAutofitHeight(),autofit:"height"}]),this.onePage.reductionFactors.sort(this._reduceSort)},BookReader.prototype.twoPageCalculateReductionFactors=function(){this.twoPage.reductionFactors=this.reductionFactors.concat([{reduce:this.getIdealSpreadSize(this.twoPage.currentIndexL,this.twoPage.currentIndexR).reduce,autofit:"auto"}]),this.twoPage.reductionFactors.sort(this._reduceSort)},BookReader.prototype.twoPageSetCursor=function(){var e=this.refs.$brTwoPageView;e.width()>this.refs.$brContainer.prop("clientWidth")||e.height()>this.refs.$brContainer.prop("clientHeight")?(this.prefetchedImgs[this.twoPage.currentIndexL]&&(this.prefetchedImgs[this.twoPage.currentIndexL].style.cursor="move"),this.prefetchedImgs[this.twoPage.currentIndexR]&&(this.prefetchedImgs[this.twoPage.currentIndexR].style.cursor="move")):(this.prefetchedImgs[this.twoPage.currentIndexL]&&(this.prefetchedImgs[this.twoPage.currentIndexL].style.cursor=""),this.prefetchedImgs[this.twoPage.currentIndexR]&&(this.prefetchedImgs[this.twoPage.currentIndexR].style.cursor=""))},BookReader.prototype.currentIndex=function(){if(this.mode==this.constMode1up||this.mode==this.constModeThumb)return this.firstIndex;if(this.mode==this.constMode2up)return BookReader.util.clamp(this.firstIndex,0,this.getNumLeafs()-1);throw"currentIndex called for unimplemented mode "+this.mode},BookReader.prototype.updateFirstIndex=function(e,t){this.firstIndex=e,t&&!1!==t.suppressFragmentChange||this.trigger(BookReader.eventNames.fragmentChange),this.updateNavIndexThrottled(e)},BookReader.prototype.right=function(){"rl"!=this.pageProgression?this.next():this.prev()},BookReader.prototype.rightmost=function(){"rl"!=this.pageProgression?this.last():this.first()},BookReader.prototype.left=function(){"rl"!=this.pageProgression?this.prev():this.next()},BookReader.prototype.leftmost=function(){"rl"!=this.pageProgression?this.first():this.last()},BookReader.prototype.next=function(){this.constMode2up==this.mode?(this.trigger(BookReader.eventNames.stop),this.flipFwdToIndex(null)):this.firstIndex<this.lastDisplayableIndex()&&this.jumpToIndex(this.firstIndex+1)},BookReader.prototype.prev=function(){this.constMode2up==this.mode?(this.trigger(BookReader.eventNames.stop),this.flipBackToIndex(null)):this.firstIndex>=1&&this.jumpToIndex(this.firstIndex-1)},BookReader.prototype.first=function(){this.jumpToIndex(this.firstDisplayableIndex())},BookReader.prototype.last=function(){this.jumpToIndex(this.lastDisplayableIndex())},BookReader.prototype.scrollDown=function(){return $.inArray(this.mode,[this.constMode1up,this.constModeThumb])>=0&&(this.mode==this.constMode1up&&this.reduce>=this.onePageGetAutofitHeight()?this.next():(this.refs.$brContainer.stop(!0).animate({scrollTop:"+="+this._scrollAmount()+"px"},400,"easeInOutExpo"),!0))},BookReader.prototype.scrollUp=function(){return $.inArray(this.mode,[this.constMode1up,this.constModeThumb])>=0&&(this.mode==this.constMode1up&&this.reduce>=this.onePageGetAutofitHeight()?this.prev():(this.refs.$brContainer.stop(!0).animate({scrollTop:"-="+this._scrollAmount()+"px"},400,"easeInOutExpo"),!0))},BookReader.prototype._scrollAmount=function(){return this.constMode1up==this.mode?parseInt(this.refs.$brContainer.prop("clientHeight")-this.getPageHeight(this.currentIndex())/this.reduce*.03):parseInt(.9*this.refs.$brContainer.prop("clientHeight"))},BookReader.prototype.flipBackToIndex=function(e){if(this.constMode1up!=this.mode){var t=this.twoPage.currentIndexL;if(!this.animating)if(null==this.leafEdgeTmp){null==e&&(e=t-2),this.updateNavIndexThrottled(e);var o=this.getSpreadIndices(e);if(!(o[0]<this.firstDisplayableIndex()||o[1]<this.firstDisplayableIndex()))if(this.animating=!0,"rl"!=this.pageProgression)this.prepareFlipLeftToRight(o[0],o[1]),this.flipLeftToRight(o[0],o[1]);else{var i=this.prepareFlipRightToLeft(o[0],o[1]);this.flipRightToLeft(o[0],o[1],i)}}else alert("error: leafEdgeTmp should be null!")}},BookReader.prototype.flipLeftToRight=function(e,t){var o=this.twoPage.currentIndexL,i=this.leafEdgeWidth(this.twoPage.currentIndexL),r=this.leafEdgeWidth(e),n=i-r,a=this.getPageWidth2UP(o),s=this.getPageWidth2UP(e),h=this.getPageWidth2UP(t),d=this.twoPageTop(),u=this.twoPage.middle+this.gutterOffsetForIndex(e),l=this.refs.$brTwoPageView,c=u-a-n;this.leafEdgeTmp=document.createElement("div"),this.leafEdgeTmp.className="BRleafEdgeTmp",$(this.leafEdgeTmp).css({width:n+"px",height:this.twoPage.height+"px",left:c+"px",top:d+"px",zIndex:1e3}).appendTo(l),$(this.leafEdgeL).css({width:r+"px",left:u-a-r+"px"});var p=$(this.prefetchedImgs[o]).offset().left,g=l.prop("clientWidth")-p-$(this.prefetchedImgs[o]).width()+l.offset().left-2+"px";$(this.prefetchedImgs[o]).css({right:g,left:""}),$(this.leafEdgeTmp).animate({left:u},this.flipSpeed,"easeInSine");var f=this;this.enableSearch&&this.removeSearchHilites(),$(this.prefetchedImgs[o]).animate({width:"0px"},f.flipSpeed,"easeInSine",(function(){$(f.leafEdgeTmp).animate({left:u+h+"px"},f.flipSpeed,"easeOutSine"),f.$(".BRgutter").css({left:u-.5*f.twoPage.bookSpineDivWidth+"px"}),$(f.prefetchedImgs[t]).animate({width:h+"px"},f.flipSpeed,"easeOutSine",(function(){$(f.prefetchedImgs[e]).css("zIndex",2),$(f.prefetchedImgs[e]).css("display",""),$(f.prefetchedImgs[t]).css("display",""),$(f.leafEdgeR).css({width:f.twoPage.edgeWidth-r+"px",left:u+h+"px"}),$(f.leafEdgeL).css({width:r+"px",left:u-s-r+"px"}),$(f.twoPage.coverDiv).css({width:f.twoPageCoverWidth(s+h)+"px",left:u-s-r-f.twoPage.coverInternalPadding+"px"}),$(f.leafEdgeTmp).remove(),f.leafEdgeTmp=null,f.twoPage.currentIndexL=e,f.twoPage.currentIndexR=t,f.twoPage.scaledWL=s,f.twoPage.scaledWR=h,f.twoPage.gutter=u,f.updateFirstIndex(f.twoPage.currentIndexL),f.displayedIndices=[e,t],f.pruneUnusedImgs(),f.prefetch(),f.animating=!1,f.enableSearch&&f.updateSearchHilites2UP(),f.setMouseHandlers2UP(),f.animationFinishedCallback&&(f.animationFinishedCallback(),f.animationFinishedCallback=null)}))}))},BookReader.prototype.flipFwdToIndex=function(e){if(!this.animating)if(null==this.leafEdgeTmp){if(null==e&&(e=this.twoPage.currentIndexL+2),!(e>this.lastDisplayableIndex())){this.updateNavIndexThrottled(e),this.animating=!0;var t,o=this.getSpreadIndices(e);"rl"!=this.pageProgression?(t=this.prepareFlipRightToLeft(o[0],o[1]),this.flipRightToLeft(o[0],o[1],t)):(t=this.prepareFlipLeftToRight(o[0],o[1]),this.flipLeftToRight(o[0],o[1]))}}else alert("error: leafEdgeTmp should be null!")},BookReader.prototype.flipRightToLeft=function(e,t){var o=this.leafEdgeWidth(this.twoPage.currentIndexL),i=this.twoPage.edgeWidth-o,r=this.leafEdgeWidth(e),n=this.twoPage.edgeWidth-r,a=i-n,s=this.twoPageTop(),h=this.getPageWidth2UP(this.twoPage.currentIndexR),d=this.twoPage.middle+this.gutterOffsetForIndex(e),u=this.refs.$brTwoPageView;this.leafEdgeTmp=document.createElement("div"),this.leafEdgeTmp.className="BRleafEdgeTmp",$(this.leafEdgeTmp).css({width:a+"px",height:this.twoPage.height+"px",left:d+h+"px",top:s+"px",zIndex:1e3}).appendTo(u);var l=this.getPageWidth2UP(e),c=this.getPageWidth2UP(t);$(this.leafEdgeR).css({width:n+"px",left:d+c+"px"});var p=this,g=this.flipSpeed;this.enableSearch&&this.removeSearchHilites(),$(this.leafEdgeTmp).animate({left:d},g,"easeInSine"),$(this.prefetchedImgs[this.twoPage.currentIndexR]).animate({width:"0px"},g,"easeInSine",(function(){p.$("BRgutter").css({left:d-.5*p.twoPage.bookSpineDivWidth+"px"}),$(p.leafEdgeTmp).animate({left:d-l-a+"px"},g,"easeOutSine"),$(p.prefetchedImgs[e]).animate({width:l+"px"},g,"easeOutSine",(function(){$(p.prefetchedImgs[t]).css("zIndex",2),$(p.prefetchedImgs[e]).css("display",""),$(p.prefetchedImgs[t]).css("display",""),$(p.leafEdgeL).css({width:r+"px",left:d-l-r+"px"}),$(p.twoPage.coverDiv).css({width:p.twoPageCoverWidth(l+c)+"px",left:d-l-r-p.twoPage.coverInternalPadding+"px"}),$(p.leafEdgeTmp).remove(),p.leafEdgeTmp=null,p.twoPage.currentIndexL=e,p.twoPage.currentIndexR=t,p.twoPage.scaledWL=l,p.twoPage.scaledWR=c,p.twoPage.gutter=d,p.updateFirstIndex(p.twoPage.currentIndexL),p.displayedIndices=[e,t],p.pruneUnusedImgs(),p.prefetch(),p.animating=!1,p.enableSearch&&p.updateSearchHilites2UP(),p.setMouseHandlers2UP(),p.animationFinishedCallback&&(p.animationFinishedCallback(),p.animationFinishedCallback=null)}))}))},BookReader.prototype.setMouseHandlers2UP=function(){var e=function(e,t){if(3==t.which)return!t.data.self.protected;$(e).mousemove((function(){t.preventDefault()})).mouseup((function(){t.data.self.trigger(BookReader.eventNames.stop),t.data.self["L"===t.data.direction?"left":"right"]()}))};this.setClickHandler2UP(this.prefetchedImgs[this.twoPage.currentIndexR],{self:this,direction:"R"},e),this.setClickHandler2UP(this.prefetchedImgs[this.twoPage.currentIndexL],{self:this,direction:"L"},e)},BookReader.prototype.prefetchImg=function(e){var t=this._getPageURI(e),o=!1;if(null==this.prefetchedImgs[e]?o=!0:t!=this.prefetchedImgs[e].uri&&(o=!0),o){var i=document.createElement("img");$(i).addClass("BRpageimage").addClass("BRnoselect"),(e<0||e>this.getNumLeafs()-1)&&$(i).addClass("BRemptypage"),i.src=t,i.uri=t,this.prefetchedImgs[e]=i}},BookReader.prototype.prepareFlipLeftToRight=function(e,t){this.prefetchImg(e),this.prefetchImg(t);var o=this._getPageHeight(e),i=this._getPageWidth(e),r=this.twoPage.middle,n=this.twoPageTop(),a=this.twoPage.height*i/o,s=r+this.gutterOffsetForIndex(e),h={position:"absolute",left:s-a+"px",right:"",top:n+"px",height:this.twoPage.height,width:a+"px",zIndex:1};$(this.prefetchedImgs[e]).css(h);var d=this.refs.$brTwoPageView;d.append(this.prefetchedImgs[e]);var u={position:"absolute",left:s+"px",right:"",top:n+"px",height:this.twoPage.height,width:"0",zIndex:2};$(this.prefetchedImgs[t]).css(u),d.append(this.prefetchedImgs[t])},BookReader.prototype.prepareFlipRightToLeft=function(e,t){this.prefetchImg(e),this.prefetchImg(t);var o=this._getPageHeight(t),i=this._getPageWidth(t),r=this.twoPage.middle,n=this.twoPageTop(),a=this.twoPage.height*i/o,s=r+this.gutterOffsetForIndex(e);$(this.prefetchedImgs[t]).css({position:"absolute",left:s+"px",top:n+"px",height:this.twoPage.height,width:a+"px",zIndex:1});var h=this.refs.$brTwoPageView;h.append(this.prefetchedImgs[t]),o=this._getPageHeight(e),i=this._getPageWidth(e),a=this.twoPage.height*i/o,$(this.prefetchedImgs[e]).css({position:"absolute",right:h.prop("clientWidth")-s+"px",top:n+"px",height:this.twoPage.height,width:"0px",zIndex:2}),h.append(this.prefetchedImgs[e])},BookReader.prototype.pruneUnusedImgs=function(){for(var e in this.prefetchedImgs)e!=this.twoPage.currentIndexL&&e!=this.twoPage.currentIndexR&&$(this.prefetchedImgs[e]).remove(),(e<this.twoPage.currentIndexL-4||e>this.twoPage.currentIndexR+4)&&delete this.prefetchedImgs[e]},BookReader.prototype.prefetch=function(){this.prefetchImg(this.twoPage.currentIndexL),this.prefetchImg(this.twoPage.currentIndexR);for(var e=Math.min(this.twoPage.currentIndexL,this.twoPage.currentIndexR),t=Math.max(this.twoPage.currentIndexL,this.twoPage.currentIndexR),o=Math.max(e-3,0),i=Math.min(t+3,this.getNumLeafs()-1),r=1;r<=3;r++){var n=e-r;n>=o&&this.prefetchImg(n);var a=t+r;a<=i&&this.prefetchImg(a)}},BookReader.prototype.getPageWidth2UP=function(e){var t=this._getPageHeight(e),o=this._getPageWidth(e);return Math.floor(this.twoPage.height*o/t)},BookReader.prototype.twoPageGutter=function(){return this.twoPage.middle+this.gutterOffsetForIndex(this.twoPage.currentIndexL)},BookReader.prototype.twoPageTop=function(){return this.twoPage.coverExternalPadding+this.twoPage.coverInternalPadding},BookReader.prototype.twoPageCoverWidth=function(e){return e+this.twoPage.edgeWidth+2*this.twoPage.coverInternalPadding},BookReader.prototype.twoPageGetViewCenter=function(){var e={},t=this.refs.$brContainer.offset(),o=this.refs.$brTwoPageView.offset();return e.percentageX=(t.left-o.left+(this.refs.$brContainer.prop("clientWidth")>>1))/this.twoPage.totalWidth,e.percentageY=(t.top-o.top+(this.refs.$brContainer.prop("clientHeight")>>1))/this.twoPage.totalHeight,e},BookReader.prototype.twoPageCenterView=function(e,t){void 0===e&&(e=.5),void 0===t&&(t=.5);var o=this.refs.$brTwoPageView.width(),i=this.refs.$brContainer.prop("clientWidth"),r=e*o,n=this.refs.$brTwoPageView.height(),a=this.refs.$brContainer.prop("clientHeight"),s=t*n;o<i?this.refs.$brTwoPageView.css("left",(i>>1)-r+"px"):(this.refs.$brTwoPageView.css("left",0),this.refs.$brContainer.scrollLeft(r-(i>>1))),n<a?this.refs.$brTwoPageView.css("top",(a>>1)-s+"px"):(this.refs.$brTwoPageView.css("top",0),this.refs.$brContainer.scrollTop(s-(a>>1)))},BookReader.prototype.twoPageFlipAreaHeight=function(){return parseInt(this.twoPage.height)},BookReader.prototype.twoPageFlipAreaWidth=function(){var e=.15*this.twoPage.width;return parseInt(BookReader.util.clamp(e,10,100))},BookReader.prototype.twoPageFlipAreaTop=function(){return parseInt(this.twoPage.bookCoverDivTop+this.twoPage.coverInternalPadding)},BookReader.prototype.twoPageLeftFlipAreaLeft=function(){return parseInt(this.twoPage.gutter-this.twoPage.scaledWL)},BookReader.prototype.twoPageRightFlipAreaLeft=function(){return parseInt(this.twoPage.gutter+this.twoPage.scaledWR-this.twoPageFlipAreaWidth())},BookReader.prototype.setHilightCss2UP=function(e,t,o,i,r,n){var a,s=this._getPageHeight(t),h=this._getPageWidth(t),d=this.twoPage.height/s,u=parseInt(h*d),l=this.twoPageGutter();a="L"==this.getPageSide(t)?l-u:l;var c=this.twoPageTop();$(e).css({width:(i-o)*d+"px",height:(n-r)*d+"px",left:a+o*d+"px",top:c+r*d+"px"})},BookReader.prototype.stopFlipAnimations=function(){this.trigger(BookReader.eventNames.stop),this.leafEdgeTmp&&$(this.leafEdgeTmp).stop(!1,!0),jQuery.each(this.prefetchedImgs,(function(){$(this).stop(!1,!0)})),this.leafEdgeTmp&&$(this.leafEdgeTmp).stop(!1,!0),jQuery.each(this.prefetchedImgs,(function(){$(this).stop(!1,!0)}))},BookReader.prototype.keyboardNavigationIsDisabled=function(e){return"INPUT"==e.target.tagName},BookReader.prototype.gutterOffsetForIndex=function(e){var t=parseInt((e/this.getNumLeafs()-.5)*this.twoPage.edgeWidth);return"rl"==this.pageProgression&&(t=-t),t},BookReader.prototype.leafEdgeWidth=function(e){return"L"==this.getPageSide(e)&&"rl"!=this.pageProgression?parseInt(e/this.getNumLeafs()*this.twoPage.edgeWidth+.5):parseInt((1-e/this.getNumLeafs())*this.twoPage.edgeWidth+.5)},BookReader.prototype.jumpIndexForLeftEdgePageX=function(e){var t;return"rl"!=this.pageProgression?(t=this.twoPage.currentIndexL-10*($(this.leafEdgeL).offset().left+$(this.leafEdgeL).width()-e),t=BookReader.util.clamp(Math.round(t),this.firstDisplayableIndex(),this.twoPage.currentIndexL-2)):(t=this.twoPage.currentIndexL+10*($(this.leafEdgeL).offset().left+$(this.leafEdgeL).width()-e),t=BookReader.util.clamp(Math.round(t),this.twoPage.currentIndexL+2,this.lastDisplayableIndex()))},BookReader.prototype.jumpIndexForRightEdgePageX=function(e){var t;return"rl"!=this.pageProgression?(t=this.twoPage.currentIndexL+10*(e-$(this.leafEdgeR).offset().left),t=BookReader.util.clamp(Math.round(t),this.twoPage.currentIndexL+2,this.lastDisplayableIndex())):(t=this.twoPage.currentIndexL-10*(e-$(this.leafEdgeR).offset().left),t=BookReader.util.clamp(Math.round(t),this.firstDisplayableIndex(),this.twoPage.currentIndexL-2))},BookReader.prototype.initNavbar=function(){var e="";this.options.navbarTitle&&(e='<div class="BRnavTitle">'+this.options.navbarTitle+"</div>"),this.refs.$BRfooter=$('<div class="BRfooter"></div>'),this.refs.$BRnav=$('<div class="BRnav BRnavDesktop">  <div class="BRnavCntl BRnavCntlBtm BRdn js-tooltip" title="Toogle toolbars"></div>'+e+'  <div class="BRnavpos">    <div class="BRpager"></div>    <div class="BRnavline">    </div>  </div>  <div class="BRpage"><span class=\'BRcurrentpage\'></span><button class="BRicon book_left js-tooltip"></button><button class="BRicon book_right js-tooltip"></button><button class="BRicon onepg desktop-only js-tooltip"></button><button class="BRicon twopg desktop-only js-tooltip"></button><button class="BRicon thumb desktop-only js-tooltip"></button><button class=\'BRicon zoom_out desktop-only js-tooltip\'></button><button class=\'BRicon zoom_in desktop-only js-tooltip\'></button><button class=\'BRicon full js-tooltip\'></button>  </div></div>'),this.refs.$BRfooter.append(this.refs.$BRnav),this.refs.$br.append(this.refs.$BRfooter);var t=this;return this.$(".BRpager").slider({animate:!0,min:0,max:this.getNumLeafs()-1,value:this.currentIndex(),range:"min"}).bind("slide",(function(e,o){return t.updateNavPageNum(o.value),!0})).bind("slidechange",(function(e,o){return t.updateNavPageNum(o.value),$(this).data("swallowchange")?$(this).data("swallowchange",!1):t.jumpToIndex(o.value),!0})),this.updateNavPageNum(this.currentIndex()),this.refs.$BRnav},BookReader.prototype.initEmbedNavbar=function(){var e=(window.location+"").replace("?ui=embed","").replace("/stream/","/details/").replace("#","/"),t="";this.showLogo&&(t="<a class='logo' href='"+this.logoURL+"' 'target='_blank' ></a>"),this.refs.$BRfooter=$('<div class="BRfooter"></div>'),this.refs.$BRnav=$('<div class="BRnav BRnavEmbed">'+t+"<span class='BRembedreturn'><a href='"+e+"' target='_blank'>"+this.bookTitle+'</a></span><span class=\'BRtoolbarbuttons\'><button class="BRicon book_left"></button><button class="BRicon book_right"></button><button class="BRicon full"></button></span></div>'),this.refs.$BRfooter.append(this.refs.$BRnav),this.refs.$br.append(this.refs.$BRfooter)},BookReader.prototype.getNavPageNumString=function(e){var t=this.getPageNum(e),o=this.getPageProp(e,"pageType"),i=this.getNumLeafs();if(!this.getNavPageNumString.maxPageNum){for(var r,n=0,a=0;a<i;a++)r=this.getPageNum(a),!isNaN(r)&&r>n&&(n=r);this.getNavPageNumString.maxPageNum=n}return this.getNavPageNumHtml(e,i,t,o,this.getNavPageNumString.maxPageNum)},BookReader.prototype.getNavPageNumHtml=function(e,t,o,i,r){var n;return"n"!=o[0]?(n=" Page "+o,r&&(n+=" of "+r)):n=e+1+"&nbsp;/&nbsp;"+t,n},BookReader.prototype.updateNavPageNum=function(e){this.$(".BRcurrentpage").html(this.getNavPageNumString(e))},BookReader.prototype.updateNavIndex=function(e){e=void 0!==e?e:this.currentIndex(),this.$(".BRpager").data("swallowchange",!0).slider("value",e)},BookReader.prototype.updateNavIndexDebounced=BookReader.util.debounce(BookReader.prototype.updateNavIndex,500),BookReader.prototype.updateNavIndexThrottled=BookReader.util.throttle(BookReader.prototype.updateNavIndex,250,!1),BookReader.prototype.buildToolbarElement=function(){var e="";this.showLogo&&(e="<span class='BRtoolbarSection BRtoolbarSectionLogo'><a class='logo' href='"+this.logoURL+"'></a></span>"),this.refs.$BRtoolbar=$("<div class='BRtoolbar header'><div class='BRtoolbarbuttons'><div class='BRtoolbarLeft'>"+e+"<span class='BRtoolbarSection BRtoolbarSectionTitle'></span></div><div class='BRtoolbarRight'><span class='BRtoolbarSection BRtoolbarSectionInfo'><button class='BRpill info js-tooltip'>Info</button><button class='BRpill share js-tooltip'>Share</button></span></div></div></div>");var t=this.refs.$BRtoolbar.find(".BRtoolbarSectionTitle");return this.bookUrl&&this.options.enableBookTitleLink?t.append($("<a>").attr({href:this.bookUrl,title:this.bookUrlTitle}).addClass("BRreturn").html(this.bookUrlText||this.bookTitle)):this.bookTitle&&t.append(this.bookUrlText||this.bookTitle),this.refs.$BRtoolbar},BookReader.prototype.initToolbar=function(e,t){var o=this;this.refs.$br.append(this.buildToolbarElement()),this.$(".BRnavCntl").addClass("BRup"),this.$(".pause").hide(),this.updateToolbarZoom(this.reduce),this.refs.$BRtoolbar.append(),this.canSwitchToMode(this.constMode2up)||this.$(".two_page_mode, .play, .pause").hide(),this.canSwitchToMode(this.constModeThumb)||this.$(".thumbnail_mode").hide(),this.canSwitchToMode(this.constMode2up)||this.canSwitchToMode(this.constModeThumb)||this.$(".one_page_mode").hide(),$('<div style="display: none;"></div>').append(this.blankShareDiv()).append(this.blankInfoDiv()).appendTo(this.refs.$br),this.$(".BRinfo .BRfloatTitle a").attr({href:this.bookUrl}).text(this.bookTitle).addClass("title"),this.buildInfoDiv(this.$(".BRinfo")),this.buildShareDiv(this.$(".BRshare")),this.$(".share").colorbox({inline:!0,opacity:"0.5",href:this.$(".BRshare"),onLoad:function(){o.trigger(BookReader.eventNames.stop),o.$(".BRpageviewValue").val(window.location.href)}}),this.$(".info").colorbox({inline:!0,opacity:"0.5",href:this.$(".BRinfo"),onLoad:function(){o.trigger(BookReader.eventNames.stop)}})},BookReader.prototype.blankInfoDiv=function(){return $(['<div class="BRfloat BRinfo">','<div class="BRfloatHead">About this book','<button class="floatShut" href="javascript:;" onclick="$.fn.colorbox.close();"><span class="shift">Close</span></a>',"</div>",'<div class="BRfloatBody">','<div class="BRfloatCover">',"</div>",'<div class="BRfloatMeta">','<div class="BRfloatTitle">',"<h2><a/></h2>","</div>","</div>","</div>",'<div class="BRfloatFoot">','<a href="https://openlibrary.org/dev/docs/bookreader">About the BookReader</a>',"</div>","</div>"].join("\n"))},BookReader.prototype.blankShareDiv=function(){return $(['<div class="BRfloat BRshare">','<div class="BRfloatHead">',"Share",'<button class="floatShut" href="javascript:;" onclick="$.fn.colorbox.close();"><span class="shift">Close</span></a>',"</div>","</div>"].join("\n"))},BookReader.prototype.updateToolbarZoom=function(e){var t,o=null;(o=this.mode==this.constMode2up?this.twoPage.autofit:this.onePage.autofit)?t=o.slice(0,1).toUpperCase()+o.slice(1):(t=(t=(t=(100/e).toFixed(2)).replace(/0+$/,"")).replace(/\.$/,""),t+="%"),this.$(".BRzoom").text(t)},BookReader.prototype.bindNavigationHandlers=function(){var e=this,t=this.$(".BRicon").add(".BRmobileMenu .BRicon");t.filter(".onepg").bind("click",(function(){e.switchMode(e.constMode1up)})),t.filter(".twopg").bind("click",(function(){e.switchMode(e.constMode2up)})),t.filter(".thumb").bind("click",(function(){e.switchMode(e.constModeThumb)})),t.filter(".fit").bind("fit",(function(){})),t.filter(".book_left").click((function(){return e.trigger(BookReader.eventNames.stop),e.left(),!1})),t.filter(".book_right").click((function(){return e.trigger(BookReader.eventNames.stop),e.right(),!1})),t.filter(".book_up").bind("click",(function(){return $.inArray(e.mode,[e.constMode1up,e.constModeThumb])>=0?e.scrollUp():e.prev(),!1})),t.filter(".book_down").bind("click",(function(){return $.inArray(e.mode,[e.constMode1up,e.constModeThumb])>=0?e.scrollDown():e.next(),!1})),t.filter(".book_top").click((function(){return e.first(),!1})),t.filter(".book_bottom").click((function(){return e.last(),!1})),t.filter(".book_leftmost").click((function(){return e.leftmost(),!1})),t.filter(".book_rightmost").click((function(){return e.rightmost(),!1})),t.filter(".zoom_in").bind("click",(function(){return e.trigger(BookReader.eventNames.stop),e.zoom(1),e.trigger(BookReader.eventNames.zoomIn),!1})),t.filter(".zoom_out").bind("click",(function(){return e.trigger(BookReader.eventNames.stop),e.zoom(-1),e.trigger(BookReader.eventNames.zoomOut),!1})),t.filter(".full").bind("click",(function(){if("embed"==e.ui){var t=e.$(".BRembedreturn a").attr("href");window.open(t)}else e.toggleFullscreen()}));var o=this.$(".BRnavCntlBtm"),i=this.$(".BRnavCntlTop");this.$(".BRnavCntl").click((function(){var t=[];o.hasClass("BRdn")?(e.refs.$BRtoolbar&&t.push(e.refs.$BRtoolbar.animate({top:-1*e.getToolBarHeight()}).promise()),t.push(e.$(".BRfooter").animate({bottom:-1*e.getFooterHeight()}).promise()),o.addClass("BRup").removeClass("BRdn"),i.addClass("BRdn").removeClass("BRup"),e.$(".BRnavCntlBtm.BRnavCntl").animate({height:"45px"}),e.$(".BRnavCntl").delay(1e3).animate({opacity:.75},1e3)):(e.refs.$BRtoolbar&&t.push(e.refs.$BRtoolbar.animate({top:0}).promise()),t.push(e.$(".BRfooter").animate({bottom:0}).promise()),o.addClass("BRdn").removeClass("BRup"),i.addClass("BRup").removeClass("BRdn"),e.$(".BRnavCntlBtm.BRnavCntl").animate({height:"30px"}),e.$(".BRvavCntl").animate({opacity:1})),$.when.apply($,t).done((function(){e.mode==e.constMode2up&&null!=e.twoPage.autofit&&"none"!=e.twoPage.autofit?e.resize():e.mode==e.constMode1up&&null!=e.onePage.autofit&&"none"!=e.onePage.autofit?e.resize():e.resizeBRcontainer()}))})),o.mouseover((function(){$(this).hasClass("BRup")&&e.$(".BRnavCntl").animate({opacity:1},250)})).mouseleave((function(){$(this).hasClass("BRup")&&e.$(".BRnavCntl").animate({opacity:.75},250)})),i.mouseover((function(){$(this).hasClass("BRdn")&&e.$(".BRnavCntl").animate({opacity:1},250)})).mouseleave((function(){$(this).hasClass("BRdn")&&e.$(".BRnavCntl").animate({opacity:.75},250)})),this.initSwipeData(),$(document).off("mousemove.navigation",this.el),$(document).on("mousemove.navigation",this.el,{br:this},this.navigationMousemoveHandler),$(document).off("mousedown.swipe",".BRpageimage"),$(document).on("mousedown.swipe",".BRpageimage",{br:this},this.swipeMousedownHandler),this.bindMozTouchHandlers()},BookReader.prototype.unbindNavigationHandlers=function(){$(document).off("mousemove.navigation",this.el)},BookReader.prototype.navigationMousemoveHandler=function(e){if(e.data.br.uiAutoHide){var t=$(document).height()-75;e.pageY<76||e.pageY>t?e.data.br.hideNavigation():e.data.br.showNavigation()}},BookReader.prototype.initSwipeData=function(e,t){this._swipe={mightBeSwiping:!1,didSwipe:!1,mightBeDraggin:!1,didDrag:!1,startTime:(new Date).getTime(),startX:e,startY:t,lastX:e,lastY:t,deltaX:0,deltaY:0,deltaT:0}},BookReader.prototype.swipeMousedownHandler=function(e){var t=e.data.br;return 3==e.which?!t.protected:($(e.target).bind("mouseout.swipe",{br:t},t.swipeMouseupHandler).bind("mouseup.swipe",{br:t},t.swipeMouseupHandler).bind("mousemove.swipe",{br:t},t.swipeMousemoveHandler),t.initSwipeData(e.clientX,e.clientY),t._swipe.mightBeSwiping=!0,t._swipe.mightBeDragging=!0,e.preventDefault(),e.returnValue=!1,e.cancelBubble=!0,!1)},BookReader.prototype.swipeMousemoveHandler=function(e){var t=e.data.br,o=t._swipe;if(o.mightBeSwiping){o.deltaX=e.clientX-o.startX,o.deltaY=e.clientY-o.startY,o.deltaT=(new Date).getTime()-o.startTime;var i=Math.abs(o.deltaX),r=Math.abs(o.deltaY),n=Math.min(t.refs.$br.width()/5,80);return i>r&&i>n&&o.deltaT<400&&(o.mightBeSwiping=!1,o.didSwipe=!0,t.mode==t.constMode2up&&(o.deltaX<0?t.right():t.left())),o.deltaT>400&&!o.didSwipe&&o.mightBeDragging&&(o.didDrag=!0,t.refs.$brContainer.scrollTop(t.refs.$brContainer.scrollTop()-e.clientY+o.lastY).scrollLeft(t.refs.$brContainer.scrollLeft()-e.clientX+o.lastX)),o.lastX=e.clientX,o.lastY=e.clientY,e.preventDefault(),e.returnValue=!1,e.cancelBubble=!0,!1}},BookReader.prototype.swipeMouseupHandler=function(e){var t=e.data.br._swipe;return t.mightBeSwiping=!1,t.mightBeDragging=!1,$(e.target).unbind("mouseout.swipe").unbind("mouseup.swipe").unbind("mousemove.swipe"),!t.didSwipe&&!t.didDrag||(e.preventDefault(),e.returnValue=!1,e.cancelBubble=!0,!1)},BookReader.prototype.bindMozTouchHandlers=function(){var e=this;this.refs.$br.bind("MozTouchDown",(function(t){this.mode==e.constMode2up&&t.preventDefault()})).bind("MozTouchMove",(function(t){this.mode==e.constMode2up&&t.preventDefault()})).bind("MozTouchUp",(function(t){this.mode==e.constMode2up&&t.preventDefault()}))},BookReader.prototype.navigationIsVisible=function(){return 0==this.refs.$BRtoolbar.position().top},BookReader.prototype.setNavigationView=function(e){var t=this.constNavAnimationDuration,o=function(){if(this.constMode2up!==this.mode){this.resizeBRcontainer(!0)}this.trigger(BookReader.eventNames.navToggled)}.bind(this),i=0,r=0;e?(i=-1*this.getToolBarHeight(),r=-1*this.getFooterHeight(),this.refs.$BRtoolbar.addClass("js-menu-hide"),this.refs.$BRfooter.addClass("js-menu-hide")):(this.refs.$BRtoolbar.removeClass("js-menu-hide"),this.refs.$BRfooter.removeClass("js-menu-hide")),this.refs.$BRtoolbar.animate({top:i},t,"linear",o),this.refs.$BRfooter.animate({bottom:r},t,"linear",o)},BookReader.prototype.hideNavigation=function(){if(this.navigationIsVisible()){this.setNavigationView(!0)}},BookReader.prototype.showNavigation=function(){this.navigationIsVisible()||this.setNavigationView()},BookReader.prototype.firstDisplayableIndex=function(){return this.mode!=this.constMode2up?0:"rl"!=this.pageProgression?"L"==this.getPageSide(0)?0:-1:"R"==this.getPageSide(0)?0:-1},BookReader.prototype.lastDisplayableIndex=function(){var e=this.getNumLeafs()-1;return this.mode!=this.constMode2up?e:"rl"!=this.pageProgression?"R"==this.getPageSide(e)?e:e+1:"L"==this.getPageSide(e)?e:e+1},BookReader.prototype.updateFromParams=function(e){void 0!==e.mode&&this.switchMode(e.mode);var t=!1;void 0!==e.index?(t=!0,e.index!=this.currentIndex()&&this.jumpToIndex(e.index)):void 0!==e.page&&(t=!0,e.page!=this.getPageNum(this.currentIndex())&&this.jumpToPage(e.page)),this.enableSearch&&void 0!==e.search&&this.searchTerm!=e.search&&(this.search(e.search,{goToFirstResult:!t}),this.$(".BRsearchInput").val(e.search)),this.enableThemesPlugin&&void 0!==e.theme&&this.updateTheme(e.theme)},BookReader.prototype.getPageIndex=function(e){var t=this.getPageIndices(e);if(t.length>0)return t[t.length-1]},BookReader.prototype.getPageIndices=function(e){var t,o=[];if("n"==e.slice(0,1))try{var i=e.slice(1,e.length),r=parseInt(i);return o.push(r),o}catch(e){}for(t=0;t<this.getNumLeafs();t++)this.getPageNum(t)==e&&o.push(t);return o},BookReader.prototype.getPageName=function(e){return"Page "+this.getPageNum(e)},BookReader.prototype.canSwitchToMode=function(e){return e!=this.constMode2up&&e!=this.constModeThumb||!(this.getNumLeafs()<2)},BookReader.prototype._getPageWidth=function(e){return e=BookReader.util.clamp(e,0,this.getNumLeafs()-1),this.getPageWidth(e)},BookReader.prototype._getPageHeight=function(e){var t=BookReader.util.clamp(e,0,this.getNumLeafs()-1);return this.getPageHeight(t)},BookReader.prototype._getPageURI=function(e,t,o){if(e<0||e>=this.getNumLeafs())return this.imagesBaseURL+"transparent.png";if(void 0===t){var i=this.getPageHeight(e)/this.twoPage.height;t=i<2?1:i<4?2:i<8?4:i<16?8:i<32?16:32}return this.getPageURI(e,t,o)},BookReader.prototype.showProgressPopup=function(e){if(!this.popup){this.popup=document.createElement("div"),$(this.popup).css({top:.5*this.refs.$br.height()-100+"px",left:.5*(this.refs.$br.width()-300)+"px"}).prop("className","BRprogresspopup");var t=document.createElement("div");if($(t).css({height:"20px"}).prop("className","BRprogressbar"),$(this.popup).append(t),e){var o=document.createElement("div");o.innerHTML=e,$(this.popup).append(o)}$(this.popup).appendTo(this.refs.$br)}},BookReader.prototype.removeProgressPopup=function(){$(this.popup).remove(),this.$(".BRprogresspopup").remove(),this.popup=null},BookReader.prototype.buildShareDiv=function(e){var t=document.location+"",o=(t+"").replace(/#.*/,""),i=this,r="";this.getEmbedCode&&(r=['<div class="share-embed">','<p class="share-embed-prompt">Copy and paste one of these options to share this book elsewhere.</p>','<form method="post" action="">','<fieldset class="fieldset-share-pageview">','<label for="pageview">Link to this page view</label>','<input type="text" name="pageview" class="BRpageviewValue" value="'+t+'"/>',"</fieldset>",'<fieldset class="fieldset-share-book-link">','<label for="booklink">Link to the book</label>','<input type="text" name="booklink" class="booklink" value="'+o+'"/>',"</fieldset>",'<fieldset class="fieldset-embed">','<label for="iframe">Embed a mini Book Reader</label>','<fieldset class="sub">','<label class="sub">','<input type="radio" name="pages" value="'+this.constMode1up+'" checked="checked"/>',"1 page","</label>",'<label class="sub">','<input type="radio" name="pages" value="'+this.constMode2up+'"/>',"2 pages","</label>",'<label class="sub">','<input type="checkbox" name="thispage" value="thispage"/>',"Open to this page?","</label>","</fieldset>",'<textarea cols="30" rows="4" name="iframe" class="BRframeEmbed"></textarea>',"</fieldset>","</form>","</div>"].join("\n"));var n=$(['<div class="share-title">Share this book</div>','<div class="share-social">','<label class="sub open-to-this-page">','<input class="thispage-social" type="checkbox" />',"Open to this page?","</label>",'<div><button class="BRaction share facebook-share-button"><i class="BRicon fb" /> Facebook</button></div>','<div><button class="BRaction share twitter-share-button"><i class="BRicon twitter" /> Twitter</button></div>','<div><button class="BRaction share email-share-button"><i class="BRicon email" /> Email</button></div>',"</div>",r,'<div class="BRfloatFoot">','<button class="share-finished" type="button" onclick="$.fn.colorbox.close();">Finished</button>',"</div>"].join("\n"));n.appendTo(e),n.find(".fieldset-embed input").bind("change",(function(){var e=$(this).parents("form:first"),t={};if(t.mode=$(e.find(".fieldset-embed input[name=pages]:checked")).val(),e.find(".fieldset-embed input[name=thispage]").prop("checked")&&(t.page=i.getPageNum(i.currentIndex())),i.getEmbedCode){e.find(".BRframeEmbed").val(i.getEmbedCode("480px","430px",t))}})),n.find("input, textarea").bind("focus",(function(){this.select()})),n.find(".facebook-share-button").click((function(){var e="https://www.facebook.com/sharer.php?"+$.param({u:i._getSocialShareUrl()});i.createPopup(e,600,400,"Share")})),n.find(".twitter-share-button").click((function(){var e="https://twitter.com/intent/tweet?"+$.param({url:i._getSocialShareUrl(),text:i.bookTitle});i.createPopup(e,600,400,"Share")})),n.find(".email-share-button").click((function(){var e=i.bookTitle+"\n\n"+i._getSocialShareUrl();window.location.href="mailto:?subject="+encodeURI(i.bookTitle)+"&body="+encodeURI(e)})),n.find("input[name=thispage]").trigger("change"),n.appendTo(e)},BookReader.prototype._getSocialShareUrl=function(){return this.$(".thispage-social").prop("checked")?window.location.href:document.location.protocol+"//"+window.location.hostname+window.location.pathname},BookReader.prototype.buildInfoDiv=function(e){e.find(".BRfloatBody, .BRfloatCover, .BRfloatFoot").remove();var t=$('<div class="BRinfoLeftCol"></div>');this.thumbnail&&t.append($('<div class="BRimageW">  <img src="'+this.thumbnail+'"        alt="'+BookReader.util.escapeHTML(this.bookTitle)+'" /></div>'));for(var o,i,r=$('<div class="BRinfoRightCol">'),n=0;n<this.metadata.length;n++)o=this.metadata[n].extraValueClass||"",r.append($('<div class="BRinfoValueWrapper">  <div class="BRinfoLabel">'+this.metadata[n].label+'  </div>  <div class="BRinfoValue '+o+'">'+this.metadata[n].value+"  </div></div>"));this.bookUrlMoreInfo?i=this.bookUrlMoreInfo:this.bookTitle&&(i=this.bookTitle),i&&this.bookUrl&&r.append($('<div class="BRinfoValueWrapper"><div class="BRinfoMoreInfoWrapper">  <a class="BRinfoMoreInfo" href="'+this.bookUrl+'">'+i+"  </a></div></div>"));var a=[t,r,'<br style="clear:both"/>'],s=$('<div class="BRinfoW mv20-lg">').append(a);e.append(s,$('<div class="BRfloatFoot BRinfoFooter"></div>')).addClass("wide")},BookReader.prototype.initUIStrings=function(){var e={".logo":"Go to Archive.org",".zoom_in":"Zoom in",".zoom_out":"Zoom out",".onepg":"One-page view",".twopg":"Two-page view",".thumb":"Thumbnail view",".print":"Print this page",".embed":"Embed BookReader",".link":"Link to this book (and page)",".bookmark":"Bookmark this page",".read":"Read this book aloud",".share":"Share this book",".info":"About this book",".full":"Toggle fullscreen",".book_left":"Flip left",".book_right":"Flip right",".book_up":"Page up",".book_down":"Page down",".play":"Play",".pause":"Pause",".BRdn":"Show/hide nav bar",".BRup":"Show/hide nav bar",".book_top":"First page",".book_bottom":"Last page"};for(var t in"rl"==this.pageProgression?(e[".book_leftmost"]="Last page",e[".book_rightmost"]="First page"):(e[".book_leftmost"]="First page",e[".book_rightmost"]="Last page"),e)e.hasOwnProperty(t)&&this.$(t).prop("title",e[t])},BookReader.prototype.createPopup=function(e,t,o,i){var r=null!=window.screenLeft?window.screenLeft:screen.left,n=null!=window.screenTop?window.screenTop:screen.top,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,s=e,h="status=1,width="+t+",height="+o+",top="+((window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-o/2+n)+",left="+(a/2-t/2+r);window.open(s,i,h)},BookReader.prototype.reloadImages=function(){this.refs.$brContainer.find("img").each((function(e,t){if(!t.complete||0===t.naturalHeight){var o=t.src;t.src="",setTimeout((function(){t.src=o}),1e3)}}))},BookReader.prototype.getToolBarHeight=function(){return this.refs.$BRtoolbar&&"block"===this.refs.$BRtoolbar.css("display")?this.refs.$BRtoolbar.outerHeight()+parseInt(this.refs.$BRtoolbar.css("top")):0},BookReader.prototype.getFooterHeight=function(){var e=this.mode==this.constMode2up?this.refs.$BRfooter:this.refs.$BRnav;if(e&&this.refs.$BRfooter){var t=e.outerHeight(),o=parseInt(this.refs.$BRfooter.css("bottom"));if(!isNaN(t)&&!isNaN(o))return t+o}return 0},BookReader.prototype.getNumLeafs=function(){return void 0!==this.numLeafs?this.numLeafs:this._getDataFlattened().length},BookReader.prototype.getPageWidth=function(e){return this.getPageProp(e,"width")},BookReader.prototype.getPageHeight=function(e){return this.getPageProp(e,"height")},BookReader.prototype.getPageURI=function(e,t,o){return this.getPageProp(e,"uri")},BookReader.prototype.getPageSide=function(e){var t=this.getPageProp(e,"pageSide");return t||(t=e%2==0?"R":"L"),t},BookReader.prototype.getPageNum=function(e){var t=this.getPageProp(e,"pageNum");return void 0===t&&(t="n"+e),t},BookReader.prototype.getPageProp=function(e,t){return this._getDataProp(e,t)},BookReader.prototype.getSpreadIndices=function(e){return"rl"==this.pageProgression?"R"==this.getPageSide(e)?[e+1,e]:[e,e-1]:"L"==this.getPageSide(e)?[e,e+1]:[e-1,e]},BookReader.prototype.leafNumToIndex=function(e){for(var t=this._getDataFlattened(),o=0;o<t.length;o++)if(t[o].leafNum==e)return o;return e},BookReader.prototype.paramsFromCurrent=function(){var e={},t=this.currentIndex(),o=this.getPageNum(t);return(0===o||o)&&(e.page=o),e.index=t,e.mode=this.mode,this.enableSearch&&(e.search=this.searchTerm),e},BookReader.prototype.paramsFromFragment=function(e){var t={};"#"==e.substr(0,1)&&(e=e.substr(1));var o=parseInt(/^\d+$/.exec(e));if(!isNaN(o))return t.index=o,t;for(var i=e.split("/"),r={},n=0;n<i.length;n+=2)r[i[n]]=i[n+1];return"1up"==r.mode?t.mode=this.constMode1up:"2up"==r.mode?t.mode=this.constMode2up:"thumb"==r.mode&&(t.mode=this.constModeThumb),void 0!==r.page&&(t.page=r.page),null!=r.search&&(t.search=BookReader.util.decodeURIComponentPlus(r.search)),null!=r.theme&&(t.theme=r.theme),t},BookReader.prototype.fragmentFromParams=function(e){var t=[];if(void 0!==e.page?t.push("page",e.page):void 0!==e.index&&t.push("page","n"+e.index),void 0!==e.mode)if(e.mode==this.constMode1up)t.push("mode","1up");else if(e.mode==this.constMode2up)t.push("mode","2up");else{if(e.mode!=this.constModeThumb)throw"fragmentFromParams called with unknown mode "+e.mode;t.push("mode","thumb")}return e.search&&t.push("search",e.search),BookReader.util.encodeURIComponentPlus(t.join("/")).replace(/%2F/g,"/")},BookReader.prototype.parsePageString=function(e){var t,o=new RegExp("^leaf(\\d+)").exec(e);return o?null===(t=this.leafNumToIndex(parseInt(o[1],10)))&&(t=void 0):t=this.getPageIndex(e),t},BookReader.prototype._getDataFlattened=function(){if(this._getDataFlattened.cached&&this._getDataFlattened.cached[1]===this.data.length)return this._getDataFlattened.cached[0];for(var e=[],t=null,o=0;o<this.data.length;o++)for(var i=0;i<this.data[o].length;i++)this.data[o][i].pageSide||(this.data[o][i].pageSide=null===t?2===this.data[o].length?"L":"R":"L"===t?"R":"L"),t=this.data[o][i].pageSide,e.push(this.data[o][i]);return this._getDataFlattened.cached=[e,this.data.length],e},BookReader.prototype._getDataProp=function(e,t){var o=this._getDataFlattened();if(!(isNaN(e)||e<0||e>=o.length)&&void 0!==o[e][t])return o[e][t]},BookReader.prototype.$=function(e){return this.refs.$br.find(e)},jQuery.curCSS=function(e,t,o){return jQuery(e).css(t,o)},BookReader}(jQuery)},function(e,t,o){"use strict";var i=o(5),r=o(1),n=o(29),a=o(4),s=o(16),h=o(11),d=o(30),u=o(46),l=o(19),c=o(0)("isConcatSpreadable"),p=!r((function(){var e=[];return e[c]=!1,e.concat()[0]!==e})),g=l("concat"),f=function(e){if(!a(e))return!1;var t=e[c];return void 0!==t?!!t:n(e)};i({target:"Array",proto:!0,forced:!p||!g},{concat:function(e){var t,o,i,r,n,a=s(this),l=u(a,0),c=0;for(t=-1,i=arguments.length;t<i;t++)if(n=-1===t?a:arguments[t],f(n)){if(c+(r=h(n.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(o=0;o<r;o++,c++)o in n&&d(l,c,n[o])}else{if(c>=9007199254740991)throw TypeError("Maximum allowed index exceeded");d(l,c++,n)}return l.length=c,l}})},function(e,t){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(e){"object"==typeof window&&(o=window)}e.exports=o},function(e,t,o){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,n=r&&!i.call({1:2},1);t.f=n?function(e){var t=r(this,e);return!!t&&t.enumerable}:i},function(e,t,o){var i=o(3),r=o(24),n=i["__core-js_shared__"]||r("__core-js_shared__",{});e.exports=n},function(e,t,o){var i=o(3),r=o(39),n=i.WeakMap;e.exports="function"==typeof n&&/native code/.test(r.call(n))},function(e,t,o){var i=o(6),r=o(65),n=o(36),a=o(10);e.exports=function(e,t){for(var o=r(t),s=a.f,h=n.f,d=0;d<o.length;d++){var u=o[d];i(e,u)||s(e,u,h(t,u))}}},function(e,t,o){var i=o(27),r=o(42),n=o(68),a=o(2);e.exports=i("Reflect","ownKeys")||function(e){var t=r.f(a(e)),o=n.f;return o?t.concat(o(e)):t}},function(e,t,o){e.exports=o(3)},function(e,t,o){var i=o(15),r=o(11),n=o(44),a=function(e){return function(t,o,a){var s,h=i(t),d=r(h.length),u=n(a,d);if(e&&o!=o){for(;d>u;)if((s=h[u++])!=s)return!0}else for(;d>u;u++)if((e||u in h)&&h[u]===o)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,o){var i=o(1);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},function(e,t,o){"use strict";var i=o(5),r=o(31).filter;i({target:"Array",proto:!0,forced:!o(19)("filter")},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,o){"use strict";var i=o(5),r=o(31).find,n=o(72),a=!0;"find"in[]&&Array(1).find((function(){a=!1})),i({target:"Array",proto:!0,forced:a},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n("find")},function(e,t,o){var i=o(0),r=o(49),n=o(7),a=i("unscopables"),s=Array.prototype;null==s[a]&&n(s,a,r(null)),e.exports=function(e){s[a][e]=!0}},function(e,t,o){var i=o(8),r=o(10),n=o(2),a=o(74);e.exports=i?Object.defineProperties:function(e,t){n(e);for(var o,i=a(t),s=i.length,h=0;s>h;)r.f(e,o=i[h++],t[o]);return e}},function(e,t,o){var i=o(43),r=o(28);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,o){var i=o(27);e.exports=i("document","documentElement")},function(e,t,o){var i=o(5),r=o(77);i({target:"Array",stat:!0,forced:!o(81)((function(e){Array.from(e)}))},{from:r})},function(e,t,o){"use strict";var i=o(47),r=o(16),n=o(78),a=o(79),s=o(11),h=o(30),d=o(80);e.exports=function(e){var t,o,u,l,c,p=r(e),g="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,v=void 0!==m,_=0,b=d(p);if(v&&(m=i(m,f>2?arguments[2]:void 0,2)),null==b||g==Array&&a(b))for(o=new g(t=s(p.length));t>_;_++)h(o,_,v?m(p[_],_):p[_]);else for(c=(l=b.call(p)).next,o=new g;!(u=c.call(l)).done;_++)h(o,_,v?n(l,m,[u.value,_],!0):u.value);return o.length=_,o}},function(e,t,o){var i=o(2);e.exports=function(e,t,o,r){try{return r?t(i(o)[0],o[1]):t(o)}catch(t){var n=e.return;throw void 0!==n&&i(n.call(e)),t}}},function(e,t,o){var i=o(0),r=o(20),n=i("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[n]===e)}},function(e,t,o){var i=o(50),r=o(20),n=o(0)("iterator");e.exports=function(e){if(null!=e)return e[n]||e["@@iterator"]||r[i(e)]}},function(e,t,o){var i=o(0)("iterator"),r=!1;try{var n=0,a={next:function(){return{done:!!n++}},return:function(){r=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var o=!1;try{var n={};n[i]=function(){return{next:function(){return{done:o=!0}}}},e(n)}catch(e){}return o}},function(e,t,o){"use strict";var i=o(5),r=o(21),n=o(15),a=o(83),s=[].join,h=r!=Object,d=a("join",",");i({target:"Array",proto:!0,forced:h||d},{join:function(e){return s.call(n(this),void 0===e?",":e)}})},function(e,t,o){"use strict";var i=o(1);e.exports=function(e,t){var o=[][e];return!o||!i((function(){o.call(null,t||function(){throw 1},1)}))}},function(e,t,o){"use strict";var i=o(5),r=o(31).map;i({target:"Array",proto:!0,forced:!o(19)("map")},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,o){"use strict";var i=o(5),r=o(4),n=o(29),a=o(44),s=o(11),h=o(15),d=o(30),u=o(19),l=o(0)("species"),c=[].slice,p=Math.max;i({target:"Array",proto:!0,forced:!u("slice")},{slice:function(e,t){var o,i,u,g=h(this),f=s(g.length),m=a(e,f),v=a(void 0===t?f:t,f);if(n(g)&&("function"!=typeof(o=g.constructor)||o!==Array&&!n(o.prototype)?r(o)&&null===(o=o[l])&&(o=void 0):o=void 0,o===Array||void 0===o))return c.call(g,m,v);for(i=new(void 0===o?Array:o)(p(v-m,0)),u=0;m<v;m++,u++)m in g&&d(i,u,g[m]);return i.length=u,i}})},function(e,t,o){"use strict";var i=o(5),r=o(14),n=o(87),a=o(88),s=o(1),h=1..toFixed,d=Math.floor,u=function(e,t,o){return 0===t?o:t%2==1?u(e,t-1,o*e):u(e*e,t/2,o)};i({target:"Number",proto:!0,forced:h&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){h.call({})}))},{toFixed:function(e){var t,o,i,s,h=n(this),l=r(e),c=[0,0,0,0,0,0],p="",g="0",f=function(e,t){for(var o=-1,i=t;++o<6;)i+=e*c[o],c[o]=i%1e7,i=d(i/1e7)},m=function(e){for(var t=6,o=0;--t>=0;)o+=c[t],c[t]=d(o/e),o=o%e*1e7},v=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var o=String(c[e]);t=""===t?o:t+a.call("0",7-o.length)+o}return t};if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(h!=h)return"NaN";if(h<=-1e21||h>=1e21)return String(h);if(h<0&&(p="-",h=-h),h>1e-21)if(o=(t=function(e){for(var t=0,o=e;o>=4096;)t+=12,o/=4096;for(;o>=2;)t+=1,o/=2;return t}(h*u(2,69,1))-69)<0?h*u(2,-t,1):h/u(2,t,1),o*=4503599627370496,(t=52-t)>0){for(f(0,o),i=l;i>=7;)f(1e7,0),i-=7;for(f(u(10,i,1),0),i=t-1;i>=23;)m(1<<23),i-=23;m(1<<i),f(1,1),m(2),g=v()}else f(0,o),f(1<<-t,0),g=v()+a.call("0",l);return g=l>0?p+((s=g.length)<=l?"0."+a.call("0",l-s)+g:g.slice(0,s-l)+"."+g.slice(s-l)):p+g}})},function(e,t,o){var i=o(12);e.exports=function(e){if("number"!=typeof e&&"Number"!=i(e))throw TypeError("Incorrect invocation");return+e}},function(e,t,o){"use strict";var i=o(14),r=o(9);e.exports="".repeat||function(e){var t=String(r(this)),o="",n=i(e);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(o+=t);return o}},function(e,t,o){var i=o(13),r=o(90),n=Object.prototype;r!==n.toString&&i(n,"toString",r,{unsafe:!0})},function(e,t,o){"use strict";var i=o(50),r={};r[o(0)("toStringTag")]="z",e.exports="[object z]"!==String(r)?function(){return"[object "+i(this)+"]"}:r.toString},function(e,t,o){var i=o(8),r=o(3),n=o(45),a=o(92),s=o(10).f,h=o(42).f,d=o(52),u=o(32),l=o(13),c=o(1),p=o(94),g=o(0)("match"),f=r.RegExp,m=f.prototype,v=/a/g,_=/a/g,b=new f(v)!==v;if(i&&n("RegExp",!b||c((function(){return _[g]=!1,f(v)!=v||f(_)==_||"/a/i"!=f(v,"i")})))){for(var P=function(e,t){var o=this instanceof P,i=d(e),r=void 0===t;return!o&&i&&e.constructor===P&&r?e:a(b?new f(i&&!r?e.source:e,t):f((i=e instanceof P)?e.source:e,i&&r?u.call(e):t),o?this:m,P)},w=function(e){e in P||s(P,e,{configurable:!0,get:function(){return f[e]},set:function(t){f[e]=t}})},R=h(f),B=0;R.length>B;)w(R[B++]);m.constructor=P,P.prototype=m,l(r,"RegExp",P)}p("RegExp")},function(e,t,o){var i=o(4),r=o(51);e.exports=function(e,t,o){var n,a;return r&&"function"==typeof(n=t.constructor)&&n!==o&&i(a=n.prototype)&&a!==o.prototype&&r(e,a),e}},function(e,t,o){var i=o(4);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,o){"use strict";var i=o(27),r=o(10),n=o(0),a=o(8),s=n("species");e.exports=function(e){var t=i(e),o=r.f;a&&t&&!t[s]&&o(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,o){"use strict";var i=o(13),r=o(2),n=o(1),a=o(32),s=RegExp.prototype,h=s.toString,d=n((function(){return"/a/b"!=h.call({source:"a",flags:"b"})})),u="toString"!=h.name;(d||u)&&i(RegExp.prototype,"toString",(function(){var e=r(this),t=String(e.source),o=e.flags;return"/"+t+"/"+String(void 0===o&&e instanceof RegExp&&!("flags"in s)?a.call(e):o)}),{unsafe:!0})},function(e,t,o){"use strict";var i=o(53).charAt,r=o(40),n=o(97),a=r.set,s=r.getterFor("String Iterator");n(String,"String",(function(e){a(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=s(this),o=t.string,r=t.index;return r>=o.length?{value:void 0,done:!0}:(e=i(o,r),t.index+=e.length,{value:e,done:!1})}))},function(e,t,o){"use strict";var i=o(5),r=o(98),n=o(55),a=o(51),s=o(56),h=o(7),d=o(13),u=o(0),l=o(23),c=o(20),p=o(54),g=p.IteratorPrototype,f=p.BUGGY_SAFARI_ITERATORS,m=u("iterator"),v=function(){return this};e.exports=function(e,t,o,u,p,_,b){r(o,t,u);var P,w,R,B=function(e){if(e===p&&$)return $;if(!f&&e in k)return k[e];switch(e){case"keys":case"values":case"entries":return function(){return new o(this,e)}}return function(){return new o(this)}},x=t+" Iterator",y=!1,k=e.prototype,I=k[m]||k["@@iterator"]||p&&k[p],$=!f&&I||B(p),T="Array"==t&&k.entries||I;if(T&&(P=n(T.call(new e)),g!==Object.prototype&&P.next&&(l||n(P)===g||(a?a(P,g):"function"!=typeof P[m]&&h(P,m,v)),s(P,x,!0,!0),l&&(c[x]=v))),"values"==p&&I&&"values"!==I.name&&(y=!0,$=function(){return I.call(this)}),l&&!b||k[m]===$||h(k,m,$),c[t]=$,p)if(w={values:B("values"),keys:_?$:B("keys"),entries:B("entries")},b)for(R in w)!f&&!y&&R in k||d(k,R,w[R]);else i({target:t,proto:!0,forced:f||y},w);return w}},function(e,t,o){"use strict";var i=o(54).IteratorPrototype,r=o(49),n=o(17),a=o(56),s=o(20),h=function(){return this};e.exports=function(e,t,o){var d=t+" Iterator";return e.prototype=r(i,{next:n(1,o)}),a(e,d,!1,!0),s[d]=h,e}},function(e,t,o){var i=o(1);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,o){"use strict";var i=o(33),r=o(2),n=o(16),a=o(11),s=o(14),h=o(9),d=o(57),u=o(35),l=Math.max,c=Math.min,p=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,f=/\$([$&'`]|\d\d?)/g;i("replace",2,(function(e,t,o){return[function(o,i){var r=h(this),n=null==o?void 0:o[e];return void 0!==n?n.call(o,r,i):t.call(String(r),o,i)},function(e,n){var h=o(t,e,this,n);if(h.done)return h.value;var p=r(e),g=String(this),f="function"==typeof n;f||(n=String(n));var m=p.global;if(m){var v=p.unicode;p.lastIndex=0}for(var _=[];;){var b=u(p,g);if(null===b)break;if(_.push(b),!m)break;""===String(b[0])&&(p.lastIndex=d(g,a(p.lastIndex),v))}for(var P,w="",R=0,B=0;B<_.length;B++){b=_[B];for(var x=String(b[0]),y=l(c(s(b.index),g.length),0),k=[],I=1;I<b.length;I++)k.push(void 0===(P=b[I])?P:String(P));var $=b.groups;if(f){var T=[x].concat(k,y,g);void 0!==$&&T.push($);var E=String(n.apply(void 0,T))}else E=i(x,g,y,k,$,n);y>=R&&(w+=g.slice(R,y)+E,R=y+x.length)}return w+g.slice(R)}];function i(e,o,i,r,a,s){var h=i+e.length,d=r.length,u=f;return void 0!==a&&(a=n(a),u=g),t.call(s,u,(function(t,n){var s;switch(n.charAt(0)){case"$":return"$";case"&":return e;case"`":return o.slice(0,i);case"'":return o.slice(h);case"<":s=a[n.slice(1,-1)];break;default:var u=+n;if(0===u)return t;if(u>d){var l=p(u/10);return 0===l?t:l<=d?void 0===r[l-1]?n.charAt(1):r[l-1]+n.charAt(1):t}s=r[u-1]}return void 0===s?"":s}))}}))},function(e,t,o){"use strict";var i=o(33),r=o(2),n=o(9),a=o(102),s=o(35);i("search",1,(function(e,t,o){return[function(t){var o=n(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,o):new RegExp(t)[e](String(o))},function(e){var i=o(t,e,this);if(i.done)return i.value;var n=r(e),h=String(this),d=n.lastIndex;a(d,0)||(n.lastIndex=0);var u=s(n,h);return a(n.lastIndex,d)||(n.lastIndex=d),null===u?-1:u.index}]}))},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,o){"use strict";var i=o(33),r=o(52),n=o(2),a=o(9),s=o(104),h=o(57),d=o(11),u=o(35),l=o(34),c=o(1),p=[].push,g=Math.min,f=!c((function(){return!RegExp(4294967295,"y")}));i("split",2,(function(e,t,o){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,o){var i=String(a(this)),n=void 0===o?4294967295:o>>>0;if(0===n)return[];if(void 0===e)return[i];if(!r(e))return t.call(i,e,n);for(var s,h,d,u=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,f=new RegExp(e.source,c+"g");(s=l.call(f,i))&&!((h=f.lastIndex)>g&&(u.push(i.slice(g,s.index)),s.length>1&&s.index<i.length&&p.apply(u,s.slice(1)),d=s[0].length,g=h,u.length>=n));)f.lastIndex===s.index&&f.lastIndex++;return g===i.length?!d&&f.test("")||u.push(""):u.push(i.slice(g)),u.length>n?u.slice(0,n):u}:"0".split(void 0,0).length?function(e,o){return void 0===e&&0===o?[]:t.call(this,e,o)}:t,[function(t,o){var r=a(this),n=null==t?void 0:t[e];return void 0!==n?n.call(t,r,o):i.call(String(r),t,o)},function(e,r){var a=o(i,e,this,r,i!==t);if(a.done)return a.value;var l=n(e),c=String(this),p=s(l,RegExp),m=l.unicode,v=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(f?"y":"g"),_=new p(f?l:"^(?:"+l.source+")",v),b=void 0===r?4294967295:r>>>0;if(0===b)return[];if(0===c.length)return null===u(_,c)?[c]:[];for(var P=0,w=0,R=[];w<c.length;){_.lastIndex=f?w:0;var B,x=u(_,f?c:c.slice(w));if(null===x||(B=g(d(_.lastIndex+(f?0:w)),c.length))===P)w=h(c,w,m);else{if(R.push(c.slice(P,w)),R.length===b)return R;for(var y=1;y<=x.length-1;y++)if(R.push(x[y]),R.length===b)return R;w=P=B}}return R.push(c.slice(P)),R}]}),!f)},function(e,t,o){var i=o(2),r=o(48),n=o(0)("species");e.exports=function(e,t){var o,a=i(e).constructor;return void 0===a||null==(o=i(a)[n])?t:r(o)}}]);
//# sourceMappingURL=BookReader.js.map