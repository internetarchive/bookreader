/*! For license information please see plugin.tts.js.LICENSE.txt */
(self.webpackChunk_internetarchive_bookreader=self.webpackChunk_internetarchive_bookreader||[]).push([[51],{7653:function(t,e,n){"use strict";n(2675),n(9463),n(6412),n(2259),n(5700),n(8125),n(8706),n(2008),n(113),n(3418),n(3792),n(8598),n(2062),n(4490),n(4782),n(6910),n(9572),n(2010),n(4731),n(479),n(8130),n(5506),n(875),n(6099),n(8459),n(3362),n(7495),n(8781),n(7764),n(1761),n(1392),n(3500),n(2953),n(3851),n(825),n(888),n(5440),n(9085);var r=n(1669);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function s(){s=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var o=e&&e.prototype instanceof A?e:A,a=Object.create(o.prototype),s=new I(r||[]);return i(a,"_invoke",{value:L(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var p="suspendedStart",y="suspendedYield",m="executing",g="completed",v={};function A(){}function b(){}function w(){}var k={};h(k,u,(function(){return this}));var _=Object.getPrototypeOf,V=_&&_(_(T([])));V&&V!==n&&r.call(V,u)&&(k=V);var O=w.prototype=A.prototype=Object.create(k);function S(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(i,a,s,u){var l=d(t[i],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==o(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,u)}))}u(l.arg)}var a;i(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return a=a?a.then(o,o):o()}})}function L(e,n,r){var o=p;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=M(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var l=d(e,n,r);if("normal"===l.type){if(o=r.done?g:y,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=g,r.method="throw",r.arg=l.arg)}}}function M(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function T(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(o(e)+" is not iterable")}return b.prototype=w,i(O,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=h(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,h(t,c,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(x.prototype),h(x.prototype,l,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new x(f(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(O),h(O,c,"Generator"),h(O,u,(function(){return this})),h(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=T,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function u(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function c(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}var h=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.leafIndex=e,this.chunkIndex=n,this.text=r,this.lineRects=o}return e=t,n=[{key:"fetch",value:(o=s().mark((function e(n,o,i){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.ajax({type:"GET",url:"https://".concat(n,"/BookReader/BookReaderGetTextWrapper.php"),cache:!0,xhrFields:{withCredentials:window.br.protected},data:{path:"".concat(o,"_djvu.xml"),page:i,callback:"false"}});case 2:return a=e.sent,e.abrupt("return",t._fromTextWrapperResponse(i,a));case 4:case"end":return e.stop()}}),e)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){u(i,n,r,a,s,"next",t)}function s(t){u(i,n,r,a,s,"throw",t)}a(void 0)}))},function(t,e,n){return a.apply(this,arguments)})},{key:"_fromTextWrapperResponse",value:function(e,n){return n.map((function(n,r){var o=t._fixChunkRects(n.slice(1)),i=t._removeDanglingHyphens(n[0]);return new t(e,r,i,o)}))}},{key:"_fixChunkRects",value:function(t){if(t.length<2)return t;var e=i(t,2),n=e[0],r=e[1],o=i(n,3),a=o[0],s=o[1],u=o[2]-a,l=r[1]-r[3],c=r[2]-r[0],h=r[2];return u>30*c&&(n[2]=h,n[3]=s-l),t}},{key:"_removeDanglingHyphens",value:function(t){return t.replace(/[-¬]\s+/g,"")}}],n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,o,a}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function d(){d=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof A?e:A,a=Object.create(i.prototype),s=new I(r||[]);return o(a,"_invoke",{value:L(t,n,s)}),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",y="suspendedYield",m="executing",g="completed",v={};function A(){}function b(){}function w(){}var k={};l(k,a,(function(){return this}));var _=Object.getPrototypeOf,V=_&&_(_(T([])));V&&V!==n&&r.call(V,a)&&(k=V);var O=w.prototype=A.prototype=Object.create(k);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var u=h(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==f(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,n,r){var o=p;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=M(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var l=h(e,n,r);if("normal"===l.type){if(o=r.done?g:y,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=g,r.method="throw",r.arg=l.arg)}}}function M(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=h(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function T(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(f(e)+" is not iterable")}return b.prototype=w,o(O,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=l(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(x.prototype),l(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new x(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(O),l(O,u,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=T,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function p(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function m(t){var e=function(t,e){if("object"!=f(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==f(e)?e:e+""}var g=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pageCount=e,this.opts=Object.assign({},v,r),this._cursor={page:n,chunk:0},this._bufferedPages={},this._bufferingPages={},this._cursorLock=Promise.resolve()}return e=t,n=[{key:"next",value:function(){var t=this;return this._cursorLock=this._cursorLock.then((function(){return t._nextUncontrolled()}))}},{key:"decrement",value:function(){var t=this;return this._cursorLock=this._cursorLock.then((function(){return t._decrementUncontrolled()}))}},{key:"_nextUncontrolled",value:(r=d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._cursor.page!=this.pageCount){e.next=2;break}return e.abrupt("return",Promise.resolve(t.AT_END));case 2:return this._recenterBuffer(this._cursor.page),e.next=5,this._fetchPageChunks(this._cursor.page);case 5:if(n=e.sent,this._cursor.chunk!=n.length){e.next=10;break}return this._cursor.page++,this._cursor.chunk=0,e.abrupt("return",this._nextUncontrolled());case 10:return e.abrupt("return",n[this._cursor.chunk++]);case 11:case"end":return e.stop()}}),e,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){p(i,n,o,a,s,"next",t)}function s(t){p(i,n,o,a,s,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"_decrementUncontrolled",value:function(){var t=this,e=Promise.resolve();return this._cursor.chunk>0?this._cursor.chunk--:this._cursor.page>0&&(this._cursor.page--,e=this._fetchPageChunks(this._cursor.page).then((function(e){if(0==e.length)return t._decrementUncontrolled();t._cursor.chunk=e.length-1}))),e.then((function(){return t._fetchPageChunks(t._cursor.page)}))}},{key:"_recenterBuffer",value:function(t){for(var e=Math.max(0,t-this.opts.pageBufferSize),n=Math.min(this.pageCount,t+this.opts.pageBufferSize+1),r=e;r<n;r++)this._fetchPageChunks(r);this._removePageFromBuffer(e-1),this._removePageFromBuffer(n+1)}},{key:"_removePageFromBuffer",value:function(t){delete this._bufferingPages[t],delete this._bufferedPages[t]}},{key:"_fetchPageChunks",value:function(t){var e=this;return t in this._bufferingPages?this._bufferingPages[t]:t in this._bufferedPages?Promise.resolve(this._bufferedPages[t]):(this._bufferingPages[t]=this._fetchPageChunksDirect(t).then((function(n){return delete e._bufferingPages[t],e._bufferedPages[t]=n,n})),this._bufferingPages[t])}},{key:"_fetchPageChunksDirect",value:function(t){return h.fetch(this.opts.server,this.opts.bookPath,t)}}],n&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r,o}();g.AT_END="__PageChunkIterator.AT_END__";var v={server:null,bookPath:null,pageBufferSize:2},A=n(4031);function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.userAgent;return/android/i.test(t)}var w={Name:0,Endonym:1,"ISO 639-1":2,"ISO 639-2/T":3,"ISO 639-2/B":4};function k(t,e){for(var n=0;n<A.A.length;n++)for(var r=0;r<e.length;r++){var o=e[r];if(-1!=A.A[n][w[o]].split(", ").map((function(t){return t.toLowerCase()})).indexOf(t))return A.A[n][w["ISO 639-1"]]}return null}function _(){try{return!!window.localStorage}catch(t){return!1}}var V=n(1669);function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function x(){x=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new I(r||[]);return o(a,"_invoke",{value:L(t,n,s)}),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",p="executing",y="completed",m={};function g(){}function v(){}function A(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(T([])));k&&k!==n&&r.call(k,a)&&(b=k);var _=A.prototype=g.prototype=Object.create(b);function V(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,i,a,s){var u=h(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==O(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,n,r){var o=f;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=M(s,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var l=h(e,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function M(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=h(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function T(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(O(e)+" is not iterable")}return v.prototype=A,o(_,"constructor",{value:A,configurable:!0}),o(A,"constructor",{value:v,configurable:!0}),v.displayName=l(A,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,A):(t.__proto__=A,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},V(S.prototype),l(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},V(_),l(_,u,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=T,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function L(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function M(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){L(i,r,o,a,s,"next",t)}function s(t){L(i,r,o,a,s,"throw",t)}a(void 0)}))}}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,E(r.key),r)}}function E(t){var e=function(t,e){if("object"!=O(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==O(e)?e:e+""}var I=function(){function t(e){var n,r,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=function(){i.voice=t.getBestBookVoice(i.getVoices(),i.opts.bookLanguage)},(r=E(r="updateBestVoice"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this.playing=!1,this.paused=!1,this.opts=e,this._chunkIterator=null,this.activeSound=null,this.playbackRate=1,this.events=V({}),this.voice=null,this.events.on("voiceschanged",this.updateBestVoice),this.events.trigger("voiceschanged")}return e=t,n=[{key:"getVoices",value:function(){throw new Error("Unimplemented abstract class")}},{key:"init",value:function(){return null}},{key:"start",value:function(t,e){this.playing=!0,this.paused=!1,this.opts.onLoadingStart(),this._chunkIterator=new g(e,t,{server:this.opts.server,bookPath:this.opts.bookPath,pageBufferSize:5}),this.step(),this.events.trigger("start")}},{key:"stop",value:function(){this.activeSound&&this.activeSound.stop(),this.playing=!1,this.paused=!0,this._chunkIterator=null,this.activeSound=null,this.events.trigger("stop")}},{key:"pause",value:function(){var t=!this.paused&&this.activeSound;this.paused=!0,this.activeSound&&this.activeSound.pause(),t&&this.events.trigger("pause")}},{key:"resume",value:function(){var t=this.paused&&this.activeSound;this.paused=!1,this.activeSound&&this.activeSound.resume(),t&&this.events.trigger("resume")}},{key:"togglePlayPause",value:function(){this.paused?this.resume():this.pause()}},{key:"jumpForward",value:function(){this.activeSound&&this.activeSound.finish()}},{key:"jumpBackward",value:(i=M(x().mark((function t(){var e=this;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.activeSound.stop(),this._chunkIterator.decrement().then((function(){return e._chunkIterator.decrement()}))]);case 2:this.step();case 3:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"setVoice",value:function(t){this.events.off("voiceschanged",this.updateBestVoice),this.voice=this.getVoices().find((function(e){return e.voiceURI===t})),this.opts.bookLanguage&&_()&&localStorage.setItem("BRtts-voice-".concat(this.opts.bookLanguage),this.voice.voiceURI),this.activeSound&&this.activeSound.setVoice(this.voice)}},{key:"setPlaybackRate",value:function(t){this.playbackRate=t,this.activeSound&&this.activeSound.setPlaybackRate(t)}},{key:"step",value:(o=M(x().mark((function t(){var e,n,r,o=this;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._chunkIterator.next();case 2:if((e=t.sent)!=g.AT_END){t.next=7;break}return this.stop(),this.opts.onDone(),t.abrupt("return");case 7:return this.opts.onLoadingStart(),(n=this.createSound(e)).chunk=e,n.rate=this.playbackRate,n.voice=this.voice,n.load((function(){return o.opts.onLoadingComplete()})),this.opts.onLoadingComplete(),t.next=16,this.opts.beforeChunkPlay(e);case 16:if(this.playing){t.next=18;break}return t.abrupt("return");case 18:return t.next=20,this.playSound(n).then((function(){return o.opts.afterChunkPlay(n.chunk)}));case 20:return r=t.sent,this.paused&&this.pause(),t.next=24,r;case 24:if(!this.playing){t.next=26;break}return t.abrupt("return",this.step());case 26:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"createSound",value:function(t){throw new Error("Unimplemented abstract class")}},{key:"playSound",value:function(t){return this.activeSound=t,this.activeSound.loaded||this.opts.onLoadingStart(),this.activeSound.play()}},{key:"getBestVoice",value:function(){return t.getBestBookVoice(this.getVoices(),this.opts.bookLanguage)}}],r=[{key:"isSupported",value:function(){throw new Error("Unimplemented abstract class")}},{key:"getBestBookVoice",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:navigator.languages,o=e.filter((function(t){return t.lang.startsWith(n)})),i=(r=r||(navigator.language?[navigator.language]:[])).filter((function(t){return t.startsWith(n)}));return t.getMatchingStoredVoice(o,n)||t.getMatchingVoice(i,o)||o.find((function(t){return t.default}))||o[0]||t.getMatchingVoice(r,e)||e.find((function(t){return t.default}))||e[0]}},{key:"getMatchingStoredVoice",value:function(t,e){var n=_()&&localStorage.getItem("BRtts-voice-".concat(e));return n?t.find((function(t){return t.voiceURI===n})):void 0}},{key:"getMatchingVoice",value:function(t,e){var n,r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return S(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(t);try{var o,i=function(){var t=n.value,r=e.filter((function(e){return e.lang.replace("_","-").startsWith(t)}));if(r.length)return{v:r.find((function(t){return t.default}))||r[0]}};for(r.s();!(n=r.n()).done;)if(o=i())return o.v}catch(t){r.e(t)}finally{r.f()}}}],n&&P(e.prototype,n),r&&P(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r,o,i}(),T=n(6257),q=(n(2443),n(1792),n(1669));function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function D(){D=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new P(r||[]);return o(a,"_invoke",{value:S(t,n,s)}),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",p="executing",y="completed",m={};function g(){}function v(){}function A(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(E([])));k&&k!==n&&r.call(k,a)&&(b=k);var _=A.prototype=g.prototype=Object.create(b);function V(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(o,i,a,s){var u=h(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==R(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,n,r){var o=f;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=x(s,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var l=h(e,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function x(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=h(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function E(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(R(e)+" is not iterable")}return v.prototype=A,o(_,"constructor",{value:A,configurable:!0}),o(A,"constructor",{value:v,configurable:!0}),v.displayName=l(A,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,A):(t.__proto__=A,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},V(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new O(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},V(_),l(_,u,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=E,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:E(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function C(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function F(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){C(i,r,o,a,s,"next",t)}function s(t){C(i,r,o,a,s,"throw",t)}a(void 0)}))}}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U(r.key),r)}}function N(t,e,n){return e&&B(t.prototype,e),n&&B(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function U(t){var e=function(t,e){if("object"!=R(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==R(e)?e:e+""}function H(t,e,n){return e=G(e),function(t,e){if(e&&("object"==R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Y()?Reflect.construct(e,n||[],G(t).constructor):e.apply(t,n))}function Y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Y=function(){return!!t})()}function Q(){return Q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=G(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Q.apply(null,arguments)}function G(t){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},G(t)}function z(t,e){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},z(t,e)}var K=function(t){function e(t){var n,r;return j(this,e),(r=H(this,e,[t])).audioFormat=null!==(n=q.browser)&&void 0!==n&&n.mozilla?"ogg":"mp3",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z(t,e)}(e,t),N(e,[{key:"getVoices",value:function(){return[{default:!0,lang:"en-US",localService:!1,name:"Festival - English (US)",voiceURI:null}]}},{key:"init",value:function(){soundManager.setup({debugMode:!1,preferFlash:!0,url:"/bookreader/BookReader/soundmanager/swf",useHTML5Audio:!0,flashVersion:9})}},{key:"start",value:function(t,n){var r=this,o=null;navigator.userAgent.match(/mobile/i)&&(o=this.iOSCaptureUserIntentHack()),(o=o||Promise.resolve()).then((function(){return(o=e,i=r,"function"==typeof(a=Q(G(1&3?o.prototype:o),"start",i))?function(t){return a.apply(i,t)}:a)([t,n]);var o,i,a}))}},{key:"createSound",value:function(t){return new Z(this.getSoundUrl(t.text))}},{key:"getSoundUrl",value:function(t){return"https://"+this.opts.server+"/BookReader/BookReaderGetTTS.php?string="+encodeURIComponent(t)+"&format=."+this.audioFormat}},{key:"iOSCaptureUserIntentHack",value:(n=F(D().mark((function t(){var e;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=soundManager.createSound({url:W[this.audioFormat]}),t.next=3,new Promise((function(t){return e.play({onfinish:t})}));case 3:e.destruct();case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],[{key:"isSupported",value:function(){return"undefined"!=typeof soundManager&&soundManager.supported()}}]);var n}(I),Z=function(){return N((function t(e){j(this,t),this.soundUrl=e,this.sound=null,this.rate=1,this._finishResolver=null}),[{key:"loaded",get:function(){return this.sound&&this.sound.loaded}},{key:"load",value:function(t){var e,n=this;return this.sound=soundManager.createSound({url:this.soundUrl,onload:function(){1!=n.rate&&n.sound.setPlaybackRate(n.rate),t()},onresume:(e=F(D().mark((function t(){return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,T.sleep)(25);case 2:1!=n.rate&&n.sound.setPlaybackRate(n.rate);case 3:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}),this.sound.load()}},{key:"play",value:(t=F(D().mark((function t(){var e=this;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){e._finishResolver=t,e.sound.play({onfinish:t})}));case 2:this.sound.destruct();case 3:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"stop",value:function(){return this.sound.stop(),Promise.resolve()}},{key:"pause",value:function(){this.sound.pause()}},{key:"resume",value:function(){this.sound.resume()}},{key:"setPlaybackRate",value:function(t){this.rate=t,this.sound.setPlaybackRate(t)}},{key:"finish",value:function(){this.sound.stop(),this._finishResolver()}}]);var t}(),W={mp3:"data:audio/mp3;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAAAeTEFNRTMuOTlyBJwAAAAAAAAAADUgJAaUQQABrgAAAnHIf8sZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADwlwBKGAAACAAAD/AAAAEAAAAH///////////////+UBAMExBTUUzLjk5LjOqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xDEIAPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",ogg:"data:audio/ogg;base64,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"},X=n(542);function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function $(){$=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new P(r||[]);return o(a,"_invoke",{value:S(t,n,s)}),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",p="executing",y="completed",m={};function g(){}function v(){}function A(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(E([])));k&&k!==n&&r.call(k,a)&&(b=k);var _=A.prototype=g.prototype=Object.create(b);function V(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(o,i,a,s){var u=h(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==J(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,n,r){var o=f;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=x(s,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var l=h(e,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function x(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=h(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function E(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(J(e)+" is not iterable")}return v.prototype=A,o(_,"constructor",{value:A,configurable:!0}),o(A,"constructor",{value:v,configurable:!0}),v.displayName=l(A,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,A):(t.__proto__=A,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},V(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new O(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},V(_),l(_,u,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=E,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:E(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function tt(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function et(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){tt(i,r,o,a,s,"next",t)}function s(t){tt(i,r,o,a,s,"throw",t)}a(void 0)}))}}function nt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,it(r.key),r)}}function ot(t,e,n){return e&&rt(t.prototype,e),n&&rt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function it(t){var e=function(t,e){if("object"!=J(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==J(e)?e:e+""}function at(t,e,n){return e=lt(e),function(t,e){if(e&&("object"==J(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,st()?Reflect.construct(e,n||[],lt(t).constructor):e.apply(t,n))}function st(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(st=function(){return!!t})()}function ut(){return ut="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=lt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},ut.apply(null,arguments)}function lt(t){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lt(t)}function ct(t,e){return ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ct(t,e)}var ht,ft=function(t){function e(t){var n;return nt(this,e),n=at(this,e,[t]),speechSynthesis.addEventListener&&speechSynthesis.addEventListener("voiceschanged",(function(){return n.events.trigger("voiceschanged")})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ct(t,e)}(e,t),ot(e,[{key:"start",value:function(t,n){var r,o,i,a=this;if("mediaSession"in navigator){var s=new Audio(pt);s.loop=!0,this.events.on("pause",(function(){return s.pause()})),this.events.on("resume",(function(){return s.play()})),this.events.on("stop",(function(){return s.src=""})),s.play().then((function(){navigator.mediaSession.metadata=new MediaMetadata({title:br.bookTitle,artist:br.options.metadata.filter((function(t){return"Author"==t.label})).map((function(t){return t.value}))[0],artwork:[{src:br.options.thumbnail,type:"image/jpg"}]}),navigator.mediaSession.setActionHandler("play",(function(){s.play(),a.resume()})),navigator.mediaSession.setActionHandler("pause",(function(){s.pause(),a.pause()})),navigator.mediaSession.setActionHandler("previoustrack",(function(){return a.jumpBackward()})),navigator.mediaSession.setActionHandler("nexttrack",(function(){return a.jumpForward()}))}))}return(r=e,o=this,"function"==typeof(i=ut(lt(1&3?r.prototype:r),"start",o))?function(t){return i.apply(o,t)}:i)([t,n])}},{key:"getVoices",value:function(){var t=speechSynthesis.getVoices();return 1!=t.filter((function(t){return t.default})).length&&t.unshift({voiceURI:"bookreader.SystemDefault",name:"System Default",lang:navigator.language,default:!0,localService:!0}),t}},{key:"createSound",value:function(t){return new dt(t.text)}}],[{key:"isSupported",value:function(){return void 0!==window.speechSynthesis&&!/samsungbrowser/i.test(navigator.userAgent)}}])}(I),dt=function(){return ot((function t(e){nt(this,t),this.text=e,this.loaded=!1,this.paused=!1,this.started=!1,this.stopped=!1,this.rate=1,this.utterance=null,this.voice=null,this._lastEvents={pause:null,boundary:null,start:null},this._charIndex=0,this._finishResolver=null,this._finishPromise=null}),[{key:"load",value:function(t){var e,n=this;this.loaded=!1,this.started=!1,this.utterance=new SpeechSynthesisUtterance(this.text.slice(this._charIndex)),"bookreader.SystemDefault"!==(null===(e=this.voice)||void 0===e?void 0:e.voiceURI)&&(this.utterance.voice=this.voice),this.voice&&(this.utterance.lang=this.voice.lang),this.utterance.rate=this.rate,-1!=location.toString().indexOf("_debugReadAloud=true")&&(this.utterance.addEventListener("pause",(function(){return console.log("pause")})),this.utterance.addEventListener("resume",(function(){return console.log("resume")})),this.utterance.addEventListener("start",(function(){return console.log("start")})),this.utterance.addEventListener("end",(function(){return console.log("end")})),this.utterance.addEventListener("error",(function(){return console.log("error")})),this.utterance.addEventListener("boundary",(function(){return console.log("boundary")})),this.utterance.addEventListener("mark",(function(){return console.log("mark")})),this.utterance.addEventListener("finish",(function(){return console.log("finish")}))),this.utterance.addEventListener("start",(function(t){return n._lastEvents.start=t})),this.utterance.addEventListener("boundary",(function(t){return n._lastEvents.boundary=t})),this.utterance.addEventListener("pause",(function(t){return n._lastEvents.pause=t})),this.utterance.addEventListener("start",(function(){n.started=!0,n.stopped=!1,n.paused=!1})),this.utterance.addEventListener("pause",(function(){return n.paused=!0})),this.utterance.addEventListener("resume",(function(){return n.paused=!1})),this.utterance.addEventListener("end",(function(t){n.paused||n.stopped||n.utterance.dispatchEvent(new CustomEvent("finish",t))})),this.loaded=!0,t&&t()}},{key:"reload",value:(o=et($().mark((function t(){var e,n;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.paused,(n=this._lastEvents.boundary||this._lastEvents.pause)&&(this._charIndex=this.text.indexOf(n.target.text)+n.charIndex),t.next=5,this.stop();case 5:this.load(),e||this.play();case 7:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"play",value:function(){var t=this;this._finishPromise=this._finishPromise||new Promise((function(e){return t._finishResolver=e})),this.utterance.addEventListener("finish",this._finishResolver),speechSynthesis.cancel(),speechSynthesis.resume(),speechSynthesis.speak(this.utterance);var e=this.utterance.voice&&this.utterance.voice.localService;return(0,X.H8)()&&!e&&this._chromePausingBugFix(),this._finishPromise}},{key:"stop",value:function(){var t=Promise.resolve();return this.stopped||(t=Promise.race([(0,T.promisifyEvent)(this.utterance,"end"),(0,T.promisifyEvent)(this.utterance,"error")])),this.stopped=!0,speechSynthesis.cancel(),t}},{key:"finish",value:(r=et($().mark((function t(){return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.stop();case 2:this.utterance.dispatchEvent(new Event("finish"));case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"pause",value:(n=et($().mark((function t(){var e,n,r;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.paused){t.next=2;break}return t.abrupt("return");case 2:if(e=(0,T.promisifyEvent)(this.utterance,"pause"),speechSynthesis.pause(),n=(0,X.gm)()&&b(),!(0,X.H8)()&&!n){t.next=15;break}return r=(0,T.sleep)(100).then((function(){return"timeout"})),t.next=10,Promise.race([e,r]);case 10:if("timeout"==t.sent){t.next=13;break}return t.abrupt("return");case 13:this.utterance.dispatchEvent(new CustomEvent("pause",this._lastEvents.start)),n&&this.stop();case 15:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"resume",value:(e=et($().mark((function t(){var e,n,r;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.started){t.next=3;break}return this.play(),t.abrupt("return");case 3:if(this.paused){t.next=5;break}return t.abrupt("return");case 5:if(e=(0,X.H8)()&&b()||(0,X.gm)()&&b(),n=(0,X.H8)()||e,r=(0,T.promisifyEvent)(this.utterance,"resume"),speechSynthesis.resume(),!n){t.next=20;break}return t.next=12,Promise.race([r,(0,T.sleep)(100).then((function(){return"timeout"}))]);case 12:if("timeout"==t.sent){t.next=15;break}return t.abrupt("return");case 15:if(this.utterance.dispatchEvent(new CustomEvent("resume",{})),!e){t.next=20;break}return t.next=19,this.reload();case 19:this.play();case 20:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"setPlaybackRate",value:function(t){this.rate=t,this.reload()}},{key:"setVoice",value:function(t){this.voice=t,this.reload()}},{key:"_chromePausingBugFix",value:(t=et($().mark((function t(){var e,n,r,o;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,T.sleep)(14e3).then((function(){return"timeout"})),n=(0,T.promisifyEvent)(this.utterance,"pause").then((function(){return"paused"})),r=(0,T.promisifyEvent)(this.utterance,"end").then((function(){return"ended"})),t.next=5,Promise.race([e,n,r]);case 5:o=t.sent,-1!=location.toString().indexOf("_debugReadAloud=true")&&console.log("CHROME-PAUSE-HACK: ".concat(o)),t.t0=o,t.next="ended"===t.t0?10:"paused"===t.t0?11:"timeout"===t.t0?15:21;break;case 10:return t.abrupt("break",21);case 11:return t.next=13,Promise.race([(0,T.promisifyEvent)(this.utterance,"resume"),(0,T.sleep)(14e3).then((function(){return"timeout"}))]);case 13:return"timeout"==o?this.reload():this._chromePausingBugFix(),t.abrupt("break",21);case 15:return speechSynthesis.pause(),t.next=18,(0,T.sleep)(25);case 18:return speechSynthesis.resume(),this._chromePausingBugFix(),t.abrupt("break",21);case 21:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t,e,n,r,o}(),pt="data:audio/mp3;base64,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",yt="Read this book aloud",mt=n(1774),gt=n(1669),vt=n(1669);function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function bt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return wt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function kt(){kt=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new P(r||[]);return o(a,"_invoke",{value:S(t,n,s)}),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",p="executing",y="completed",m={};function g(){}function v(){}function A(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(E([])));k&&k!==n&&r.call(k,a)&&(b=k);var _=A.prototype=g.prototype=Object.create(b);function V(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(o,i,a,s){var u=h(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==At(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,n,r){var o=f;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=x(s,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var l=h(e,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function x(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=h(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function E(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(At(e)+" is not iterable")}return v.prototype=A,o(_,"constructor",{value:A,configurable:!0}),o(A,"constructor",{value:v,configurable:!0}),v.displayName=l(A,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,A):(t.__proto__=A,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},V(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new O(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},V(_),l(_,u,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=E,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:E(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function _t(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function Vt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){_t(i,r,o,a,s,"next",t)}function s(t){_t(i,r,o,a,s,"throw",t)}a(void 0)}))}}gt.extend(BookReader.defaultOptions,{server:"ia600609.us.archive.org",bookPath:"",enableTtsPlugin:!0}),BookReader.prototype.setup=(ht=BookReader.prototype.setup,function(t){if(ht.call(this,t),this.options.enableTtsPlugin){this._ttsBoxesByIndex={};var e=ft.isSupported()?ft:K.isSupported()?K:null;if(/_forceTTSEngine=(festival|web)/.test(location.toString())){var n=location.toString().match(/_forceTTSEngine=(festival|web)/)[1];e={festival:K,web:ft}[n]}e&&(this.ttsEngine=new e({server:t.server,bookPath:t.bookPath,bookLanguage:(r=t.bookLanguage,r?k(r=r.toLowerCase(),["ISO 639-1"])||k(r,["ISO 639-2/B"])||k(r,["ISO 639-2/T","Endonym","Name"]):null),onLoadingStart:this.showProgressPopup.bind(this,"Loading audio..."),onLoadingComplete:this.removeProgressPopup.bind(this),onDone:this.ttsStop.bind(this),beforeChunkPlay:this.ttsBeforeChunkPlay.bind(this),afterChunkPlay:this.ttsSendChunkFinishedAnalyticsEvent.bind(this)}))}var r}),BookReader.prototype.init=function(t){return function(){var e=this;this.options.enableTtsPlugin&&this.bind(BookReader.eventNames.PostInit,(function(){e.$(".BRicon.read").click((function(){return e.ttsToggle(),!1})),e.ttsEngine&&(e.ttsEngine.init(),/[?&]_autoReadAloud=show/.test(location.toString())&&e.ttsStart(!1))})),t.call(this)}}(BookReader.prototype.init),BookReader.prototype._createPageContainer=function(t){return function(e){var n=t.call(this,e);if(this.options.enableTtsPlugin&&n.page&&e in this._ttsBoxesByIndex){var r=n.page.index;(0,mt.KL)("ttsHiliteLayer",this._ttsBoxesByIndex[r],n.page,n.$container[0])}return n}}(BookReader.prototype._createPageContainer),BookReader.prototype.buildMobileDrawerElement=function(t){return function(){var e=t.call(this);return this.options.enableTtsPlugin&&this.ttsEngine&&e.find(".BRmobileMenu__moreInfoRow").after(vt('\n        <li>\n            <span>\n                <span class="DrawerIconWrapper"><img class="DrawerIcon" src="'.concat(this.imagesBaseURL,'icon_speaker_open.svg" alt="info-speaker"/></span>\n                Read Aloud\n            </span>\n            <div>\n                <span class="larger">Press to toggle read aloud</span>\n                <br/>\n                <button class="BRicon read"></button>\n            </div>\n        </li>'))),e}}(BookReader.prototype.buildMobileDrawerElement),BookReader.prototype.initNavbar=function(t){return function(){var e=this,n=t.call(this);if(this.options.enableTtsPlugin&&this.ttsEngine){this.refs.$BRReadAloudToolbar=vt('\n        <ul class="read-aloud">\n          <li>\n            <select class="playback-speed" name="playback-speed" title="'.concat("Playback speed",'">\n              <option value="0.25">0.25x</option>\n              <option value="0.5">0.5x</option>\n              <option value="0.75">0.75x</option>\n              <option value="1.0" selected>1.0x</option>\n              <option value="1.25">1.25x</option>\n              <option value="1.5">1.5x</option>\n              <option value="1.75">1.75x</option>\n              <option value="2">2x</option>\n            </select>\n          </li>\n          <li>\n            <button type="button" name="review" title="').concat("Review 10 seconds",'">\n              <div class="icon icon-review"></div>\n            </button>\n          </li>\n          <li>\n            <button type="button" name="play" title="').concat("Play",'">\n              <div class="icon icon-play"></div>\n              <div class="icon icon-pause"></div>\n            </button>\n          </li>\n          <li>\n            <button type="button" name="advance" title="').concat("Advance 10 seconds",'">\n              <div class="icon icon-advance"></div>\n            </button>\n          </li>\n          <li>\n            <select class="playback-voices" name="playback-voice" style="display: none" title="Change read aloud voices">\n            </select>\n          </li>\n        </ul>\n      ')),n.find(".BRcontrols").prepend(this.refs.$BRReadAloudToolbar);var r=function(t){return t.map((function(t){return'<option value="'.concat(t.voiceURI,'">').concat(t.lang," - ").concat(t.name,"</option>")})).join("")},o=function(t,e){return"".concat(t.lang," - ").concat(t.name).localeCompare("".concat(e.lang," - ").concat(e.name))},i=function(t){t.empty();var n=e.ttsEngine.opts.bookLanguage,i=e.ttsEngine.getVoices().filter((function(t){return t.lang.startsWith(n)})).sort(o),a=e.ttsEngine.getVoices().filter((function(t){return!t.lang.startsWith(n)})).sort(o);e.ttsEngine.getVoices().length>1?(t.append(vt('<optgroup label="Book Language ('.concat(n,')"> ').concat(r(i)," </optgroup>"))),t.append(vt('<optgroup label="Other Languages"> '.concat(r(a)," </optgroup>"))),t.val(e.ttsEngine.voice.voiceURI),t.show()):t.hide()},a=this.refs.$BRReadAloudToolbar.find("[name=playback-voice]");i(a),a.on("change",(function(t){return e.ttsEngine.setVoice(a.val())})),this.ttsEngine.events.on("pause resume start",(function(){return e.ttsUpdateState()})),this.ttsEngine.events.on("voiceschanged",(function(){return i(a)})),this.refs.$BRReadAloudToolbar.find("[name=play]").on("click",this.ttsPlayPause.bind(this)),this.refs.$BRReadAloudToolbar.find("[name=advance]").on("click",this.ttsJumpForward.bind(this)),this.refs.$BRReadAloudToolbar.find("[name=review]").on("click",this.ttsJumpBackward.bind(this));var s=this.refs.$BRReadAloudToolbar.find('select[name="playback-speed"]');s.on("change",(function(t){return e.ttsEngine.setPlaybackRate(parseFloat(s.val()))})),vt('<li>\n          <button class="BRicon read js-tooltip" title="'.concat(yt,'">\n            <div class="icon icon-read-aloud"></div>\n            <span class="BRtooltip">').concat(yt,"</span>\n          </button>\n        </li>")).insertBefore(n.find(".BRcontrols .BRicon.zoom_out").closest("li"))}return n}}(BookReader.prototype.initNavbar),BookReader.prototype.ttsToggle=function(){this.autoStop&&this.autoStop(),this.ttsEngine.playing?this.ttsStop():this.ttsStart()},BookReader.prototype.ttsStart=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.constModeThumb==this.mode&&this.switchMode(this.constMode1up),this.refs.$BRReadAloudToolbar.addClass("visible"),this.$(".BRicon.read").addClass("unread active"),this.ttsSendAnalyticsEvent("Start"),t&&this.ttsEngine.start(this.currentIndex(),this.book.getNumLeafs())},BookReader.prototype.ttsJumpForward=function(){this.ttsEngine.paused&&this.ttsEngine.resume(),this.ttsEngine.jumpForward()},BookReader.prototype.ttsJumpBackward=function(){this.ttsEngine.paused&&this.ttsEngine.resume(),this.ttsEngine.jumpBackward()},BookReader.prototype.ttsUpdateState=function(){var t=!(this.ttsEngine.paused||!this.ttsEngine.playing);this.$(".read-aloud [name=play]").toggleClass("playing",t)},BookReader.prototype.ttsPlayPause=function(){this.ttsEngine.playing?(this.ttsEngine.togglePlayPause(),this.ttsUpdateState()):this.ttsToggle()},BookReader.prototype.ttsStop=function(){this.refs.$BRReadAloudToolbar.removeClass("visible"),this.$(".BRicon.read").removeClass("unread active"),this.ttsSendAnalyticsEvent("Stop"),this.ttsEngine.stop(),this.ttsRemoveHilites(),this.removeProgressPopup()},BookReader.prototype.ttsBeforeChunkPlay=function(){var t=Vt(kt().mark((function t(e){return kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ttsMaybeFlipToIndex(e.leafIndex);case 2:this.ttsHighlightChunk(e),this.ttsScrollToChunk(e);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),BookReader.prototype.ttsSendChunkFinishedAnalyticsEvent=function(t){var e;this.ttsSendAnalyticsEvent("ChunkFinished-Words",(e=t.text.match(/\S+/g))?e.length:0)},BookReader.prototype.ttsMaybeFlipToIndex=function(){var t=Vt(kt().mark((function t(e){return kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.constMode2up==this.mode){t.next=4;break}this.jumpToIndex(e),t.next=6;break;case 4:return t.next=6,this._modes.mode2Up.mode2UpLit.jumpToIndex(e);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),BookReader.prototype.ttsHighlightChunk=function(t){var e,n,r,o=this,i=t.leafIndex;this.ttsRemoveHilites(),this._ttsBoxesByIndex=(e={},n=i,r=t.lineRects.map((function(t){var e=bt(t,4),n=e[0],r=e[1];return{l:n,r:e[2],b:r,t:e[3]}})),(n=function(t){var e=function(t,e){if("object"!=At(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=At(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==At(e)?e:e+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e);for(var a=function(){var t=bt(u[s],2),e=t[0],n=t[1],r=parseFloat(e),i=o.book.getPage(r);o.getActivePageContainerElementsForIndex(r).forEach((function(t){return(0,mt.KL)("ttsHiliteLayer",n,i,t)}))},s=0,u=Object.entries(this._ttsBoxesByIndex);s<u.length;s++)a()},BookReader.prototype.ttsScrollToChunk=function(t){var e;this.constModeThumb!=this.mode&&(null===(e=vt(".pagediv".concat(t.leafIndex," .ttsHiliteLayer rect")).last())||void 0===e||null===(e=e[0])||void 0===e||e.scrollIntoView({block:this.constMode1up==this.mode||this.isFullscreenActive?"center":"nearest",inline:"center",behavior:"smooth"}))},BookReader.prototype.ttsRemoveHilites=function(){vt(this.getActivePageContainerElements()).find(".ttsHiliteLayer").remove(),this._ttsBoxesByIndex={}},BookReader.prototype.ttsSendAnalyticsEvent=function(t,e){if(this.archiveAnalyticsSendEvent){var n={},r=this.ttsEngine.opts.bookLanguage;r&&(n.mediaLanguage=r),this.archiveAnalyticsSendEvent("BRReadAloud",t,e,n)}}},4031:function(t,e){"use strict";e.A=void 0,e.A=[["Serbian","српски језик","sr","srp","srp"],["Romanian, Moldavian, Moldovan","Română","ro","ron","rum"],["Sichuan Yi, Nuosu","ꆈꌠ꒿ Nuosuhxop","ii","iii","iii"],["Tahitian","Reo Tahiti","ty","tah","tah"],["Tagalog","Wikang Tagalog","tl","tgl","tgl"],["Yiddish","ייִדיש","yi","yid","yid"],["Akan","Akan","ak","aka","aka"],["Malay","Bahasa Melayu, بهاس ملايو‎","ms","msa","may"],["Arabic","العربية","ar","ara","ara"],["Norwegian","Norsk","no","nor","nor"],["Ojibwa","ᐊᓂᔑᓈᐯᒧᐎᓐ","oj","oji","oji"],["Fulah","Fulfulde, Pulaar, Pular","ff","ful","ful"],["Persian","فارسی","fa","fas","per"],["Albanian","Shqip","sq","sqi","alb"],["Aymara","aymar aru","ay","aym","aym"],["Azerbaijani","azərbaycan dili","az","aze","aze"],["Chinese","中文 (Zhōngwén), 汉语, 漢語","zh","zho","chi"],["Cree","ᓀᐦᐃᔭᐍᐏᐣ","cr","cre","cre"],["Estonian","eesti, eesti keel","et","est","est"],["Guaraní","Avañe'ẽ","gn","grn","grn"],["Inupiaq","Iñupiaq, Iñupiatun","ik","ipk","ipk"],["Inuktitut","ᐃᓄᒃᑎᑐᑦ","iu","iku","iku"],["Kanuri","Kanuri","kr","kau","kau"],["Komi","коми кыв","kv","kom","kom"],["Kongo","Kikongo","kg","kon","kon"],["Kurdish","Kurdî, کوردی‎","ku","kur","kur"],["Latvian","latviešu valoda","lv","lav","lav"],["Malagasy","fiteny malagasy","mg","mlg","mlg"],["Mongolian","Монгол хэл","mn","mon","mon"],["Oromo","Afaan Oromoo","om","orm","orm"],["Pashto, Pushto","پښتو","ps","pus","pus"],["Quechua","Runa Simi, Kichwa","qu","que","que"],["Sardinian","sardu","sc","srd","srd"],["Swahili","Kiswahili","sw","swa","swa"],["Uzbek","Oʻzbek, Ўзбек, أۇزبېك‎","uz","uzb","uzb"],["Zhuang, Chuang","Saɯ cueŋƅ, Saw cuengh","za","zha","zha"],["Bislama","Bislama","bi","bis","bis"],["Norwegian Bokmål","Norsk Bokmål","nb","nob","nob"],["Norwegian Nynorsk","Norsk Nynorsk","nn","nno","nno"],["Indonesian","Bahasa Indonesia","id","ind","ind"],["Twi","Twi","tw","twi","twi"],["Esperanto","Esperanto","eo","epo","epo"],["Interlingua","Interlingua","ia","ina","ina"],["Interlingue","Originally called Occidental; then Interlingue after WWII","ie","ile","ile"],["Ido","Ido","io","ido","ido"],["Volapük","Volapük","vo","vol","vol"],["Bihari languages","भोजपुरी","bh","bih","bih"],["Hebrew (modern)","עברית","he","heb","heb"],["Sanskrit","संस्कृतम्","sa","san","san"],["Church Slavic, Church Slavonic, Old Church Slavonic, Old Slavonic, Old Bulgarian","ѩзыкъ словѣньскъ","cu","chu","chu"],["Pali","पाऴि","pi","pli","pli"],["Avestan","avesta","ae","ave","ave"],["Latin","latine, lingua latina","la","lat","lat"],["Armenian","Հայերեն","hy","hye","arm"],["Swati","SiSwati","ss","ssw","ssw"],["Tibetan","བོད་ཡིག","bo","bod","tib"],["South Ndebele","isiNdebele","nr","nbl","nbl"],["Slovene","Slovenski Jezik, Slovenščina","sl","slv","slv"],["Oriya","ଓଡ଼ିଆ","or","ori","ori"],["North Ndebele","isiNdebele","nd","nde","nde"],["Nauru","Dorerin Naoero","na","nau","nau"],["Maori","te reo Māori","mi","mri","mao"],["Marathi","मराठी","mr","mar","mar"],["Luba-Katanga","Kiluba","lu","lub","lub"],["Rundi","Ikirundi","rn","run","run"],["Central Khmer","ខ្មែរ, ខេមរភាសា, ភាសាខ្មែរ","km","khm","khm"],["Western Frisian","Frysk","fy","fry","fry"],["Bengali","বাংলা","bn","ben","ben"],["Avaric","авар мацӀ, магӀарул мацӀ","av","ava","ava"],["Abkhazian","аҧсуа бызшәа, аҧсшәа","ab","abk","abk"],["Afar","Afaraf","aa","aar","aar"],["Afrikaans","Afrikaans","af","afr","afr"],["Amharic","አማርኛ","am","amh","amh"],["Aragonese","aragonés","an","arg","arg"],["Assamese","অসমীয়া","as","asm","asm"],["Bambara","bamanankan","bm","bam","bam"],["Bashkir","башҡорт теле","ba","bak","bak"],["Basque","euskara, euskera","eu","eus","baq"],["Belarusian","беларуская мова","be","bel","bel"],["Bosnian","bosanski jezik","bs","bos","bos"],["Breton","brezhoneg","br","bre","bre"],["Bulgarian","български език","bg","bul","bul"],["Burmese","ဗမာစာ","my","mya","bur"],["Catalan, Valencian","català, valencià","ca","cat","cat"],["Chamorro","Chamoru","ch","cha","cha"],["Chechen","нохчийн мотт","ce","che","che"],["Chichewa, Chewa, Nyanja","chiCheŵa, chinyanja","ny","nya","nya"],["Chuvash","чӑваш чӗлхи","cv","chv","chv"],["Cornish","Kernewek","kw","cor","cor"],["Corsican","corsu, lingua corsa","co","cos","cos"],["Croatian","hrvatski jezik","hr","hrv","hrv"],["Czech","čeština, český jazyk","cs","ces","cze"],["Danish","dansk","da","dan","dan"],["Divehi, Dhivehi, Maldivian","ދިވެހި","dv","div","div"],["Dutch, Flemish","Nederlands, Vlaams","nl","nld","dut"],["Dzongkha","རྫོང་ཁ","dz","dzo","dzo"],["English","English","en","eng","eng"],["Ewe","Eʋegbe","ee","ewe","ewe"],["Faroese","føroyskt","fo","fao","fao"],["Fijian","vosa Vakaviti","fj","fij","fij"],["Finnish","suomi, suomen kieli","fi","fin","fin"],["French","français, langue française","fr","fra","fre"],["Galician","Galego","gl","glg","glg"],["Georgian","ქართული","ka","kat","geo"],["German","Deutsch","de","deu","ger"],["Greek (modern)","ελληνικά","el","ell","gre"],["Gujarati","ગુજરાતી","gu","guj","guj"],["Haitian, Haitian Creole","Kreyòl ayisyen","ht","hat","hat"],["Hausa","(Hausa) هَوُسَ","ha","hau","hau"],["Herero","Otjiherero","hz","her","her"],["Hindi","हिन्दी, हिंदी","hi","hin","hin"],["Hiri Motu","Hiri Motu","ho","hmo","hmo"],["Hungarian","magyar","hu","hun","hun"],["Irish","Gaeilge","ga","gle","gle"],["Igbo","Asụsụ Igbo","ig","ibo","ibo"],["Icelandic","Íslenska","is","isl","ice"],["Italian","Italiano","it","ita","ita"],["Japanese","日本語 (にほんご)","ja","jpn","jpn"],["Javanese","ꦧꦱꦗꦮ, Basa Jawa","jv","jav","jav"],["Kalaallisut, Greenlandic","kalaallisut, kalaallit oqaasii","kl","kal","kal"],["Kannada","ಕನ್ನಡ","kn","kan","kan"],["Kashmiri","कश्मीरी, كشميري‎","ks","kas","kas"],["Kazakh","қазақ тілі","kk","kaz","kaz"],["Kikuyu, Gikuyu","Gĩkũyũ","ki","kik","kik"],["Kinyarwanda","Ikinyarwanda","rw","kin","kin"],["Kirghiz, Kyrgyz","Кыргызча, Кыргыз тили","ky","kir","kir"],["Korean","한국어","ko","kor","kor"],["Kuanyama, Kwanyama","Kuanyama","kj","kua","kua"],["Luxembourgish, Letzeburgesch","Lëtzebuergesch","lb","ltz","ltz"],["Ganda","Luganda","lg","lug","lug"],["Limburgan, Limburger, Limburgish","Limburgs","li","lim","lim"],["Lingala","Lingála","ln","lin","lin"],["Lao","ພາສາລາວ","lo","lao","lao"],["Lithuanian","lietuvių kalba","lt","lit","lit"],["Manx","Gaelg, Gailck","gv","glv","glv"],["Macedonian","македонски јазик","mk","mkd","mac"],["Malayalam","മലയാളം","ml","mal","mal"],["Maltese","Malti","mt","mlt","mlt"],["Marshallese","Kajin M̧ajeļ","mh","mah","mah"],["Navajo, Navaho","Diné bizaad","nv","nav","nav"],["Nepali","नेपाली","ne","nep","nep"],["Ndonga","Owambo","ng","ndo","ndo"],["Occitan","occitan, lenga d'òc","oc","oci","oci"],["Ossetian, Ossetic","ирон æвзаг","os","oss","oss"],["Panjabi, Punjabi","ਪੰਜਾਬੀ","pa","pan","pan"],["Polish","język polski, polszczyzna","pl","pol","pol"],["Portuguese","Português","pt","por","por"],["Romansh","Rumantsch Grischun","rm","roh","roh"],["Russian","русский","ru","rus","rus"],["Sindhi","सिन्धी, سنڌي، سندھی‎","sd","snd","snd"],["Northern Sami","Davvisámegiella","se","sme","sme"],["Samoan","gagana fa'a Samoa","sm","smo","smo"],["Sango","yângâ tî sängö","sg","sag","sag"],["Gaelic, Scottish Gaelic","Gàidhlig","gd","gla","gla"],["Shona","chiShona","sn","sna","sna"],["Sinhala, Sinhalese","සිංහල","si","sin","sin"],["Slovak","Slovenčina, Slovenský Jazyk","sk","slk","slo"],["Somali","Soomaaliga, af Soomaali","so","som","som"],["Southern Sotho","Sesotho","st","sot","sot"],["Spanish, Castilian","Español","es","spa","spa"],["Sundanese","Basa Sunda","su","sun","sun"],["Swedish","Svenska","sv","swe","swe"],["Tamil","தமிழ்","ta","tam","tam"],["Telugu","తెలుగు","te","tel","tel"],["Tajik","тоҷикӣ, toçikī, تاجیکی‎","tg","tgk","tgk"],["Thai","ไทย","th","tha","tha"],["Tigrinya","ትግርኛ","ti","tir","tir"],["Turkmen","Türkmen, Түркмен","tk","tuk","tuk"],["Tswana","Setswana","tn","tsn","tsn"],["Tongan (Tonga Islands)","Faka Tonga","to","ton","ton"],["Turkish","Türkçe","tr","tur","tur"],["Tsonga","Xitsonga","ts","tso","tso"],["Tatar","татар теле, tatar tele","tt","tat","tat"],["Uighur, Uyghur","ئۇيغۇرچە‎, Uyghurche","ug","uig","uig"],["Ukrainian","Українська","uk","ukr","ukr"],["Urdu","اردو","ur","urd","urd"],["Venda","Tshivenḓa","ve","ven","ven"],["Vietnamese","Tiếng Việt","vi","vie","vie"],["Walloon","Walon","wa","wln","wln"],["Welsh","Cymraeg","cy","cym","wel"],["Wolof","Wollof","wo","wol","wol"],["Xhosa","isiXhosa","xh","xho","xho"],["Yoruba","Yorùbá","yo","yor","yor"],["Zulu","isiZulu","zu","zul","zul"]]},1792:function(t,e,n){var r,o;r=[n(1669)],void 0===(o=function(t){return function(t){"use strict";function e(t){void 0===t&&(t=window.navigator.userAgent),t=t.toLowerCase();var e=/(edge)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(iemobile)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],n=/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[],r={},o={browser:e[5]||e[3]||e[1]||"",version:e[2]||e[4]||"0",versionNumber:e[4]||e[2]||"0",platform:n[0]||""};if(o.browser&&(r[o.browser]=!0,r.version=o.version,r.versionNumber=parseInt(o.versionNumber,10)),o.platform&&(r[o.platform]=!0),(r.android||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"])&&(r.mobile=!0),(r.cros||r.mac||r.linux||r.win)&&(r.desktop=!0),(r.chrome||r.opr||r.safari)&&(r.webkit=!0),r.rv||r.iemobile){var i="msie";o.browser=i,r[i]=!0}if(r.edge){delete r.edge;var a="msedge";o.browser=a,r[a]=!0}if(r.safari&&r.blackberry){var s="blackberry";o.browser=s,r[s]=!0}if(r.safari&&r.playbook){var u="playbook";o.browser=u,r[u]=!0}if(r.bb){var l="blackberry";o.browser=l,r[l]=!0}if(r.opr){var c="opera";o.browser=c,r[c]=!0}if(r.safari&&r.android){var h="android";o.browser=h,r[h]=!0}if(r.safari&&r.kindle){var f="kindle";o.browser=f,r[f]=!0}if(r.safari&&r.silk){var d="silk";o.browser=d,r[d]=!0}return r.name=o.browser,r.platform=o.platform,r}return window.jQBrowser=e(window.navigator.userAgent),window.jQBrowser.uaMatch=e,t&&(t.browser=window.jQBrowser),window.jQBrowser}(t)}.apply(e,r))||(t.exports=o)},2443:function(t,e,n){var r;t=n.nmd(t),function(o,i){"use strict";if(!o||!o.document)throw new Error("SoundManager requires a browser with window and document objects.");var a=null;function s(t,e){this.setupOptions={url:t||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,ignoreMobileRestrictions:!1,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onerror:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,playbackRate:1,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={onfailure:null,isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1},flac:{type:["audio/flac"],required:!1}},this.movieID="sm2-container",this.id=e||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20170601",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var n,r,a,s,u,l,c,h,f,d,p,y,m,g,v,A,b,w,k,_,V,O,S,x,L,M,P,E,I,T,q,R,D,C,F,j,B,N,U,H,Y,Q,G,z,K,Z,W,X,J,$,tt,et,nt,rt,ot,it,at,st,ut,lt,ct,ht,ft,dt,pt,yt=this,mt=null,gt=null,vt="soundManager",At=vt+": ",bt=navigator.userAgent,wt=o.location.href.toString(),kt=document,_t=[],Vt=!0,Ot=!1,St=!1,xt=!1,Lt=!1,Mt=!1,Pt=0,Et=["log","info","warn","error"],It=null,Tt=null,qt=!1,Rt=!1,Dt=0,Ct=null,Ft=[],jt=null,Bt=Array.prototype.slice,Nt=!1,Ut=0,Ht=1e3,Yt=bt.match(/(ipad|iphone|ipod)/i),Qt=bt.match(/android/i),Gt=bt.match(/msie|trident/i),zt=bt.match(/webkit/i),Kt=bt.match(/safari/i)&&!bt.match(/chrome/i),Zt=bt.match(/opera/i),Wt=bt.match(/(mobile|pre\/|xoom)/i)||Yt||Qt,Xt=!wt.match(/usehtml5audio/i)&&!wt.match(/sm2-ignorebadua/i)&&Kt&&!bt.match(/silk/i)&&bt.match(/OS\sX\s10_6_([3-7])/i),Jt=o.console!==i&&console.log!==i,$t=kt.hasFocus!==i?kt.hasFocus():null,te=Kt&&(kt.hasFocus===i||!kt.hasFocus()),ee=!te,ne=/(mp3|mp4|mpa|m4a|m4b)/i,re="about:blank",oe=kt.location?kt.location.protocol.match(/http/i):null,ie=oe?"":"//",ae=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4|m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,se=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],ue=new RegExp("\\.("+se.join("|")+")(\\?.*)?$","i");function le(t){return yt.preferFlash&&st&&!yt.ignoreFlash&&yt.flash[t]!==i&&yt.flash[t]}function ce(t){return function(e){var n,r=this._s;return r&&r._a?n=t.call(this,e):(r&&r.id?yt._wD(r.id+": Ignoring "+e.type):yt._wD("HTML5::Ignoring "+e.type),n=null),n}}this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!oe,B={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},tt=[null,"MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"],this.hasHTML5=function(){try{return Audio!==i&&(Zt&&opera!==i&&opera.version()<10?new Audio(null):new Audio).canPlayType!==i}catch(t){return!1}}(),this.setup=function(t){var e=!yt.url;return t!==i&&xt&&jt&&yt.ok()&&(t.flashVersion!==i||t.url!==i||t.html5Test!==i)&&Y(C("setupLate")),p(t),Nt||(Wt?yt.setupOptions.ignoreMobileRestrictions&&!yt.setupOptions.forceUseGlobalHTML5Audio||(Ft.push(V.globalHTML5),Nt=!0):yt.setupOptions.forceUseGlobalHTML5Audio&&(Ft.push(V.globalHTML5),Nt=!0)),!pt&&Wt&&(yt.setupOptions.ignoreMobileRestrictions?Ft.push(V.ignoreMobile):(yt.setupOptions.useHTML5Audio&&!yt.setupOptions.preferFlash||yt._wD(V.mobileUA),yt.setupOptions.useHTML5Audio=!0,yt.setupOptions.preferFlash=!1,Yt?yt.ignoreFlash=!0:(Qt&&!bt.match(/android\s2\.3/i)||!Qt)&&(yt._wD(V.globalHTML5),Nt=!0))),t&&(e&&L&&t.url!==i&&yt.beginDelayedInit(),L||t.url===i||"complete"!==kt.readyState||setTimeout(S,1)),pt=!0,yt},this.ok=function(){return jt?xt&&!Lt:yt.useHTML5Audio&&yt.hasHTML5},this.supported=this.ok,this.getMovie=function(t){return r(t)||kt[t]||o[t]},this.createSound=function(t,e){var r,o,a,s=null;if(o=(r=vt+".createSound(): ")+C(xt?"notOK":"notReady"),!xt||!yt.ok())return Y(o),!1;if(e!==i&&(t={id:t,url:e}),(a=d(t)).url=Z(a.url),a.id===i&&(a.id=yt.setupOptions.idPrefix+Ut++),a.id.toString().charAt(0).match(/^[0-9]$/)&&yt._wD(r+C("badID",a.id),2),yt._wD(r+a.id+(a.url?" ("+a.url+")":""),1),Q(a.id,!0))return yt._wD(r+a.id+" exists",1),yt.sounds[a.id];function u(){return a=U(a),yt.sounds[a.id]=new n(a),yt.soundIDs.push(a.id),yt.sounds[a.id]}if(J(a))s=u(),yt.html5Only||yt._wD(a.id+": Using HTML5"),s._setup_html5(a);else{if(yt.html5Only)return yt._wD(a.id+": No HTML5 support for this sound, and no Flash. Exiting."),u();if(yt.html5.usingFlash&&a.url&&a.url.match(/data:/i))return yt._wD(a.id+": data: URIs not supported via Flash. Exiting."),u();l>8&&(null===a.isMovieStar&&(a.isMovieStar=!!(a.serverURL||a.type&&a.type.match(ae)||a.url&&a.url.match(ue))),a.isMovieStar&&(yt._wD(r+"using MovieStar handling"),a.loops>1&&h("noNSLoop"))),a=H(a,r),s=u(),8===l?gt._createSound(a.id,a.loops||1,a.usePolicyFile):(gt._createSound(a.id,a.url,a.usePeakData,a.useWaveformData,a.useEQData,a.isMovieStar,!!a.isMovieStar&&a.bufferTime,a.loops||1,a.serverURL,a.duration||null,a.autoPlay,!0,a.autoLoad,a.usePolicyFile),a.serverURL||(s.connected=!0,a.onconnect&&a.onconnect.apply(s))),a.serverURL||!a.autoLoad&&!a.autoPlay||s.load(a)}return!a.serverURL&&a.autoPlay&&s.play(),s},this.destroySound=function(t,e){if(!Q(t))return!1;var n,r=yt.sounds[t];for(r.stop(),r._iO={},r.unload(),n=0;n<yt.soundIDs.length;n++)if(yt.soundIDs[n]===t){yt.soundIDs.splice(n,1);break}return e||r.destruct(!0),r=null,delete yt.sounds[t],!0},this.load=function(t,e){return!!Q(t)&&yt.sounds[t].load(e)},this.unload=function(t){return!!Q(t)&&yt.sounds[t].unload()},this.onPosition=function(t,e,n,r){return!!Q(t)&&yt.sounds[t].onposition(e,n,r)},this.onposition=this.onPosition,this.clearOnPosition=function(t,e,n){return!!Q(t)&&yt.sounds[t].clearOnPosition(e,n)},this.play=function(t,e){var n=null,r=e&&!(e instanceof Object);if(!xt||!yt.ok())return Y(vt+".play(): "+C(xt?"notOK":"notReady")),!1;if(Q(t,r))r&&(e={url:e});else{if(!r)return!1;r&&(e={url:e}),e&&e.url&&(yt._wD(vt+'.play(): Attempting to create "'+t+'"',1),e.id=t,n=yt.createSound(e).play())}return null===n&&(n=yt.sounds[t].play(e)),n},this.start=this.play,this.setPlaybackRate=function(t,e,n){return!!Q(t)&&yt.sounds[t].setPlaybackRate(e,n)},this.setPosition=function(t,e){return!!Q(t)&&yt.sounds[t].setPosition(e)},this.stop=function(t){return!!Q(t)&&(yt._wD(vt+".stop("+t+")",1),yt.sounds[t].stop())},this.stopAll=function(){var t;for(t in yt._wD(vt+".stopAll()",1),yt.sounds)yt.sounds.hasOwnProperty(t)&&yt.sounds[t].stop()},this.pause=function(t){return!!Q(t)&&yt.sounds[t].pause()},this.pauseAll=function(){var t;for(t=yt.soundIDs.length-1;t>=0;t--)yt.sounds[yt.soundIDs[t]].pause()},this.resume=function(t){return!!Q(t)&&yt.sounds[t].resume()},this.resumeAll=function(){var t;for(t=yt.soundIDs.length-1;t>=0;t--)yt.sounds[yt.soundIDs[t]].resume()},this.togglePause=function(t){return!!Q(t)&&yt.sounds[t].togglePause()},this.setPan=function(t,e){return!!Q(t)&&yt.sounds[t].setPan(e)},this.setVolume=function(t,e){var n,r;if(t!==i&&!isNaN(t)&&e===i){for(n=0,r=yt.soundIDs.length;n<r;n++)yt.sounds[yt.soundIDs[n]].setVolume(t);return!1}return!!Q(t)&&yt.sounds[t].setVolume(e)},this.mute=function(t){var e=0;if(t instanceof String&&(t=null),t)return!!Q(t)&&(yt._wD(vt+'.mute(): Muting "'+t+'"'),yt.sounds[t].mute());for(yt._wD(vt+".mute(): Muting all sounds"),e=yt.soundIDs.length-1;e>=0;e--)yt.sounds[yt.soundIDs[e]].mute();return yt.muted=!0,!0},this.muteAll=function(){yt.mute()},this.unmute=function(t){var e;if(t instanceof String&&(t=null),t)return!!Q(t)&&(yt._wD(vt+'.unmute(): Unmuting "'+t+'"'),yt.sounds[t].unmute());for(yt._wD(vt+".unmute(): Unmuting all sounds"),e=yt.soundIDs.length-1;e>=0;e--)yt.sounds[yt.soundIDs[e]].unmute();return yt.muted=!1,!0},this.unmuteAll=function(){yt.unmute()},this.toggleMute=function(t){return!!Q(t)&&yt.sounds[t].toggleMute()},this.getMemoryUse=function(){var t=0;return gt&&8!==l&&(t=parseInt(gt._getMemoryUse(),10)),t},this.disable=function(t){var e;if(t===i&&(t=!1),Lt)return!1;for(Lt=!0,h("shutdown",1),e=yt.soundIDs.length-1;e>=0;e--)q(yt.sounds[yt.soundIDs[e]]);return q(yt),f(t),it.remove(o,"load",v),!0},this.canPlayMIME=function(t){var e;return yt.hasHTML5&&(e=$({type:t})),!e&&jt&&(e=t&&yt.ok()?!!(l>8&&t.match(ae)||t.match(yt.mimePattern)):null),e},this.canPlayURL=function(t){var e;return yt.hasHTML5&&(e=$({url:t})),!e&&jt&&(e=t&&yt.ok()?!!t.match(yt.filePattern):null),e},this.canPlayLink=function(t){return!(t.type===i||!t.type||!yt.canPlayMIME(t.type))||yt.canPlayURL(t.href)},this.getSoundById=function(t,e){if(!t)return null;var n=yt.sounds[t];return n||e||yt._wD(vt+'.getSoundById(): Sound "'+t+'" not found.',2),n},this.onready=function(t,e){var n="onready";if("function"!=typeof t)throw C("needFunction",n);return xt&&yt._wD(C("queue",n)),e||(e=o),m(n,t,e),g(),!0},this.ontimeout=function(t,e){var n="ontimeout";if("function"!=typeof t)throw C("needFunction",n);return xt&&yt._wD(C("queue",n)),e||(e=o),m(n,t,e),g({type:n}),!0},this._writeDebug=function(t,e){var n,o;return!(!yt.setupOptions.debugMode||!(Jt&&yt.useConsole&&(e&&"object"==typeof e?console.log(t,e):Et[e]!==i?console[Et[e]](t):console.log(t),yt.consoleOnly))&&(!(n=r("soundmanager-debug"))||(o=kt.createElement("div"),++Pt%2==0&&(o.className="sm2-alt"),e=e===i?0:parseInt(e,10),o.appendChild(kt.createTextNode(t)),e&&(e>=2&&(o.style.fontWeight="bold"),3===e&&(o.style.color="#ff3333")),n.insertBefore(o,n.firstChild),n=null,0)))},-1!==wt.indexOf("sm2-debug=alert")&&(this._writeDebug=function(t){o.alert(t)}),this._wD=this._writeDebug,this._debug=function(){var t,e;for(h("currentObj",1),t=0,e=yt.soundIDs.length;t<e;t++)yt.sounds[yt.soundIDs[t]]._debug()},this.reboot=function(t,e){var n,r,i;for(yt.soundIDs.length&&yt._wD("Destroying "+yt.soundIDs.length+" SMSound object"+(1!==yt.soundIDs.length?"s":"")+"..."),n=yt.soundIDs.length-1;n>=0;n--)yt.sounds[yt.soundIDs[n]].destruct();if(gt)try{Gt&&(Tt=gt.innerHTML),It=gt.parentNode.removeChild(gt)}catch(t){h("badRemove",2)}if(Tt=It=jt=gt=null,yt.enabled=L=xt=qt=Rt=Ot=St=Lt=Nt=yt.swfLoaded=!1,yt.soundIDs=[],yt.sounds={},Ut=0,pt=!1,t)_t=[];else for(n in _t)if(_t.hasOwnProperty(n))for(r=0,i=_t[n].length;r<i;r++)_t[n][r].fired=!1;return e||yt._wD(vt+": Rebooting..."),yt.html5={usingFlash:null},yt.flash={},yt.html5Only=!1,yt.ignoreFlash=!1,o.setTimeout((function(){e||yt.beginDelayedInit()}),20),yt},this.reset=function(){return h("reset"),yt.reboot(!0,!0)},this.getMoviePercent=function(){return gt&&"PercentLoaded"in gt?gt.PercentLoaded():null},this.beginDelayedInit=function(){Mt=!0,S(),setTimeout((function(){return!Rt&&(P(),O(),Rt=!0,!0)}),20),A()},this.destruct=function(){yt._wD(vt+".destruct()"),yt.disable(!0)},n=function(t){var e,n,r,o,a,s,u,f,p,y,m=this,g=!1,v=[],A=0,b=null;p={duration:null,time:null},this.id=t.id,this.sID=this.id,this.url=t.url,this.options=d(t),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,y=!this.url,this.id3={},this._debug=function(){yt._wD(m.id+": Merged options:",m.options)},this.load=function(t){var e;if(t!==i?m._iO=d(t,m.options):(t=m.options,m._iO=t,b&&b!==m.url&&(h("manURL"),m._iO.url=m.url,m.url=null)),m._iO.url||(m._iO.url=m.url),m._iO.url=Z(m._iO.url),m.instanceOptions=m._iO,e=m._iO,yt._wD(m.id+": load ("+e.url+")"),!e.url&&!m.url)return yt._wD(m.id+": load(): url is unassigned. Exiting.",2),m;if(m.isHTML5||8!==l||m.url||e.autoPlay||yt._wD(m.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),e.url===m.url&&0!==m.readyState&&2!==m.readyState)return h("onURL",1),3===m.readyState&&e.onload&&dt(m,(function(){e.onload.apply(m,[!!m.duration])})),m;if(m.loaded=!1,m.readyState=1,m.playState=0,m.id3={},J(e))m._setup_html5(e)._called_load?yt._wD(m.id+": Ignoring request to load again"):(m._html5_canplay=!1,m.url!==e.url&&(yt._wD(h("manURL")+": "+e.url),m._a.src=e.url,m.setPosition(0)),m._a.autobuffer="auto",m._a.preload="auto",m._a._called_load=!0);else{if(yt.html5Only)return yt._wD(m.id+": No flash support. Exiting."),m;if(m._iO.url&&m._iO.url.match(/data:/i))return yt._wD(m.id+": data: URIs not supported via Flash. Exiting."),m;try{m.isHTML5=!1,m._iO=H(U(e)),m._iO.autoPlay&&(m._iO.position||m._iO.from)&&(yt._wD(m.id+": Disabling autoPlay because of non-zero offset case"),m._iO.autoPlay=!1),e=m._iO,8===l?gt._load(m.id,e.url,e.stream,e.autoPlay,e.usePolicyFile):gt._load(m.id,e.url,!!e.stream,!!e.autoPlay,e.loops||1,!!e.autoLoad,e.usePolicyFile)}catch(t){h("smError",2),c("onload",!1),E({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return m.url=e.url,m},this.unload=function(){return 0!==m.readyState&&(yt._wD(m.id+": unload()"),m.isHTML5?(o(),m._a&&(m._a.pause(),b=nt(m._a))):8===l?gt._unload(m.id,re):gt._unload(m.id),e()),m},this.destruct=function(t){yt._wD(m.id+": Destruct"),m.isHTML5?(o(),m._a&&(m._a.pause(),nt(m._a),Nt||r(),m._a._s=null,m._a=null)):(m._iO.onfailure=null,gt._destroySound(m.id)),t||yt.destroySound(m.id,!0)},this.play=function(t,e){var n,r,o,u,c,h,p=!0;if(n=m.id+": play(): ",e=e===i||e,t||(t={}),m.url&&(m._iO.url=m.url),m._iO=d(m._iO,m.options),m._iO=d(t,m._iO),m._iO.url=Z(m._iO.url),m.instanceOptions=m._iO,!m.isHTML5&&m._iO.serverURL&&!m.connected)return m.getAutoPlay()||(yt._wD(n+" Netstream not connected yet - setting autoPlay"),m.setAutoPlay(!0)),m;if(J(m._iO)&&(m._setup_html5(m._iO),a()),1===m.playState&&!m.paused){if(!m._iO.multiShot)return yt._wD(n+"Already playing (one-shot)",1),m.isHTML5&&m.setPosition(m._iO.position),m;yt._wD(n+"Already playing (multi-shot)",1)}if(t.url&&t.url!==m.url&&(m.readyState||m.isHTML5||8!==l||!y?m.load(m._iO):y=!1),m.loaded)yt._wD(n.substr(0,n.lastIndexOf(":")));else if(0===m.readyState){if(yt._wD(n+"Attempting to load"),m.isHTML5||yt.html5Only){if(!m.isHTML5)return yt._wD(n+"Unsupported type. Exiting."),m;m.load(m._iO)}else m._iO.autoPlay=!0,m.load(m._iO);m.instanceOptions=m._iO}else{if(2===m.readyState)return yt._wD(n+"Could not load - exiting",2),m;yt._wD(n+"Loading - attempting to play...")}return!m.isHTML5&&9===l&&m.position>0&&m.position===m.duration&&(yt._wD(n+"Sound at end, resetting to position: 0"),t.position=0),m.paused&&m.position>=0&&(!m._iO.serverURL||m.position>0)?(yt._wD(n+"Resuming from paused state",1),m.resume()):(m._iO=d(t,m._iO),(!m.isHTML5&&null!==m._iO.position&&m._iO.position>0||null!==m._iO.from&&m._iO.from>0||null!==m._iO.to)&&0===m.instanceCount&&0===m.playState&&!m._iO.serverURL&&(o=function(){m._iO=d(t,m._iO),m.play(m._iO)},m.isHTML5&&!m._html5_canplay?(yt._wD(n+"Beginning load for non-zero offset case"),m.load({_oncanplay:o})):m.isHTML5||m.loaded||m.readyState&&2===m.readyState||(yt._wD(n+"Preloading for non-zero offset case"),m.load({onload:o})),m._iO=f()),(!m.instanceCount||m._iO.multiShotEvents||m.isHTML5&&m._iO.multiShot&&!Nt||!m.isHTML5&&l>8&&!m.getAutoPlay())&&m.instanceCount++,m._iO.onposition&&0===m.playState&&s(m),m.playState=1,m.paused=!1,m.position=m._iO.position===i||isNaN(m._iO.position)?0:m._iO.position,m.isHTML5||(m._iO=H(U(m._iO))),m._iO.onplay&&e&&(m._iO.onplay.apply(m),g=!0),m.setVolume(m._iO.volume,!0),m.setPan(m._iO.pan,!0),1!==m._iO.playbackRate&&m.setPlaybackRate(m._iO.playbackRate),m.isHTML5?m.instanceCount<2?(a(),r=m._setup_html5(),m.setPosition(m._iO.position),r.play()):(yt._wD(m.id+": Cloning Audio() for instance #"+m.instanceCount+"..."),u=new Audio(m._iO.url),c=function(){it.remove(u,"ended",c),m._onfinish(m),nt(u),u=null},h=function(){it.remove(u,"canplay",h);try{u.currentTime=m._iO.position/Ht}catch(t){Y(m.id+": multiShot play() failed to apply position of "+m._iO.position/Ht)}u.play()},it.add(u,"ended",c),m._iO.volume!==i&&(u.volume=Math.max(0,Math.min(1,m._iO.volume/100))),m.muted&&(u.muted=!0),m._iO.position?it.add(u,"canplay",h):u.play()):(p=gt._start(m.id,m._iO.loops||1,9===l?m.position:m.position/Ht,m._iO.multiShot||!1),9!==l||p||(yt._wD(n+"No sound hardware, or 32-sound ceiling hit",2),m._iO.onplayerror&&m._iO.onplayerror.apply(m)))),m},this.start=this.play,this.stop=function(t){var e,n=m._iO;return 1===m.playState&&(yt._wD(m.id+": stop()"),m._onbufferchange(0),m._resetOnPosition(0),m.paused=!1,m.isHTML5||(m.playState=0),u(),n.to&&m.clearOnPosition(n.to),m.isHTML5?m._a&&(e=m.position,m.setPosition(0),m.position=e,m._a.pause(),m.playState=0,m._onTimer(),o()):(gt._stop(m.id,t),n.serverURL&&m.unload()),m.instanceCount=0,m._iO={},n.onstop&&n.onstop.apply(m)),m},this.setAutoPlay=function(t){yt._wD(m.id+": Autoplay turned "+(t?"on":"off")),m._iO.autoPlay=t,m.isHTML5||(gt._setAutoPlay(m.id,t),t&&(m.instanceCount||1!==m.readyState||(m.instanceCount++,yt._wD(m.id+": Incremented instance count to "+m.instanceCount))))},this.getAutoPlay=function(){return m._iO.autoPlay},this.setPlaybackRate=function(t){var e=Math.max(.5,Math.min(4,t));if(e!==t&&yt._wD(m.id+": setPlaybackRate("+t+"): limiting rate to "+e,2),m.isHTML5)try{m._iO.playbackRate=e,m._a.playbackRate=e}catch(t){yt._wD(m.id+": setPlaybackRate("+e+") failed: "+t.message,2)}return m},this.setPosition=function(t){t===i&&(t=0);var e,n,r=m.isHTML5?Math.max(t,0):Math.min(m.duration||m._iO.duration,Math.max(t,0));if(m.position=r,n=m.position/Ht,m._resetOnPosition(m.position),m._iO.position=r,m.isHTML5){if(m._a){if(m._html5_canplay){if(m._a.currentTime.toFixed(3)!==n.toFixed(3)){yt._wD(m.id+": setPosition("+n+")");try{m._a.currentTime=n,(0===m.playState||m.paused)&&m._a.pause()}catch(t){yt._wD(m.id+": setPosition("+n+") failed: "+t.message,2)}}}else if(n)return yt._wD(m.id+": setPosition("+n+"): Cannot seek yet, sound not ready",2),m;m.paused&&m._onTimer(!0)}}else e=9===l?m.position:n,m.readyState&&2!==m.readyState&&gt._setPosition(m.id,e,m.paused||!m.playState,m._iO.multiShot);return m},this.pause=function(t){return m.paused||0===m.playState&&1!==m.readyState||(yt._wD(m.id+": pause()"),m.paused=!0,m.isHTML5?(m._setup_html5().pause(),o()):(t||t===i)&&gt._pause(m.id,m._iO.multiShot),m._iO.onpause&&m._iO.onpause.apply(m)),m},this.resume=function(){var t=m._iO;return m.paused?(yt._wD(m.id+": resume()"),m.paused=!1,m.playState=1,m.isHTML5?(m._setup_html5().play(),a()):(t.isMovieStar&&!t.serverURL&&m.setPosition(m.position),gt._pause(m.id,t.multiShot)),!g&&t.onplay?(t.onplay.apply(m),g=!0):t.onresume&&t.onresume.apply(m),m):m},this.togglePause=function(){return yt._wD(m.id+": togglePause()"),0===m.playState?(m.play({position:9!==l||m.isHTML5?m.position/Ht:m.position}),m):(m.paused?m.resume():m.pause(),m)},this.setPan=function(t,e){return t===i&&(t=0),e===i&&(e=!1),m.isHTML5||gt._setPan(m.id,t),m._iO.pan=t,e||(m.pan=t,m.options.pan=t),m},this.setVolume=function(t,e){return t===i&&(t=100),e===i&&(e=!1),m.isHTML5?m._a&&(yt.muted&&!m.muted&&(m.muted=!0,m._a.muted=!0),m._a.volume=Math.max(0,Math.min(1,t/100))):gt._setVolume(m.id,yt.muted&&!m.muted||m.muted?0:t),m._iO.volume=t,e||(m.volume=t,m.options.volume=t),m},this.mute=function(){return m.muted=!0,m.isHTML5?m._a&&(m._a.muted=!0):gt._setVolume(m.id,0),m},this.unmute=function(){m.muted=!1;var t=m._iO.volume!==i;return m.isHTML5?m._a&&(m._a.muted=!1):gt._setVolume(m.id,t?m._iO.volume:m.options.volume),m},this.toggleMute=function(){return m.muted?m.unmute():m.mute()},this.onPosition=function(t,e,n){return v.push({position:parseInt(t,10),method:e,scope:n!==i?n:m,fired:!1}),m},this.onposition=this.onPosition,this.clearOnPosition=function(t,e){var n;if(t=parseInt(t,10),!isNaN(t))for(n=0;n<v.length;n++)t===v[n].position&&(e&&e!==v[n].method||(v[n].fired&&A--,v.splice(n,1)))},this._processOnPosition=function(){var t,e,n=v.length;if(!n||!m.playState||A>=n)return!1;for(t=n-1;t>=0;t--)!(e=v[t]).fired&&m.position>=e.position&&(e.fired=!0,A++,e.method.apply(e.scope,[e.position]),n=v.length);return!0},this._resetOnPosition=function(t){var e,n,r=v.length;if(!r)return!1;for(e=r-1;e>=0;e--)(n=v[e]).fired&&t<=n.position&&(n.fired=!1,A--);return!0},f=function(){var t,e,n=m._iO,r=n.from,o=n.to;return e=function(){yt._wD(m.id+': "To" time of '+o+" reached."),m.clearOnPosition(o,e),m.stop()},t=function(){yt._wD(m.id+': Playing "from" '+r),null===o||isNaN(o)||m.onPosition(o,e)},null===r||isNaN(r)||(n.position=r,n.multiShot=!1,t()),n},s=function(){var t,e=m._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&m.onPosition(parseInt(t,10),e[t])},u=function(){var t,e=m._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&m.clearOnPosition(parseInt(t,10))},a=function(){m.isHTML5&&G(m)},o=function(){m.isHTML5&&z(m)},(e=function(t){t||(v=[],A=0),g=!1,m._hasTimer=null,m._a=null,m._html5_canplay=!1,m.bytesLoaded=null,m.bytesTotal=null,m.duration=m._iO&&m._iO.duration?m._iO.duration:null,m.durationEstimate=null,m.buffered=[],m.eqData=[],m.eqData.left=[],m.eqData.right=[],m.failures=0,m.isBuffering=!1,m.instanceOptions={},m.instanceCount=0,m.loaded=!1,m.metadata={},m.readyState=0,m.muted=!1,m.paused=!1,m.peakData={left:0,right:0},m.waveformData={left:[],right:[]},m.playState=0,m.position=null,m.id3={}})(),this._onTimer=function(t){var e,n,r=!1,o={};return(m._hasTimer||t)&&m._a&&(t||(m.playState>0||1===m.readyState)&&!m.paused)&&((e=m._get_html5_duration())!==p.duration&&(p.duration=e,m.duration=e,r=!0),m.durationEstimate=m.duration,(n=m._a.currentTime*Ht||0)!==p.time&&(p.time=n,r=!0),(r||t)&&m._whileplaying(n,o,o,o,o)),r},this._get_html5_duration=function(){var t=m._iO,e=m._a&&m._a.duration?m._a.duration*Ht:t&&t.duration?t.duration:null;return e&&!isNaN(e)&&e!==1/0?e:null},this._apply_loop=function(t,e){!t.loop&&e>1&&yt._wD("Note: Native HTML5 looping is infinite.",1),t.loop=e>1?"loop":""},this._setup_html5=function(t){var r,o=d(m._iO,t),i=Nt?mt:m._a,a=decodeURI(o.url);if(Nt?a===decodeURI(at)&&(r=!0):a===decodeURI(b)&&(r=!0),i){if(i._s)if(Nt)i._s&&i._s.playState&&!r&&i._s.stop();else if(!Nt&&a===decodeURI(b))return m._apply_loop(i,o.loops),i;r||(b&&e(!1),i.src=o.url,m.url=o.url,b=o.url,at=o.url,i._called_load=!1)}else o.autoLoad||o.autoPlay?(m._a=new Audio(o.url),m._a.load()):m._a=Zt&&opera.version()<10?new Audio(null):new Audio,(i=m._a)._called_load=!1,Nt&&(mt=i);return m.isHTML5=!0,m._a=i,i._s=m,n(),m._apply_loop(i,o.loops),o.autoLoad||o.autoPlay?m.load():(i.autobuffer=!1,i.preload="auto"),i},n=function(){if(m._a._added_events)return!1;var t,e,n;for(t in m._a._added_events=!0,ct)ct.hasOwnProperty(t)&&(e=t,n=ct[t],m._a&&m._a.addEventListener(e,n,!1));return!0},r=function(){var t,e,n;for(t in yt._wD(m.id+": Removing event listeners"),m._a._added_events=!1,ct)ct.hasOwnProperty(t)&&(e=t,n=ct[t],m._a&&m._a.removeEventListener(e,n,!1))},this._onload=function(t){var e,n=!!t||!m.isHTML5&&8===l&&m.duration;return e=m.id+": ",yt._wD(e+(n?"onload()":"Failed to load / invalid sound?"+(m.duration?" -":" Zero-length duration reported.")+" ("+m.url+")"),n?1:2),n||m.isHTML5||(!0===yt.sandbox.noRemote&&yt._wD(e+C("noNet"),1),!0===yt.sandbox.noLocal&&yt._wD(e+C("noLocal"),1)),m.loaded=n,m.readyState=n?3:2,m._onbufferchange(0),n||m.isHTML5||m._onerror(),m._iO.onload&&dt(m,(function(){m._iO.onload.apply(m,[n])})),!0},this._onerror=function(t,e){m._iO.onerror&&dt(m,(function(){m._iO.onerror.apply(m,[t,e])}))},this._onbufferchange=function(t){return!(0===m.playState||t&&m.isBuffering||!t&&!m.isBuffering||(m.isBuffering=1===t,m._iO.onbufferchange&&(yt._wD(m.id+": Buffer state change: "+t),m._iO.onbufferchange.apply(m,[t])),0))},this._onsuspend=function(){return m._iO.onsuspend&&(yt._wD(m.id+": Playback suspended"),m._iO.onsuspend.apply(m)),!0},this._onfailure=function(t,e,n){m.failures++,yt._wD(m.id+": Failure ("+m.failures+"): "+t),m._iO.onfailure&&1===m.failures?m._iO.onfailure(t,e,n):yt._wD(m.id+": Ignoring failure")},this._onwarning=function(t,e,n){m._iO.onwarning&&m._iO.onwarning(t,e,n)},this._onfinish=function(){var t=m._iO.onfinish;m._onbufferchange(0),m._resetOnPosition(0),m.instanceCount&&(m.instanceCount--,m.instanceCount||(u(),m.playState=0,m.paused=!1,m.instanceCount=0,m.instanceOptions={},m._iO={},o(),m.isHTML5&&(m.position=0)),m.instanceCount&&!m._iO.multiShotEvents||t&&(yt._wD(m.id+": onfinish()"),dt(m,(function(){t.apply(m)}))))},this._whileloading=function(t,e,n,r){var o=m._iO;m.bytesLoaded=t,m.bytesTotal=e,m.duration=Math.floor(n),m.bufferLength=r,m.isHTML5||o.isMovieStar?m.durationEstimate=m.duration:o.duration?m.durationEstimate=m.duration>o.duration?m.duration:o.duration:m.durationEstimate=parseInt(m.bytesTotal/m.bytesLoaded*m.duration,10),m.isHTML5||(m.buffered=[{start:0,end:m.duration}]),(3!==m.readyState||m.isHTML5)&&o.whileloading&&o.whileloading.apply(m)},this._whileplaying=function(t,e,n,r,o){var a,s=m._iO;return!isNaN(t)&&null!==t&&(m.position=Math.max(0,t),m._processOnPosition(),!m.isHTML5&&l>8&&(s.usePeakData&&e!==i&&e&&(m.peakData={left:e.leftPeak,right:e.rightPeak}),s.useWaveformData&&n!==i&&n&&(m.waveformData={left:n.split(","),right:r.split(",")}),s.useEQData&&o!==i&&o&&o.leftEQ&&(a=o.leftEQ.split(","),m.eqData=a,m.eqData.left=a,o.rightEQ!==i&&o.rightEQ&&(m.eqData.right=o.rightEQ.split(",")))),1===m.playState&&(m.isHTML5||8!==l||m.position||!m.isBuffering||m._onbufferchange(0),s.whileplaying&&s.whileplaying.apply(m)),!0)},this._oncaptiondata=function(t){yt._wD(m.id+": Caption data received."),m.captiondata=t,m._iO.oncaptiondata&&m._iO.oncaptiondata.apply(m,[t])},this._onmetadata=function(t,e){yt._wD(m.id+": Metadata received.");var n,r,o={};for(n=0,r=t.length;n<r;n++)o[t[n]]=e[n];m.metadata=o,m._iO.onmetadata&&m._iO.onmetadata.call(m,m.metadata)},this._onid3=function(t,e){yt._wD(m.id+": ID3 data received.");var n,r,o=[];for(n=0,r=t.length;n<r;n++)o[t[n]]=e[n];m.id3=d(m.id3,o),m._iO.onid3&&m._iO.onid3.apply(m)},this._onconnect=function(t){t=1===t,yt._wD(m.id+": "+(t?"Connected.":"Failed to connect? - "+m.url),t?1:2),m.connected=t,t&&(m.failures=0,Q(m.id)&&(m.getAutoPlay()?m.play(i,m.getAutoPlay()):m._iO.autoLoad&&m.load()),m._iO.onconnect&&m._iO.onconnect.apply(m,[t]))},this._ondataerror=function(t){m.playState>0&&(yt._wD(m.id+": Data error: "+t),m._iO.ondataerror&&m._iO.ondataerror.apply(m))},this._debug()},M=function(){return kt.body||kt.getElementsByTagName("div")[0]},r=function(t){return kt.getElementById(t)},d=function(t,e){var n,r,o=t||{};for(r in n=e===i?yt.defaultOptions:e)n.hasOwnProperty(r)&&o[r]===i&&("object"!=typeof n[r]||null===n[r]?o[r]=n[r]:o[r]=d(o[r],n[r]));return o},dt=function(t,e){t.isHTML5||8!==l?e():o.setTimeout(e,0)},y={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},p=function(t,e){var n,r=!0,o=e!==i,a=yt.setupOptions,s=y;if(t===i){for(n in r=[],a)a.hasOwnProperty(n)&&r.push(n);for(n in s)s.hasOwnProperty(n)&&("object"==typeof yt[n]?r.push(n+": {...}"):yt[n]instanceof Function?r.push(n+": function() {...}"):r.push(n));return yt._wD(C("setup",r.join(", "))),!1}for(n in t)if(t.hasOwnProperty(n))if("object"!=typeof t[n]||null===t[n]||t[n]instanceof Array||t[n]instanceof RegExp)o&&s[e]!==i?yt[e][n]=t[n]:a[n]!==i?(yt.setupOptions[n]=t[n],yt[n]=t[n]):s[n]===i?(Y(C(yt[n]===i?"setupUndef":"setupError",n),2),r=!1):yt[n]instanceof Function?yt[n].apply(yt,t[n]instanceof Array?t[n]:[t[n]]):yt[n]=t[n];else{if(s[n]!==i)return p(t[n],n);Y(C(yt[n]===i?"setupUndef":"setupError",n),2),r=!1}return r},it=function(){var t=o.attachEvent,e={add:t?"attachEvent":"addEventListener",remove:t?"detachEvent":"removeEventListener"};function n(e){var n=Bt.call(e),r=n.length;return t?(n[1]="on"+n[1],r>3&&n.pop()):3===r&&n.push(!1),n}function r(n,r){var o=n.shift(),i=[e[r]];t?o[i](n[0],n[1]):o[i].apply(o,n)}return{add:function(){r(n(arguments),"add")},remove:function(){r(n(arguments),"remove")}}}(),ct={abort:ce((function(){yt._wD(this._s.id+": abort")})),canplay:ce((function(){var t,e=this._s;if(!e._html5_canplay){if(e._html5_canplay=!0,yt._wD(e.id+": canplay"),e._onbufferchange(0),t=e._iO.position===i||isNaN(e._iO.position)?null:e._iO.position/Ht,this.currentTime!==t){yt._wD(e.id+": canplay: Setting position to "+t);try{this.currentTime=t}catch(n){yt._wD(e.id+": canplay: Setting position of "+t+" failed: "+n.message,2)}}e._iO._oncanplay&&e._iO._oncanplay()}})),canplaythrough:ce((function(){var t=this._s;t.loaded||(t._onbufferchange(0),t._whileloading(t.bytesLoaded,t.bytesTotal,t._get_html5_duration()),t._onload(!0))})),durationchange:ce((function(){var t,e=this._s;t=e._get_html5_duration(),isNaN(t)||t===e.duration||(yt._wD(this._s.id+": durationchange ("+t+")"+(e.duration?", previously "+e.duration:"")),e.durationEstimate=e.duration=t)})),ended:ce((function(){var t=this._s;yt._wD(t.id+": ended"),t._onfinish()})),error:ce((function(){var t=tt[this.error.code]||null;yt._wD(this._s.id+": HTML5 error, code "+this.error.code+(t?" ("+t+")":"")),this._s._onload(!1),this._s._onerror(this.error.code,t)})),loadeddata:ce((function(){var t=this._s;yt._wD(t.id+": loadeddata"),t._loaded||Kt||(t.duration=t._get_html5_duration())})),loadedmetadata:ce((function(){yt._wD(this._s.id+": loadedmetadata")})),loadstart:ce((function(){yt._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)})),play:ce((function(){this._s._onbufferchange(0)})),playing:ce((function(){yt._wD(this._s.id+": playing "+String.fromCharCode(9835)),this._s._onbufferchange(0)})),progress:ce((function(t){var e,n,r,o=this._s,i=0,a="progress"===t.type,s=t.target.buffered,u=t.loaded||0,l=t.total||1;if(o.buffered=[],s&&s.length){for(e=0,n=s.length;e<n;e++)o.buffered.push({start:s.start(e)*Ht,end:s.end(e)*Ht});if(i=(s.end(0)-s.start(0))*Ht,u=Math.min(1,i/(t.target.duration*Ht)),a&&s.length>1){for(r=[],n=s.length,e=0;e<n;e++)r.push(t.target.buffered.start(e)*Ht+"-"+t.target.buffered.end(e)*Ht);yt._wD(this._s.id+": progress, timeRanges: "+r.join(", "))}a&&!isNaN(u)&&yt._wD(this._s.id+": progress, "+Math.floor(100*u)+"% loaded")}isNaN(u)||(o._whileloading(u,l,o._get_html5_duration()),u&&l&&u===l&&ct.canplaythrough.call(this,t))})),ratechange:ce((function(){yt._wD(this._s.id+": ratechange")})),suspend:ce((function(t){var e=this._s;yt._wD(this._s.id+": suspend"),ct.progress.call(this,t),e._onsuspend()})),stalled:ce((function(){yt._wD(this._s.id+": stalled")})),timeupdate:ce((function(){this._s._onTimer()})),waiting:ce((function(){var t=this._s;yt._wD(this._s.id+": waiting"),t._onbufferchange(1)}))},J=function(t){return!(!t||!(t.type||t.url||t.serverURL))&&!(t.serverURL||t.type&&le(t.type))&&(t.type?$({type:t.type}):$({url:t.url})||yt.html5Only||t.url.match(/data:/i))},nt=function(t){var e;return t&&(e=Kt?re:yt.html5.canPlayType("audio/wav")?"data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==":re,t.src=e,t._called_unload!==i&&(t._called_load=!1)),Nt&&(at=null),e},$=function(t){if(!yt.useHTML5Audio||!yt.hasHTML5)return!1;var e,n,r,o,a=t.url||null,s=t.type||null,u=yt.audioFormats;if(s&&yt.html5[s]!==i)return yt.html5[s]&&!le(s);if(!et){for(o in et=[],u)u.hasOwnProperty(o)&&(et.push(o),u[o].related&&(et=et.concat(u[o].related)));et=new RegExp("\\.("+et.join("|")+")(\\?.*)?$","i")}return(r=a?a.toLowerCase().match(et):null)&&r.length?r=r[1]:s?r=(-1!==(n=s.indexOf(";"))?s.substr(0,n):s).substr(6):e=!1,r&&yt.html5[r]!==i?e=yt.html5[r]&&!le(r):(s="audio/"+r,e=yt.html5.canPlayType({type:s}),yt.html5[r]=e,e=e&&yt.html5[s]&&!le(s)),e},ot=function(){if(!yt.useHTML5Audio||!yt.hasHTML5)return yt.html5.usingFlash=!0,jt=!0,!1;var t,e,n,r,o=Audio!==i?Zt&&opera.version()<10?new Audio(null):new Audio:null,a={};function s(t){var e,n,i=!1,a=!1;if(!o||"function"!=typeof o.canPlayType)return i;if(t instanceof Array){for(r=0,n=t.length;r<n;r++)(yt.html5[t[r]]||o.canPlayType(t[r]).match(yt.html5Test))&&(a=!0,yt.html5[t[r]]=!0,yt.flash[t[r]]=!!t[r].match(ne));i=a}else i=!(!(e=!(!o||"function"!=typeof o.canPlayType)&&o.canPlayType(t))||!e.match(yt.html5Test));return i}for(t in n=yt.audioFormats)if(n.hasOwnProperty(t)&&(e="audio/"+t,a[t]=s(n[t].type),a[e]=a[t],t.match(ne)?(yt.flash[t]=!0,yt.flash[e]=!0):(yt.flash[t]=!1,yt.flash[e]=!1),n[t]&&n[t].related))for(r=n[t].related.length-1;r>=0;r--)a["audio/"+n[t].related[r]]=a[t],yt.html5[n[t].related[r]]=a[t],yt.flash[n[t].related[r]]=a[t];return a.canPlayType=o?s:null,yt.html5=d(yt.html5,a),yt.html5.usingFlash=X(),jt=yt.html5.usingFlash,!0},V={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:vt+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:At+"Verify that %s is a valid path.",tryDebug:"Try "+vt+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:At+"Non-HTTP page ("+kt.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:At+"Special case: Waiting for SWF to load with window focus...",waitForever:At+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:At+"Waiting for 100% SWF load...",needFunction:At+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:At+"_debug(): Current sound objects",waitOnload:At+"Waiting for window.onload()",docLoaded:At+"Document already loaded",onload:At+"initComplete(): calling soundManager.onload()",onloadOK:vt+".onload() complete",didInit:At+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:At+"Failed to remove Flash node.",shutdown:vt+".disable(): Shutting down",queue:At+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+B.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:At+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:vt+".load(): current URL already assigned.",badFV:vt+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:At+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:At+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:vt+".setup(): allowed parameters: %s",setupError:vt+'.setup(): "%s" cannot be assigned with this method.',setupUndef:vt+'.setup(): Could not find option "%s"',setupLate:vt+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:At+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:vt+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device.",ignoreMobile:"Ignoring mobile restrictions for this device."},C=function(){var t,e,n,r,o;if(r=(t=Bt.call(arguments)).shift(),(o=V&&V[r]?V[r]:"")&&t&&t.length)for(e=0,n=t.length;e<n;e++)o=o.replace("%s",t[e]);return o},U=function(t){return 8===l&&t.loops>1&&t.stream&&(h("as2loop"),t.stream=!1),t},H=function(t,e){return t&&!t.usePolicyFile&&(t.onid3||t.usePeakData||t.useWaveformData||t.useEQData)&&(yt._wD((e||"")+C("policy")),t.usePolicyFile=!0),t},Y=function(t){Jt&&console.warn!==i?console.warn(t):yt._wD(t)},a=function(){return!1},q=function(t){var e;for(e in t)t.hasOwnProperty(e)&&"function"==typeof t[e]&&(t[e]=a);e=null},R=function(t){t===i&&(t=!1),(Lt||t)&&yt.disable(t)},D=function(t){var e;if(t)if(t.match(/\.swf(\?.*)?$/i)){if(t.substr(t.toLowerCase().lastIndexOf(".swf?")+4))return t}else t.lastIndexOf("/")!==t.length-1&&(t+="/");return e=(t&&-1!==t.lastIndexOf("/")?t.substr(0,t.lastIndexOf("/")+1):"./")+yt.movieURL,yt.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},k=function(){8!==(l=parseInt(yt.flashVersion,10))&&9!==l&&(yt._wD(C("badFV",l,8)),yt.flashVersion=l=8);var t=yt.debugMode||yt.debugFlash?"_debug.swf":".swf";yt.useHTML5Audio&&!yt.html5Only&&yt.audioFormats.mp4.required&&l<9&&(yt._wD(C("needfl9")),yt.flashVersion=l=9),yt.version=yt.versionNumber+(yt.html5Only?" (HTML5-only mode)":9===l?" (AS3/Flash 9)":" (AS2/Flash 8)"),l>8?(yt.defaultOptions=d(yt.defaultOptions,yt.flash9Options),yt.features.buffering=!0,yt.defaultOptions=d(yt.defaultOptions,yt.movieStarOptions),yt.filePatterns.flash9=new RegExp("\\.(mp3|"+se.join("|")+")(\\?.*)?$","i"),yt.features.movieStar=!0):yt.features.movieStar=!1,yt.filePattern=yt.filePatterns[8!==l?"flash9":"flash8"],yt.movieURL=(8===l?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",t),yt.features.peakData=yt.features.waveformData=yt.features.eqData=l>8},I=function(t,e){gt&&gt._setPolling(t,e)},T=function(){if(yt.debugURLParam.test(wt)&&(yt.setupOptions.debugMode=yt.debugMode=!0),!r(yt.debugID)){var t,e,n,o,i;if(yt.debugMode&&!r(yt.debugID)&&(!Jt||!yt.useConsole||!yt.consoleOnly)){for(i in(t=kt.createElement("div")).id=yt.debugID+"-toggle",o={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},t.appendChild(kt.createTextNode("-")),t.onclick=N,t.title="Toggle SM2 debug console",bt.match(/msie 6/i)&&(t.style.position="absolute",t.style.cursor="hand"),o)o.hasOwnProperty(i)&&(t.style[i]=o[i]);if((e=kt.createElement("div")).id=yt.debugID,e.style.display=yt.debugMode?"block":"none",yt.debugMode&&!r(t.id)){try{(n=M()).appendChild(t)}catch(t){throw new Error(C("domError")+" \n"+t.toString())}n.appendChild(e)}}n=null}},Q=this.getSoundById,h=function(t,e){return t?yt._wD(C(t),e):""},N=function(){var t=r(yt.debugID),e=r(yt.debugID+"-toggle");t&&(Vt?(e.innerHTML="+",t.style.display="none"):(e.innerHTML="-",t.style.display="block"),Vt=!Vt)},c=function(t,e,n){if(o.sm2Debugger!==i)try{sm2Debugger.handleEvent(t,e,n)}catch(t){return!1}return!0},j=function(){var t=[];return yt.debugMode&&t.push(B.sm2Debug),yt.debugFlash&&t.push(B.flashDebug),yt.useHighPerformance&&t.push(B.highPerf),t.join(" ")},F=function(){var t=C("fbHandler"),e=yt.getMoviePercent(),n=B,r={type:"FLASHBLOCK"};yt.html5Only||(yt.ok()?(yt.didFlashBlock&&yt._wD(t+": Unblocked"),yt.oMC&&(yt.oMC.className=[j(),n.swfDefault,n.swfLoaded+(yt.didFlashBlock?" "+n.swfUnblocked:"")].join(" "))):(jt&&(yt.oMC.className=j()+" "+n.swfDefault+" "+(null===e?n.swfTimedout:n.swfError),yt._wD(t+": "+C("fbTimeout")+(e?" ("+C("fbLoaded")+")":""))),yt.didFlashBlock=!0,g({type:"ontimeout",ignoreInit:!0,error:r}),E(r)))},m=function(t,e,n){_t[t]===i&&(_t[t]=[]),_t[t].push({method:e,scope:n||null,fired:!1})},g=function(t){if(t||(t={type:yt.ok()?"onready":"ontimeout"}),!xt&&t&&!t.ignoreInit)return!1;if("ontimeout"===t.type&&(yt.ok()||Lt&&!t.ignoreInit))return!1;var e,n,r={success:t&&t.ignoreInit?yt.ok():!Lt},o=t&&t.type&&_t[t.type]||[],i=[],a=[r],s=jt&&!yt.ok();for(t.error&&(a[0].error=t.error),e=0,n=o.length;e<n;e++)!0!==o[e].fired&&i.push(o[e]);if(i.length)for(e=0,n=i.length;e<n;e++)i[e].scope?i[e].method.apply(i[e].scope,a):i[e].method.apply(this,a),s||(i[e].fired=!0);return!0},v=function(){o.setTimeout((function(){yt.useFlashBlock&&F(),g(),"function"==typeof yt.onload&&(h("onload",1),yt.onload.apply(o),h("onloadOK",1)),yt.waitForWindowLoad&&it.add(o,"load",v)}),1)},ut=function(){if(st!==i)return st;var t,e,n,r,a=!1,s=navigator,u=o.ActiveXObject;try{r=s.plugins}catch(t){r=void 0}if(r&&r.length)e="application/x-shockwave-flash",(n=s.mimeTypes)&&n[e]&&n[e].enabledPlugin&&n[e].enabledPlugin.description&&(a=!0);else if(u!==i&&!bt.match(/MSAppHost/i)){try{t=new u("ShockwaveFlash.ShockwaveFlash")}catch(e){t=null}a=!!t,t=null}return st=a,a},X=function(){var t,e,n=yt.audioFormats;if(Yt&&bt.match(/os (1|2|3_0|3_1)\s/i)?(yt.hasHTML5=!1,yt.html5Only=!0,yt.oMC&&(yt.oMC.style.display="none")):yt.useHTML5Audio&&(yt.html5&&yt.html5.canPlayType||(yt._wD("SoundManager: No HTML5 Audio() support detected."),yt.hasHTML5=!1),Xt&&yt._wD(At+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(st?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),yt.useHTML5Audio&&yt.hasHTML5)for(e in W=!0,n)n.hasOwnProperty(e)&&n[e].required&&(yt.html5.canPlayType(n[e].type)?yt.preferFlash&&(yt.flash[e]||yt.flash[n[e].type])&&(t=!0):(W=!1,t=!0));return yt.ignoreFlash&&(t=!1,W=!0),yt.html5Only=yt.hasHTML5&&yt.useHTML5Audio&&!t,!yt.html5Only},Z=function(t){var e,n,r,o=0;if(t instanceof Array){for(e=0,n=t.length;e<n;e++)if(t[e]instanceof Object){if(yt.canPlayMIME(t[e].type)){o=e;break}}else if(yt.canPlayURL(t[e])){o=e;break}t[o].url&&(t[o]=t[o].url),r=t[o]}else r=t;return r},G=function(t){t._hasTimer||(t._hasTimer=!0,!Wt&&yt.html5PollingInterval&&(null===Ct&&0===Dt&&(Ct=setInterval(K,yt.html5PollingInterval)),Dt++))},z=function(t){t._hasTimer&&(t._hasTimer=!1,!Wt&&yt.html5PollingInterval&&Dt--)},K=function(){var t;if(null!==Ct&&!Dt)return clearInterval(Ct),void(Ct=null);for(t=yt.soundIDs.length-1;t>=0;t--)yt.sounds[yt.soundIDs[t]].isHTML5&&yt.sounds[yt.soundIDs[t]]._hasTimer&&yt.sounds[yt.soundIDs[t]]._onTimer()},E=function(t){t=t!==i?t:{},"function"==typeof yt.onerror&&yt.onerror.apply(o,[{type:t.type!==i?t.type:null}]),t.fatal!==i&&t.fatal&&yt.disable()},lt=function(){if(Xt&&ut()){var t,e,n=yt.audioFormats;for(e in n)if(n.hasOwnProperty(e)&&("mp3"===e||"mp4"===e)&&(yt._wD(vt+": Using flash fallback for "+e+" format"),yt.html5[e]=!1,n[e]&&n[e].related))for(t=n[e].related.length-1;t>=0;t--)yt.html5[n[e].related[t]]=!1}},this._setSandboxType=function(t){var e=yt.sandbox;e.type=t,e.description=e.types[e.types[t]!==i?t:"unknown"],"localWithFile"===e.type?(e.noRemote=!0,e.noLocal=!1,h("secNote",2)):"localWithNetwork"===e.type?(e.noRemote=!1,e.noLocal=!0):"localTrusted"===e.type&&(e.noRemote=!1,e.noLocal=!1)},this._externalInterfaceOK=function(t){if(!yt.swfLoaded){var e;if(c("swf",!0),c("flashtojs",!0),yt.swfLoaded=!0,te=!1,Xt&&lt(),!t||t.replace(/\+dev/i,"")!==yt.versionNumber.replace(/\+dev/i,""))return e=vt+': Fatal: JavaScript file build "'+yt.versionNumber+'" does not match Flash SWF build "'+t+'" at '+yt.url+". Ensure both are up-to-date.",void setTimeout((function(){throw new Error(e)}),0);setTimeout(u,Gt?100:1)}},P=function(t,e){if(Ot&&St)return!1;function n(){var t,e=[],n=[];t="SoundManager "+yt.version+(!yt.html5Only&&yt.useHTML5Audio?yt.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),yt.html5Only?yt.html5PollingInterval&&e.push("html5PollingInterval ("+yt.html5PollingInterval+"ms)"):(yt.preferFlash&&e.push("preferFlash"),yt.useHighPerformance&&e.push("useHighPerformance"),yt.flashPollingInterval&&e.push("flashPollingInterval ("+yt.flashPollingInterval+"ms)"),yt.html5PollingInterval&&e.push("html5PollingInterval ("+yt.html5PollingInterval+"ms)"),yt.wmode&&e.push("wmode ("+yt.wmode+")"),yt.debugFlash&&e.push("debugFlash"),yt.useFlashBlock&&e.push("flashBlock")),e.length&&(n=n.concat([e.join(" + ")])),yt._wD(t+(n.length?" + "+n.join(", "):""),1),ht()}if(yt.html5Only)return k(),n(),yt.oMC=r(yt.movieID),u(),Ot=!0,St=!0,!1;var o,a,s,l,c,h,f,d,p,y=e||yt.url,m=yt.altURL||y,g=M(),v=j(),A=kt.getElementsByTagName("html")[0];function b(t,e){return'<param name="'+t+'" value="'+e+'" />'}if(o=A&&A.dir&&A.dir.match(/rtl/i),t=t===i?yt.id:t,k(),yt.url=D(oe?y:m),e=yt.url,yt.wmode=!yt.wmode&&yt.useHighPerformance?"transparent":yt.wmode,null!==yt.wmode&&(bt.match(/msie 8/i)||!Gt&&!yt.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Ft.push(V.spcWmode),yt.wmode=null),a={name:t,id:t,src:e,quality:"high",allowScriptAccess:yt.allowScriptAccess,bgcolor:yt.bgColor,pluginspage:ie+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:yt.wmode,hasPriority:"true"},yt.debugFlash&&(a.FlashVars="debug=1"),yt.wmode||delete a.wmode,Gt)s=kt.createElement("div"),c=['<object id="'+t+'" data="'+e+'" type="'+a.type+'" title="'+a.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',b("movie",e),b("AllowScriptAccess",yt.allowScriptAccess),b("quality",a.quality),yt.wmode?b("wmode",yt.wmode):"",b("bgcolor",yt.bgColor),b("hasPriority","true"),yt.debugFlash?b("FlashVars",a.FlashVars):"","</object>"].join("");else for(l in s=kt.createElement("embed"),a)a.hasOwnProperty(l)&&s.setAttribute(l,a[l]);if(T(),v=j(),g=M())if(yt.oMC=r(yt.movieID)||kt.createElement("div"),yt.oMC.id)p=yt.oMC.className,yt.oMC.className=(p?p+" ":B.swfDefault)+(v?" "+v:""),yt.oMC.appendChild(s),Gt&&((h=yt.oMC.appendChild(kt.createElement("div"))).className=B.swfBox,h.innerHTML=c),St=!0;else{if(yt.oMC.id=yt.movieID,yt.oMC.className=B.swfDefault+" "+v,f=null,h=null,yt.useFlashBlock||(yt.useHighPerformance?f={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(f={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},o&&(f.left=Math.abs(parseInt(f.left,10))+"px"))),zt&&(yt.oMC.style.zIndex=1e4),!yt.debugFlash)for(d in f)f.hasOwnProperty(d)&&(yt.oMC.style[d]=f[d]);try{Gt||yt.oMC.appendChild(s),g.appendChild(yt.oMC),Gt&&((h=yt.oMC.appendChild(kt.createElement("div"))).className=B.swfBox,h.innerHTML=c),St=!0}catch(t){throw new Error(C("domError")+" \n"+t.toString())}}return Ot=!0,n(),!0},O=function(){return yt.html5Only?(P(),!1):!gt&&(yt.url?((gt=yt.getMovie(yt.id))||(It?(Gt?yt.oMC.innerHTML=Tt:yt.oMC.appendChild(It),It=null,Ot=!0):P(yt.id,yt.url),gt=yt.getMovie(yt.id)),"function"==typeof yt.oninitmovie&&setTimeout(yt.oninitmovie,1),ft(),!0):(h("noURL"),!1))},A=function(){setTimeout(b,1e3)},w=function(){o.setTimeout((function(){Y(At+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),yt.setup({preferFlash:!1}).reboot(),yt.didFlashBlock=!0,yt.beginDelayedInit()}),1)},b=function(){var t,e=!1;yt.url&&(qt||(qt=!0,it.remove(o,"load",A),st&&te&&!$t?h("waitFocus"):(xt||(t=yt.getMoviePercent())>0&&t<100&&(e=!0),setTimeout((function(){if(t=yt.getMoviePercent(),e)return qt=!1,yt._wD(C("waitSWF")),void o.setTimeout(A,1);xt||(yt._wD(vt+": No Flash response within expected time. Likely causes: "+(0===t?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(yt.debugFlash?" "+C("checkSWF"):""),2),!oe&&t&&(h("localFail",2),yt.debugFlash||h("tryDebug",2)),0===t&&yt._wD(C("swf404",yt.url),1),c("flashtojs",!1,": Timed out"+(oe?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)"))),!xt&&ee&&(null===t?yt.useFlashBlock||0===yt.flashLoadTimeout?(yt.useFlashBlock&&F(),h("waitForever")):!yt.useFlashBlock&&W?w():(h("waitForever"),g({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===yt.flashLoadTimeout?h("waitForever"):!yt.useFlashBlock&&W?w():R(!0))}),yt.flashLoadTimeout))))},_=function(){function t(){it.remove(o,"focus",_)}return $t||!te?(t(),!0):(ee=!0,$t=!0,h("gotFocus"),qt=!1,A(),t(),!0)},ft=function(){Ft.length&&(yt._wD("SoundManager 2: "+Ft.join(" "),1),Ft=[])},ht=function(){ft();var t,e=[];if(yt.useHTML5Audio&&yt.hasHTML5){for(t in yt.audioFormats)yt.audioFormats.hasOwnProperty(t)&&e.push(t+" = "+yt.html5[t]+(!yt.html5[t]&&jt&&yt.flash[t]?" (using flash)":yt.preferFlash&&yt.flash[t]&&jt?" (preferring flash)":yt.html5[t]?"":" ("+(yt.audioFormats[t].required?"required, ":"")+"and no flash support)"));yt._wD("SoundManager 2 HTML5 support: "+e.join(", "),1)}},f=function(t){if(xt)return!1;if(yt.html5Only)return h("sm2Loaded",1),xt=!0,v(),c("onload",!0),!0;var e,n=!0;return yt.useFlashBlock&&yt.flashLoadTimeout&&!yt.getMoviePercent()||(xt=!0),e={type:!st&&jt?"NO_FLASH":"INIT_TIMEOUT"},yt._wD("SoundManager 2 "+(Lt?"failed to load":"loaded")+" ("+(Lt?"Flash security/load error":"OK")+") "+String.fromCharCode(Lt?10006:10003),Lt?2:1),Lt||t?(yt.useFlashBlock&&yt.oMC&&(yt.oMC.className=j()+" "+(null===yt.getMoviePercent()?B.swfTimedout:B.swfError)),g({type:"ontimeout",error:e,ignoreInit:!0}),c("onload",!1),E(e),n=!1):c("onload",!0),Lt||(yt.waitForWindowLoad&&!Mt?(h("waitOnload"),it.add(o,"load",v)):(yt.waitForWindowLoad&&Mt&&h("docLoaded"),v())),n},s=function(){var t,e=yt.setupOptions;for(t in e)e.hasOwnProperty(t)&&(yt[t]===i?yt[t]=e[t]:yt[t]!==e[t]&&(yt.setupOptions[t]=yt[t]))},u=function(){if(xt)return h("didInit"),!1;function t(){it.remove(o,"load",yt.beginDelayedInit)}if(yt.html5Only)return xt||(t(),yt.enabled=!0,f()),!0;O();try{gt._externalInterfaceTest(!1),I(!0,yt.flashPollingInterval||(yt.useHighPerformance?10:50)),yt.debugMode||gt._disableDebug(),yt.enabled=!0,c("jstoflash",!0),yt.html5Only||it.add(o,"unload",a)}catch(t){return yt._wD("js/flash exception: "+t.toString()),c("jstoflash",!1),E({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),R(!0),f(),!1}return f(),t(),!0},S=function(){return!L&&(L=!0,s(),T(),!st&&yt.hasHTML5&&(yt._wD("SoundManager 2: No Flash detected"+(yt.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),yt.setup({useHTML5Audio:!0,preferFlash:!1})),ot(),!st&&jt&&(Ft.push(V.needFlash),yt.setup({flashLoadTimeout:1})),kt.removeEventListener&&kt.removeEventListener("DOMContentLoaded",S,!1),O(),!0)},rt=function(){return"complete"===kt.readyState&&(S(),kt.detachEvent("onreadystatechange",rt)),!0},x=function(){Mt=!0,S(),it.remove(o,"load",x)},ut(),it.add(o,"focus",_),it.add(o,"load",A),it.add(o,"load",x),kt.addEventListener?kt.addEventListener("DOMContentLoaded",S,!1):kt.attachEvent?kt.attachEvent("onreadystatechange",rt):(c("onload",!1),E({type:"NO_DOM2_EVENTS",fatal:!0}))}o.SM2_DEFER!==i&&SM2_DEFER||(a=new s),t&&"object"==typeof t.exports?(t.exports.SoundManager=s,t.exports.soundManager=a):void 0===(r=function(){return{constructor:s,getInstance:function(t){if(!o.soundManager&&t instanceof Function){var e=t(s);e instanceof s&&(o.soundManager=e)}return o.soundManager}}}.call(e,n,e,t))||(t.exports=r),o.SoundManager=s,o.soundManager=a}(window)},5506:function(t,e,n){"use strict";var r=n(6518),o=n(2357).entries;r({target:"Object",stat:!0},{entries:function(t){return o(t)}})}},function(t){t(t.s=7653)}]);
//# sourceMappingURL=plugin.tts.js.map