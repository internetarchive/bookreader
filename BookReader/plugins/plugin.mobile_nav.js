(self.webpackChunk_internetarchive_bookreader=self.webpackChunk_internetarchive_bookreader||[]).push([[111],{5703:function(e,n,t){"use strict";t(2222),t(7327),t(9826),t(9554);var a,o=t(7112),i=t(3609),s=t(3609),r=[{filter:"grayscale(100%)",label:"Grayscale"},{filter:"brightness(120%)",label:"High brightness"},{filter:"invert(100%)",label:"Inverted (dark mode)"},{filter:"contrast(120%)",label:"High contrast"}];i.extend(BookReader.defaultOptions,{enableMobileNav:!0,mobileNavTitle:"Internet Archive",mobileNavFullscreenOnly:!1}),BookReader.prototype.setup=(a=BookReader.prototype.setup,function(e){a.call(this,e),this.enableMobileNav=e.enableMobileNav,this.mobileNavTitle=e.mobileNavTitle,this.mobileNavFullscreenOnly=e.mobileNavFullscreenOnly,this.refs.$mmenu=null}),BookReader.prototype.initToolbar=function(e){return function(n,t){var a,i=this;if(this.enableMobileNav){var r=this.buildMobileDrawerElement();this.refs.$br.append(r),this.buildInfoDiv(this.$(".BRmobileInfo")),this.buildShareDiv(this.$(".BRmobileShare")),(a=r).mmenu({navbars:[{position:"top"}],navbar:{add:!0,title:this.mobileNavTitle,titleLink:"panel"},extensions:["panelshadow"]},{offCanvas:{wrapPageIfNeeded:!1,zposition:"next",pageSelector:this.el}});var c=a.find(".BRpageviewValue");a.data("mmenu").bind("opened",(function(){c.length&&c.val(window.location.href)})),r.find(".BRcheckbox-filters").click((function(){return l(r,i)})),r.find(".DrawerLayoutButton.one_page_mode").click((function(){return i.switchMode(i.constMode1up)})),r.find(".DrawerLayoutButton.two_page_mode").click((function(){return i.switchMode(i.constMode2up)})),r.find(".DrawerLayoutButton.thumbnail_mode").click((function(){return i.switchMode(i.constModeThumb)})),this.mobileNavFullscreenOnly?s(document.body).addClass("BRbodyMobileNavEnabledFullscreen"):s(document.body).addClass("BRbodyMobileNavEnabled"),this.refs.$mmenu=a}if(e.apply(this,arguments),this.enableMobileNav){this.$(".BRmobileHamburger").click((function(){a.data("mmenu").getInstance().vars.opened?a.data("mmenu").close():(a.data("mmenu").open(),i.trigger("mobileNavOpen"))}));var b=function(e){var n=s(window).width();a.data("mmenu").getInstance().vars.opened&&n>=800&&a.data("mmenu").close()};window.addEventListener("resize",o.debounce(b,900))}}}(BookReader.prototype.initToolbar),BookReader.prototype.buildToolbarElement=function(e){return function(){var n=e.call(this);if(this.enableMobileNav){var t=BookReader.util.escapeHTML(this.bookTitle),a='\n        <span class="BRmobileHamburgerWrapper">\n          <button class="BRmobileHamburger"></button>\n          <span class="BRtoolbarMobileTitle" title="'.concat(t,'">').concat(t,"</span>\n        </span>\n      ");n.addClass("responsive").prepend(s(a))}return n}}(BookReader.prototype.buildToolbarElement),BookReader.prototype.buildMobileDrawerElement=function(){var e="";this.enableExperimentalControls&&(e='\n        <p class="DrawerSettingsTitle">Visual Adjustment</p>\n        <div class="BRcheckbox-group-filters">\n        ',r.forEach((function(n,t){var a='\n          <input type="checkbox" class="BRcheckbox-filters" id="filter'.concat(t,'">\n          <label for="filter').concat(t,'" class="BRcheckbox-label-filters">').concat(n.label,"</label><br>\n        \n      ");e=e.concat(a)})),e=e.concat("</div>"));var n='\n    <span>\n        <span class="DrawerIconWrapper">\n          <img class="DrawerIcon" src="'.concat("".concat(this.imagesBaseURL,"icon_gear.svg"),'" alt="settings-icon"/>\n        </span>\n        Settings\n    </span>\n    <div class=DrawerSettingsWrapper>\n        <div class="DrawerSettingsLayoutWrapper">\n          <button class="DrawerLayoutButton one_page_mode">\n            <img src="',this.imagesBaseURL,'icon_one_page.svg" alt="Single Page"/>\n            <br>\n            One Page\n          </button>\n          <button class="DrawerLayoutButton two_page_mode TwoPagesButton">\n            <img src="').concat(this.imagesBaseURL,'icon_two_pages.svg" alt="Two Pages"/>\n            <br>\n            Two Pages\n          </button>\n          <button class="DrawerLayoutButton thumbnail_mode">\n            <img src="').concat(this.imagesBaseURL,'icon_thumbnails.svg" alt="Thumbnails"/>\n            <br>\n            Thumbnails\n          </button>\n        </div>\n        <br>\n        <div class="DrawerSettingsTitle">Zoom</div>\n        <button class=\'BRicon zoom_out\'></button>\n        <button class=\'BRicon zoom_in\'></button>\n        <br style="clear:both"><br><br>\n        ').concat(e,"\n    </div>\n  "),t='\n    <span>\n        <span class="DrawerIconWrapper ">\n            <img class="DrawerIcon" src="'.concat(this.imagesBaseURL,'icon_info.svg" alt="info-icon"/>\n        </span>\n        About This Book\n    </span>\n    <div class="BRmobileInfo"></div>\n  '),a='\n    <span>\n      <span class="DrawerIconWrapper">\n        <img class="DrawerIcon" src="'.concat(this.imagesBaseURL,'icon_share.svg" alt="info-share"/>\n      </span>\n      Share This Book\n    </span>\n    <div class="BRmobileShare"></div>\n  '),o='\n    <nav id="BRmobileMenu" class="BRmobileMenu">\n      <ul>\n        <li class="BRmobileMenu__settings">'.concat(n,'</li>\n        <li class="BRmobileMenu__moreInfoRow">').concat(t,'</li>\n        <li class="BRmobileMenu__share">').concat(a,"</li>\n      </ul>\n    </nav>\n  ");return s(o)},BookReader.prototype.$=function(e){return function(n){var t=e.call(this,n);return this.refs.$mmenu&&(t=t.add(this.refs.$mmenu.find(n))),t}}(BookReader.prototype.$);var l=function(e,n){var t="";s(".BRcheckbox-filters").each((function(e,a){n.refs.$br.removeClass("filter-applied"),s(a).is(":checked")&&(n.refs.$br.addClass(s(a).attr("filter-applied")),t+=r[e].filter)}));var a=s("#filtersStyle")[0]||document.createElement("style");a.id="filtersStyle",a.innerHTML=".BRpagecontainer  img {\n            filter: ".concat(t,";\n            -webkit-filter: ").concat(t,";}"),document.body.appendChild(a)}}},0,[[5703,898]]]);
//# sourceMappingURL=plugin.mobile_nav.js.map